var of=Object.defineProperty;var af=(e,t,r)=>t in e?of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mo=(e,t,r)=>af(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();const cf="https://identity.internetcomputer.org",_o="https://icp0.io",uf=5*60*1e3,Va="rkp4c-7iaaa-aaaaa-aaaca-cai",zs=BigInt(1e4),ff=new Uint8Array([84,80,85,80,0,0,0,0]);var lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function df(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ji={},tn={},wo;function Ma(){if(wo)return tn;wo=1,tn.byteLength=a,tn.toByteArray=w,tn.fromByteArray=N;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=n.length;o<u;++o)e[o]=n[o],t[n.charCodeAt(o)]=o;t[45]=62,t[95]=63;function f(x){var p=x.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=x.indexOf("=");O===-1&&(O=p);var q=O===p?0:4-O%4;return[O,q]}function a(x){var p=f(x),O=p[0],q=p[1];return(O+q)*3/4-q}function h(x,p,O){return(p+O)*3/4-O}function w(x){var p,O=f(x),q=O[0],K=O[1],D=new r(h(x,q,K)),V=0,te=K>0?q-4:q,I;for(I=0;I<te;I+=4)p=t[x.charCodeAt(I)]<<18|t[x.charCodeAt(I+1)]<<12|t[x.charCodeAt(I+2)]<<6|t[x.charCodeAt(I+3)],D[V++]=p>>16&255,D[V++]=p>>8&255,D[V++]=p&255;return K===2&&(p=t[x.charCodeAt(I)]<<2|t[x.charCodeAt(I+1)]>>4,D[V++]=p&255),K===1&&(p=t[x.charCodeAt(I)]<<10|t[x.charCodeAt(I+1)]<<4|t[x.charCodeAt(I+2)]>>2,D[V++]=p>>8&255,D[V++]=p&255),D}function E(x){return e[x>>18&63]+e[x>>12&63]+e[x>>6&63]+e[x&63]}function m(x,p,O){for(var q,K=[],D=p;D<O;D+=3)q=(x[D]<<16&16711680)+(x[D+1]<<8&65280)+(x[D+2]&255),K.push(E(q));return K.join("")}function N(x){for(var p,O=x.length,q=O%3,K=[],D=16383,V=0,te=O-q;V<te;V+=D)K.push(m(x,V,V+D>te?te:V+D));return q===1?(p=x[O-1],K.push(e[p>>2]+e[p<<4&63]+"==")):q===2&&(p=(x[O-2]<<8)+x[O-1],K.push(e[p>>10]+e[p>>4&63]+e[p<<2&63]+"=")),K.join("")}return tn}var Fn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var bo;function Ks(){return bo||(bo=1,Fn.read=function(e,t,r,n,o){var u,f,a=o*8-n-1,h=(1<<a)-1,w=h>>1,E=-7,m=r?o-1:0,N=r?-1:1,x=e[t+m];for(m+=N,u=x&(1<<-E)-1,x>>=-E,E+=a;E>0;u=u*256+e[t+m],m+=N,E-=8);for(f=u&(1<<-E)-1,u>>=-E,E+=n;E>0;f=f*256+e[t+m],m+=N,E-=8);if(u===0)u=1-w;else{if(u===h)return f?NaN:(x?-1:1)*(1/0);f=f+Math.pow(2,n),u=u-w}return(x?-1:1)*f*Math.pow(2,u-n)},Fn.write=function(e,t,r,n,o,u){var f,a,h,w=u*8-o-1,E=(1<<w)-1,m=E>>1,N=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:u-1,p=n?1:-1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,f=E):(f=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-f))<1&&(f--,h*=2),f+m>=1?t+=N/h:t+=N*Math.pow(2,1-m),t*h>=2&&(f++,h/=2),f+m>=E?(a=0,f=E):f+m>=1?(a=(t*h-1)*Math.pow(2,o),f=f+m):(a=t*Math.pow(2,m-1)*Math.pow(2,o),f=0));o>=8;e[r+x]=a&255,x+=p,a/=256,o-=8);for(f=f<<o|a,w+=o;w>0;e[r+x]=f&255,x+=p,f/=256,w-=8);e[r+x-p]|=O*128}),Fn}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var xo;function hf(){return xo||(xo=1,function(e){const t=Ma(),r=Ks(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=D,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const s=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(s,i),s.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function f(s){if(s>o)throw new RangeError('The value "'+s+'" is invalid for option "size"');const i=new Uint8Array(s);return Object.setPrototypeOf(i,a.prototype),i}function a(s,i,c){if(typeof s=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(s)}return h(s,i,c)}a.poolSize=8192;function h(s,i,c){if(typeof s=="string")return N(s,i);if(ArrayBuffer.isView(s))return p(s);if(s==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(Z(s,ArrayBuffer)||s&&Z(s.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Z(s,SharedArrayBuffer)||s&&Z(s.buffer,SharedArrayBuffer)))return O(s,i,c);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const y=s.valueOf&&s.valueOf();if(y!=null&&y!==s)return a.from(y,i,c);const v=q(s);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return a.from(s[Symbol.toPrimitive]("string"),i,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}a.from=function(s,i,c){return h(s,i,c)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function w(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function E(s,i,c){return w(s),s<=0?f(s):i!==void 0?typeof c=="string"?f(s).fill(i,c):f(s).fill(i):f(s)}a.alloc=function(s,i,c){return E(s,i,c)};function m(s){return w(s),f(s<0?0:K(s)|0)}a.allocUnsafe=function(s){return m(s)},a.allocUnsafeSlow=function(s){return m(s)};function N(s,i){if((typeof i!="string"||i==="")&&(i="utf8"),!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const c=V(s,i)|0;let y=f(c);const v=y.write(s,i);return v!==c&&(y=y.slice(0,v)),y}function x(s){const i=s.length<0?0:K(s.length)|0,c=f(i);for(let y=0;y<i;y+=1)c[y]=s[y]&255;return c}function p(s){if(Z(s,Uint8Array)){const i=new Uint8Array(s);return O(i.buffer,i.byteOffset,i.byteLength)}return x(s)}function O(s,i,c){if(i<0||s.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<i+(c||0))throw new RangeError('"length" is outside of buffer bounds');let y;return i===void 0&&c===void 0?y=new Uint8Array(s):c===void 0?y=new Uint8Array(s,i):y=new Uint8Array(s,i,c),Object.setPrototypeOf(y,a.prototype),y}function q(s){if(a.isBuffer(s)){const i=K(s.length)|0,c=f(i);return c.length===0||s.copy(c,0,0,i),c}if(s.length!==void 0)return typeof s.length!="number"||oe(s.length)?f(0):x(s);if(s.type==="Buffer"&&Array.isArray(s.data))return x(s.data)}function K(s){if(s>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return s|0}function D(s){return+s!=s&&(s=0),a.alloc(+s)}a.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==a.prototype},a.compare=function(i,c){if(Z(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),Z(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(i)||!a.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===c)return 0;let y=i.length,v=c.length;for(let U=0,$=Math.min(y,v);U<$;++U)if(i[U]!==c[U]){y=i[U],v=c[U];break}return y<v?-1:v<y?1:0},a.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(i,c){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return a.alloc(0);let y;if(c===void 0)for(c=0,y=0;y<i.length;++y)c+=i[y].length;const v=a.allocUnsafe(c);let U=0;for(y=0;y<i.length;++y){let $=i[y];if(Z($,Uint8Array))U+$.length>v.length?(a.isBuffer($)||($=a.from($)),$.copy(v,U)):Uint8Array.prototype.set.call(v,$,U);else if(a.isBuffer($))$.copy(v,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=$.length}return v};function V(s,i){if(a.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||Z(s,ArrayBuffer))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);const c=s.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&c===0)return 0;let v=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return l(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return T(s).length;default:if(v)return y?-1:l(s).length;i=(""+i).toLowerCase(),v=!0}}a.byteLength=V;function te(s,i,c){let y=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,i>>>=0,c<=i))return"";for(s||(s="utf8");;)switch(s){case"hex":return le(this,i,c);case"utf8":case"utf-8":return R(this,i,c);case"ascii":return ee(this,i,c);case"latin1":case"binary":return ne(this,i,c);case"base64":return _(this,i,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,i,c);default:if(y)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),y=!0}}a.prototype._isBuffer=!0;function I(s,i,c){const y=s[i];s[i]=s[c],s[c]=y}a.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<i;c+=2)I(this,c,c+1);return this},a.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<i;c+=4)I(this,c,c+3),I(this,c+1,c+2);return this},a.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<i;c+=8)I(this,c,c+7),I(this,c+1,c+6),I(this,c+2,c+5),I(this,c+3,c+4);return this},a.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?R(this,0,i):te.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(i){if(!a.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:a.compare(this,i)===0},a.prototype.inspect=function(){let i="";const c=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(i+=" ... "),"<Buffer "+i+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(i,c,y,v,U){if(Z(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),!a.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(c===void 0&&(c=0),y===void 0&&(y=i?i.length:0),v===void 0&&(v=0),U===void 0&&(U=this.length),c<0||y>i.length||v<0||U>this.length)throw new RangeError("out of range index");if(v>=U&&c>=y)return 0;if(v>=U)return-1;if(c>=y)return 1;if(c>>>=0,y>>>=0,v>>>=0,U>>>=0,this===i)return 0;let $=U-v,de=y-c;const me=Math.min($,de),pe=this.slice(v,U),fe=i.slice(c,y);for(let we=0;we<me;++we)if(pe[we]!==fe[we]){$=pe[we],de=fe[we];break}return $<de?-1:de<$?1:0};function W(s,i,c,y,v){if(s.length===0)return-1;if(typeof c=="string"?(y=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,oe(c)&&(c=v?0:s.length-1),c<0&&(c=s.length+c),c>=s.length){if(v)return-1;c=s.length-1}else if(c<0)if(v)c=0;else return-1;if(typeof i=="string"&&(i=a.from(i,y)),a.isBuffer(i))return i.length===0?-1:J(s,i,c,y,v);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(s,i,c):Uint8Array.prototype.lastIndexOf.call(s,i,c):J(s,[i],c,y,v);throw new TypeError("val must be string, number or Buffer")}function J(s,i,c,y,v){let U=1,$=s.length,de=i.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(s.length<2||i.length<2)return-1;U=2,$/=2,de/=2,c/=2}function me(fe,we){return U===1?fe[we]:fe.readUInt16BE(we*U)}let pe;if(v){let fe=-1;for(pe=c;pe<$;pe++)if(me(s,pe)===me(i,fe===-1?0:pe-fe)){if(fe===-1&&(fe=pe),pe-fe+1===de)return fe*U}else fe!==-1&&(pe-=pe-fe),fe=-1}else for(c+de>$&&(c=$-de),pe=c;pe>=0;pe--){let fe=!0;for(let we=0;we<de;we++)if(me(s,pe+we)!==me(i,we)){fe=!1;break}if(fe)return pe}return-1}a.prototype.includes=function(i,c,y){return this.indexOf(i,c,y)!==-1},a.prototype.indexOf=function(i,c,y){return W(this,i,c,y,!0)},a.prototype.lastIndexOf=function(i,c,y){return W(this,i,c,y,!1)};function F(s,i,c,y){c=Number(c)||0;const v=s.length-c;y?(y=Number(y),y>v&&(y=v)):y=v;const U=i.length;y>U/2&&(y=U/2);let $;for($=0;$<y;++$){const de=parseInt(i.substr($*2,2),16);if(oe(de))return $;s[c+$]=de}return $}function P(s,i,c,y){return C(l(i,s.length-c),s,c,y)}function G(s,i,c,y){return C(d(i),s,c,y)}function X(s,i,c,y){return C(T(i),s,c,y)}function re(s,i,c,y){return C(b(i,s.length-c),s,c,y)}a.prototype.write=function(i,c,y,v){if(c===void 0)v="utf8",y=this.length,c=0;else if(y===void 0&&typeof c=="string")v=c,y=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(y)?(y=y>>>0,v===void 0&&(v="utf8")):(v=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const U=this.length-c;if((y===void 0||y>U)&&(y=U),i.length>0&&(y<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let $=!1;for(;;)switch(v){case"hex":return F(this,i,c,y);case"utf8":case"utf-8":return P(this,i,c,y);case"ascii":case"latin1":case"binary":return G(this,i,c,y);case"base64":return X(this,i,c,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,i,c,y);default:if($)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),$=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(s,i,c){return i===0&&c===s.length?t.fromByteArray(s):t.fromByteArray(s.slice(i,c))}function R(s,i,c){c=Math.min(s.length,c);const y=[];let v=i;for(;v<c;){const U=s[v];let $=null,de=U>239?4:U>223?3:U>191?2:1;if(v+de<=c){let me,pe,fe,we;switch(de){case 1:U<128&&($=U);break;case 2:me=s[v+1],(me&192)===128&&(we=(U&31)<<6|me&63,we>127&&($=we));break;case 3:me=s[v+1],pe=s[v+2],(me&192)===128&&(pe&192)===128&&(we=(U&15)<<12|(me&63)<<6|pe&63,we>2047&&(we<55296||we>57343)&&($=we));break;case 4:me=s[v+1],pe=s[v+2],fe=s[v+3],(me&192)===128&&(pe&192)===128&&(fe&192)===128&&(we=(U&15)<<18|(me&63)<<12|(pe&63)<<6|fe&63,we>65535&&we<1114112&&($=we))}}$===null?($=65533,de=1):$>65535&&($-=65536,y.push($>>>10&1023|55296),$=56320|$&1023),y.push($),v+=de}return Y(y)}const M=4096;function Y(s){const i=s.length;if(i<=M)return String.fromCharCode.apply(String,s);let c="",y=0;for(;y<i;)c+=String.fromCharCode.apply(String,s.slice(y,y+=M));return c}function ee(s,i,c){let y="";c=Math.min(s.length,c);for(let v=i;v<c;++v)y+=String.fromCharCode(s[v]&127);return y}function ne(s,i,c){let y="";c=Math.min(s.length,c);for(let v=i;v<c;++v)y+=String.fromCharCode(s[v]);return y}function le(s,i,c){const y=s.length;(!i||i<0)&&(i=0),(!c||c<0||c>y)&&(c=y);let v="";for(let U=i;U<c;++U)v+=ye[s[U]];return v}function ge(s,i,c){const y=s.slice(i,c);let v="";for(let U=0;U<y.length-1;U+=2)v+=String.fromCharCode(y[U]+y[U+1]*256);return v}a.prototype.slice=function(i,c){const y=this.length;i=~~i,c=c===void 0?y:~~c,i<0?(i+=y,i<0&&(i=0)):i>y&&(i=y),c<0?(c+=y,c<0&&(c=0)):c>y&&(c=y),c<i&&(c=i);const v=this.subarray(i,c);return Object.setPrototypeOf(v,a.prototype),v};function ie(s,i,c){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+i>c)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(i,c,y){i=i>>>0,c=c>>>0,y||ie(i,c,this.length);let v=this[i],U=1,$=0;for(;++$<c&&(U*=256);)v+=this[i+$]*U;return v},a.prototype.readUintBE=a.prototype.readUIntBE=function(i,c,y){i=i>>>0,c=c>>>0,y||ie(i,c,this.length);let v=this[i+--c],U=1;for(;c>0&&(U*=256);)v+=this[i+--c]*U;return v},a.prototype.readUint8=a.prototype.readUInt8=function(i,c){return i=i>>>0,c||ie(i,1,this.length),this[i]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(i,c){return i=i>>>0,c||ie(i,2,this.length),this[i]|this[i+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(i,c){return i=i>>>0,c||ie(i,2,this.length),this[i]<<8|this[i+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(i,c){return i=i>>>0,c||ie(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(i,c){return i=i>>>0,c||ie(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},a.prototype.readBigUInt64LE=he(function(i){i=i>>>0,L(i,"offset");const c=this[i],y=this[i+7];(c===void 0||y===void 0)&&H(i,this.length-8);const v=c+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,U=this[++i]+this[++i]*2**8+this[++i]*2**16+y*2**24;return BigInt(v)+(BigInt(U)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(i){i=i>>>0,L(i,"offset");const c=this[i],y=this[i+7];(c===void 0||y===void 0)&&H(i,this.length-8);const v=c*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],U=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+y;return(BigInt(v)<<BigInt(32))+BigInt(U)}),a.prototype.readIntLE=function(i,c,y){i=i>>>0,c=c>>>0,y||ie(i,c,this.length);let v=this[i],U=1,$=0;for(;++$<c&&(U*=256);)v+=this[i+$]*U;return U*=128,v>=U&&(v-=Math.pow(2,8*c)),v},a.prototype.readIntBE=function(i,c,y){i=i>>>0,c=c>>>0,y||ie(i,c,this.length);let v=c,U=1,$=this[i+--v];for(;v>0&&(U*=256);)$+=this[i+--v]*U;return U*=128,$>=U&&($-=Math.pow(2,8*c)),$},a.prototype.readInt8=function(i,c){return i=i>>>0,c||ie(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},a.prototype.readInt16LE=function(i,c){i=i>>>0,c||ie(i,2,this.length);const y=this[i]|this[i+1]<<8;return y&32768?y|4294901760:y},a.prototype.readInt16BE=function(i,c){i=i>>>0,c||ie(i,2,this.length);const y=this[i+1]|this[i]<<8;return y&32768?y|4294901760:y},a.prototype.readInt32LE=function(i,c){return i=i>>>0,c||ie(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},a.prototype.readInt32BE=function(i,c){return i=i>>>0,c||ie(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},a.prototype.readBigInt64LE=he(function(i){i=i>>>0,L(i,"offset");const c=this[i],y=this[i+7];(c===void 0||y===void 0)&&H(i,this.length-8);const v=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(y<<24);return(BigInt(v)<<BigInt(32))+BigInt(c+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),a.prototype.readBigInt64BE=he(function(i){i=i>>>0,L(i,"offset");const c=this[i],y=this[i+7];(c===void 0||y===void 0)&&H(i,this.length-8);const v=(c<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(v)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+y)}),a.prototype.readFloatLE=function(i,c){return i=i>>>0,c||ie(i,4,this.length),r.read(this,i,!0,23,4)},a.prototype.readFloatBE=function(i,c){return i=i>>>0,c||ie(i,4,this.length),r.read(this,i,!1,23,4)},a.prototype.readDoubleLE=function(i,c){return i=i>>>0,c||ie(i,8,this.length),r.read(this,i,!0,52,8)},a.prototype.readDoubleBE=function(i,c){return i=i>>>0,c||ie(i,8,this.length),r.read(this,i,!1,52,8)};function ae(s,i,c,y,v,U){if(!a.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>v||i<U)throw new RangeError('"value" argument is out of bounds');if(c+y>s.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(i,c,y,v){if(i=+i,c=c>>>0,y=y>>>0,!v){const de=Math.pow(2,8*y)-1;ae(this,i,c,y,de,0)}let U=1,$=0;for(this[c]=i&255;++$<y&&(U*=256);)this[c+$]=i/U&255;return c+y},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(i,c,y,v){if(i=+i,c=c>>>0,y=y>>>0,!v){const de=Math.pow(2,8*y)-1;ae(this,i,c,y,de,0)}let U=y-1,$=1;for(this[c+U]=i&255;--U>=0&&($*=256);)this[c+U]=i/$&255;return c+y},a.prototype.writeUint8=a.prototype.writeUInt8=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,1,255,0),this[c]=i&255,c+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,2,65535,0),this[c]=i&255,this[c+1]=i>>>8,c+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,2,65535,0),this[c]=i>>>8,this[c+1]=i&255,c+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,4,4294967295,0),this[c+3]=i>>>24,this[c+2]=i>>>16,this[c+1]=i>>>8,this[c]=i&255,c+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,4,4294967295,0),this[c]=i>>>24,this[c+1]=i>>>16,this[c+2]=i>>>8,this[c+3]=i&255,c+4};function Ne(s,i,c,y,v){k(i,y,v,s,c,7);let U=Number(i&BigInt(4294967295));s[c++]=U,U=U>>8,s[c++]=U,U=U>>8,s[c++]=U,U=U>>8,s[c++]=U;let $=Number(i>>BigInt(32)&BigInt(4294967295));return s[c++]=$,$=$>>8,s[c++]=$,$=$>>8,s[c++]=$,$=$>>8,s[c++]=$,c}function S(s,i,c,y,v){k(i,y,v,s,c,7);let U=Number(i&BigInt(4294967295));s[c+7]=U,U=U>>8,s[c+6]=U,U=U>>8,s[c+5]=U,U=U>>8,s[c+4]=U;let $=Number(i>>BigInt(32)&BigInt(4294967295));return s[c+3]=$,$=$>>8,s[c+2]=$,$=$>>8,s[c+1]=$,$=$>>8,s[c]=$,c+8}a.prototype.writeBigUInt64LE=he(function(i,c=0){return Ne(this,i,c,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(i,c=0){return S(this,i,c,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(i,c,y,v){if(i=+i,c=c>>>0,!v){const me=Math.pow(2,8*y-1);ae(this,i,c,y,me-1,-me)}let U=0,$=1,de=0;for(this[c]=i&255;++U<y&&($*=256);)i<0&&de===0&&this[c+U-1]!==0&&(de=1),this[c+U]=(i/$>>0)-de&255;return c+y},a.prototype.writeIntBE=function(i,c,y,v){if(i=+i,c=c>>>0,!v){const me=Math.pow(2,8*y-1);ae(this,i,c,y,me-1,-me)}let U=y-1,$=1,de=0;for(this[c+U]=i&255;--U>=0&&($*=256);)i<0&&de===0&&this[c+U+1]!==0&&(de=1),this[c+U]=(i/$>>0)-de&255;return c+y},a.prototype.writeInt8=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,1,127,-128),i<0&&(i=255+i+1),this[c]=i&255,c+1},a.prototype.writeInt16LE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,2,32767,-32768),this[c]=i&255,this[c+1]=i>>>8,c+2},a.prototype.writeInt16BE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,2,32767,-32768),this[c]=i>>>8,this[c+1]=i&255,c+2},a.prototype.writeInt32LE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,4,2147483647,-2147483648),this[c]=i&255,this[c+1]=i>>>8,this[c+2]=i>>>16,this[c+3]=i>>>24,c+4},a.prototype.writeInt32BE=function(i,c,y){return i=+i,c=c>>>0,y||ae(this,i,c,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[c]=i>>>24,this[c+1]=i>>>16,this[c+2]=i>>>8,this[c+3]=i&255,c+4},a.prototype.writeBigInt64LE=he(function(i,c=0){return Ne(this,i,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(i,c=0){return S(this,i,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(s,i,c,y,v,U){if(c+y>s.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Be(s,i,c,y,v){return i=+i,c=c>>>0,v||be(s,i,c,4),r.write(s,i,c,y,23,4),c+4}a.prototype.writeFloatLE=function(i,c,y){return Be(this,i,c,!0,y)},a.prototype.writeFloatBE=function(i,c,y){return Be(this,i,c,!1,y)};function ce(s,i,c,y,v){return i=+i,c=c>>>0,v||be(s,i,c,8),r.write(s,i,c,y,52,8),c+8}a.prototype.writeDoubleLE=function(i,c,y){return ce(this,i,c,!0,y)},a.prototype.writeDoubleBE=function(i,c,y){return ce(this,i,c,!1,y)},a.prototype.copy=function(i,c,y,v){if(!a.isBuffer(i))throw new TypeError("argument should be a Buffer");if(y||(y=0),!v&&v!==0&&(v=this.length),c>=i.length&&(c=i.length),c||(c=0),v>0&&v<y&&(v=y),v===y||i.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),i.length-c<v-y&&(v=i.length-c+y);const U=v-y;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,y,v):Uint8Array.prototype.set.call(i,this.subarray(y,v),c),U},a.prototype.fill=function(i,c,y,v){if(typeof i=="string"){if(typeof c=="string"?(v=c,c=0,y=this.length):typeof y=="string"&&(v=y,y=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!a.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(i.length===1){const $=i.charCodeAt(0);(v==="utf8"&&$<128||v==="latin1")&&(i=$)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(c<0||this.length<c||this.length<y)throw new RangeError("Out of range index");if(y<=c)return this;c=c>>>0,y=y===void 0?this.length:y>>>0,i||(i=0);let U;if(typeof i=="number")for(U=c;U<y;++U)this[U]=i;else{const $=a.isBuffer(i)?i:a.from(i,v),de=$.length;if(de===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(U=0;U<y-c;++U)this[U+c]=$[U%de]}return this};const Q={};function se(s,i,c){Q[s]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,this.stack,delete this.name}get code(){return s}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(s,i){return`The "${s}" argument must be of type number. Received type ${typeof i}`},TypeError),se("ERR_OUT_OF_RANGE",function(s,i,c){let y=`The value of "${s}" is out of range.`,v=c;return Number.isInteger(c)&&Math.abs(c)>2**32?v=B(String(c)):typeof c=="bigint"&&(v=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(v=B(v)),v+="n"),y+=` It must be ${i}. Received ${v}`,y},RangeError);function B(s){let i="",c=s.length;const y=s[0]==="-"?1:0;for(;c>=y+4;c-=3)i=`_${s.slice(c-3,c)}${i}`;return`${s.slice(0,c)}${i}`}function A(s,i,c){L(i,"offset"),(s[i]===void 0||s[i+c]===void 0)&&H(i,s.length-(c+1))}function k(s,i,c,y,v,U){if(s>c||s<i){const $=typeof i=="bigint"?"n":"";let de;throw i===0||i===BigInt(0)?de=`>= 0${$} and < 2${$} ** ${(U+1)*8}${$}`:de=`>= -(2${$} ** ${(U+1)*8-1}${$}) and < 2 ** ${(U+1)*8-1}${$}`,new Q.ERR_OUT_OF_RANGE("value",de,s)}A(y,v,U)}function L(s,i){if(typeof s!="number")throw new Q.ERR_INVALID_ARG_TYPE(i,"number",s)}function H(s,i,c){throw Math.floor(s)!==s?(L(s,c),new Q.ERR_OUT_OF_RANGE("offset","an integer",s)):i<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${i}`,s)}const j=/[^+/0-9A-Za-z-_]/g;function g(s){if(s=s.split("=")[0],s=s.trim().replace(j,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function l(s,i){i=i||1/0;let c;const y=s.length;let v=null;const U=[];for(let $=0;$<y;++$){if(c=s.charCodeAt($),c>55295&&c<57344){if(!v){if(c>56319){(i-=3)>-1&&U.push(239,191,189);continue}else if($+1===y){(i-=3)>-1&&U.push(239,191,189);continue}v=c;continue}if(c<56320){(i-=3)>-1&&U.push(239,191,189),v=c;continue}c=(v-55296<<10|c-56320)+65536}else v&&(i-=3)>-1&&U.push(239,191,189);if(v=null,c<128){if((i-=1)<0)break;U.push(c)}else if(c<2048){if((i-=2)<0)break;U.push(c>>6|192,c&63|128)}else if(c<65536){if((i-=3)<0)break;U.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((i-=4)<0)break;U.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return U}function d(s){const i=[];for(let c=0;c<s.length;++c)i.push(s.charCodeAt(c)&255);return i}function b(s,i){let c,y,v;const U=[];for(let $=0;$<s.length&&!((i-=2)<0);++$)c=s.charCodeAt($),y=c>>8,v=c%256,U.push(v),U.push(y);return U}function T(s){return t.toByteArray(g(s))}function C(s,i,c,y){let v;for(v=0;v<y&&!(v+c>=i.length||v>=s.length);++v)i[v+c]=s[v];return v}function Z(s,i){return s instanceof i||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===i.name}function oe(s){return s!==s}const ye=function(){const s="0123456789abcdef",i=new Array(256);for(let c=0;c<16;++c){const y=c*16;for(let v=0;v<16;++v)i[y+v]=s[c]+s[v]}return i}();function he(s){return typeof BigInt>"u"?ve:s}function ve(){throw new Error("BigInt not supported")}}(ji)),ji}var pf=hf(),Ss;(function(e){e[e.SysFatal=1]="SysFatal",e[e.SysTransient=2]="SysTransient",e[e.DestinationInvalid=3]="DestinationInvalid",e[e.CanisterReject=4]="CanisterReject",e[e.CanisterError=5]="CanisterError"})(Ss||(Ss={}));const yf="modulepreload",gf=function(e){return"/canister-dashboard/"+e},Eo={},mf=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let f=function(w){return Promise.all(w.map(E=>Promise.resolve(E).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),h=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=f(r.map(w=>{if(w=gf(w),w in Eo)return;Eo[w]=!0;const E=w.endsWith(".css"),m=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${m}`))return;const N=document.createElement("link");if(N.rel=E?"stylesheet":yf,E||(N.as="script"),N.crossOrigin="",N.href=w,h&&N.setAttribute("nonce",h),document.head.appendChild(N),E)return new Promise((x,p)=>{N.addEventListener("load",x),N.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${w}`)))})}))}function u(f){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=f,window.dispatchEvent(a),!a.defaultPrevented)throw f}return o.then(f=>{for(const a of f||[])a.status==="rejected"&&u(a.reason);return t().catch(u)})},di="abcdefghijklmnopqrstuvwxyz234567",Dr=Object.create(null);for(let e=0;e<di.length;e++)Dr[di[e]]=e;Dr[0]=Dr.o;Dr[1]=Dr.i;function _f(e){let t=0,r=0,n="";function o(u){return t<0?r|=u>>-t:r=u<<t&248,t>3?(t-=8,1):(t<4&&(n+=di[r>>3],t+=5),0)}for(let u=0;u<e.length;)u+=o(e[u]);return n+(t<0?di[r>>3]:"")}function wf(e){let t=0,r=0;const n=new Uint8Array(e.length*4/3|0);let o=0;function u(f){let a=Dr[f.toLowerCase()];if(a===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);a<<=3,r|=a>>>t,t+=5,t>=8&&(n[o++]=r,t-=8,t>0?r=a<<5-t&255:r=0)}for(const f of e)u(f);return n.slice(0,o)}const bf=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function xf(e){const t=new Uint8Array(e);let r=-1;for(let n=0;n<t.length;n++){const u=(t[n]^r)&255;r=bf[u]^r>>>8}return(r^-1)>>>0}const Rr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ds(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ef(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ze(e,...t){if(!Ds(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function vo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function vf(e,t){Ze(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function gn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function zi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function _t(e,t){return e<<32-t|e>>>t}const $a=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Nf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Yr(e){if(Ze(e),$a)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=Nf[e[r]];return t}const St={_0:48,_9:57,A:65,F:70,a:97,f:102};function No(e){if(e>=St._0&&e<=St._9)return e-St._0;if(e>=St.A&&e<=St.F)return e-(St.A-10);if(e>=St.a&&e<=St.f)return e-(St.a-10)}function qa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if($a)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,u=0;o<r;o++,u+=2){const f=No(e.charCodeAt(u)),a=No(e.charCodeAt(u+1));if(f===void 0||a===void 0){const h=e[u]+e[u+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+u)}n[o]=f*16+a}return n}function Bi(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ga(e){return typeof e=="string"&&(e=Bi(e)),Ze(e),e}function Me(...e){let t=0;for(let n=0;n<e.length;n++){const o=e[n];Ze(o),t+=o.length}const r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const u=e[n];r.set(u,o),o+=u.length}return r}class Bf{}function Ys(e){const t=n=>e().update(Ga(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Ha(e=32){if(Rr&&typeof Rr.getRandomValues=="function")return Rr.getRandomValues(new Uint8Array(e));if(Rr&&typeof Rr.randomBytes=="function")return Uint8Array.from(Rr.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Tf(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const o=BigInt(32),u=BigInt(4294967295),f=Number(r>>o&u),a=Number(r&u),h=n?4:0,w=n?0:4;e.setUint32(t+h,f,n),e.setUint32(t+w,a,n)}function Af(e,t,r){return e&t^~e&r}function Sf(e,t,r){return e&t^e&r^t&r}class La extends Bf{constructor(t,r,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=zi(this.buffer)}update(t){vo(this),t=Ga(t),Ze(t);const{view:r,buffer:n,blockLen:o}=this,u=t.length;for(let f=0;f<u;){const a=Math.min(o-this.pos,u-f);if(a===o){const h=zi(t);for(;o<=u-f;f+=o)this.process(h,f);continue}n.set(t.subarray(f,f+a),this.pos),this.pos+=a,f+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){vo(this),vf(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:o,isLE:u}=this;let{pos:f}=this;r[f++]=128,gn(this.buffer.subarray(f)),this.padOffset>o-f&&(this.process(n,0),f=0);for(let m=f;m<o;m++)r[m]=0;Tf(n,o-8,BigInt(this.length*8),u),this.process(n,0);const a=zi(t),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=h/4,E=this.get();if(w>E.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<w;m++)a.setUint32(4*m,E[m],u)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:o,finished:u,destroyed:f,pos:a}=this;return t.destroyed=f,t.finished=u,t.length=o,t.pos=a,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Gt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Xe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Un=BigInt(2**32-1),Bo=BigInt(32);function Rf(e,t=!1){return t?{h:Number(e&Un),l:Number(e>>Bo&Un)}:{h:Number(e>>Bo&Un)|0,l:Number(e&Un)|0}}function Of(e,t=!1){const r=e.length;let n=new Uint32Array(r),o=new Uint32Array(r);for(let u=0;u<r;u++){const{h:f,l:a}=Rf(e[u],t);[n[u],o[u]]=[f,a]}return[n,o]}const To=(e,t,r)=>e>>>r,Ao=(e,t,r)=>e<<32-r|t>>>r,Or=(e,t,r)=>e>>>r|t<<32-r,Ir=(e,t,r)=>e<<32-r|t>>>r,kn=(e,t,r)=>e<<64-r|t>>>r-32,Pn=(e,t,r)=>e>>>r-32|t<<64-r;function Rt(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}const If=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Ff=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Uf=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),kf=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,Pf=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Cf=(e,t,r,n,o,u)=>t+r+n+o+u+(e/2**32|0)|0,Vf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lt=new Uint32Array(64);class ja extends La{constructor(t=32){super(64,t,8,!1),this.A=Gt[0]|0,this.B=Gt[1]|0,this.C=Gt[2]|0,this.D=Gt[3]|0,this.E=Gt[4]|0,this.F=Gt[5]|0,this.G=Gt[6]|0,this.H=Gt[7]|0}get(){const{A:t,B:r,C:n,D:o,E:u,F:f,G:a,H:h}=this;return[t,r,n,o,u,f,a,h]}set(t,r,n,o,u,f,a,h){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=u|0,this.F=f|0,this.G=a|0,this.H=h|0}process(t,r){for(let m=0;m<16;m++,r+=4)Lt[m]=t.getUint32(r,!1);for(let m=16;m<64;m++){const N=Lt[m-15],x=Lt[m-2],p=_t(N,7)^_t(N,18)^N>>>3,O=_t(x,17)^_t(x,19)^x>>>10;Lt[m]=O+Lt[m-7]+p+Lt[m-16]|0}let{A:n,B:o,C:u,D:f,E:a,F:h,G:w,H:E}=this;for(let m=0;m<64;m++){const N=_t(a,6)^_t(a,11)^_t(a,25),x=E+N+Af(a,h,w)+Vf[m]+Lt[m]|0,O=(_t(n,2)^_t(n,13)^_t(n,22))+Sf(n,o,u)|0;E=w,w=h,h=a,a=f+x|0,f=u,u=o,o=n,n=x+O|0}n=n+this.A|0,o=o+this.B|0,u=u+this.C|0,f=f+this.D|0,a=a+this.E|0,h=h+this.F|0,w=w+this.G|0,E=E+this.H|0,this.set(n,o,u,f,a,h,w,E)}roundClean(){gn(Lt)}destroy(){this.set(0,0,0,0,0,0,0,0),gn(this.buffer)}}class Mf extends ja{constructor(){super(28),this.A=Ht[0]|0,this.B=Ht[1]|0,this.C=Ht[2]|0,this.D=Ht[3]|0,this.E=Ht[4]|0,this.F=Ht[5]|0,this.G=Ht[6]|0,this.H=Ht[7]|0}}const za=Of(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),$f=za[0],qf=za[1],jt=new Uint32Array(80),zt=new Uint32Array(80);class Gf extends La{constructor(t=64){super(128,t,16,!1),this.Ah=Xe[0]|0,this.Al=Xe[1]|0,this.Bh=Xe[2]|0,this.Bl=Xe[3]|0,this.Ch=Xe[4]|0,this.Cl=Xe[5]|0,this.Dh=Xe[6]|0,this.Dl=Xe[7]|0,this.Eh=Xe[8]|0,this.El=Xe[9]|0,this.Fh=Xe[10]|0,this.Fl=Xe[11]|0,this.Gh=Xe[12]|0,this.Gl=Xe[13]|0,this.Hh=Xe[14]|0,this.Hl=Xe[15]|0}get(){const{Ah:t,Al:r,Bh:n,Bl:o,Ch:u,Cl:f,Dh:a,Dl:h,Eh:w,El:E,Fh:m,Fl:N,Gh:x,Gl:p,Hh:O,Hl:q}=this;return[t,r,n,o,u,f,a,h,w,E,m,N,x,p,O,q]}set(t,r,n,o,u,f,a,h,w,E,m,N,x,p,O,q){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=u|0,this.Cl=f|0,this.Dh=a|0,this.Dl=h|0,this.Eh=w|0,this.El=E|0,this.Fh=m|0,this.Fl=N|0,this.Gh=x|0,this.Gl=p|0,this.Hh=O|0,this.Hl=q|0}process(t,r){for(let V=0;V<16;V++,r+=4)jt[V]=t.getUint32(r),zt[V]=t.getUint32(r+=4);for(let V=16;V<80;V++){const te=jt[V-15]|0,I=zt[V-15]|0,W=Or(te,I,1)^Or(te,I,8)^To(te,I,7),J=Ir(te,I,1)^Ir(te,I,8)^Ao(te,I,7),F=jt[V-2]|0,P=zt[V-2]|0,G=Or(F,P,19)^kn(F,P,61)^To(F,P,6),X=Ir(F,P,19)^Pn(F,P,61)^Ao(F,P,6),re=Uf(J,X,zt[V-7],zt[V-16]),_=kf(re,W,G,jt[V-7],jt[V-16]);jt[V]=_|0,zt[V]=re|0}let{Ah:n,Al:o,Bh:u,Bl:f,Ch:a,Cl:h,Dh:w,Dl:E,Eh:m,El:N,Fh:x,Fl:p,Gh:O,Gl:q,Hh:K,Hl:D}=this;for(let V=0;V<80;V++){const te=Or(m,N,14)^Or(m,N,18)^kn(m,N,41),I=Ir(m,N,14)^Ir(m,N,18)^Pn(m,N,41),W=m&x^~m&O,J=N&p^~N&q,F=Pf(D,I,J,qf[V],zt[V]),P=Cf(F,K,te,W,$f[V],jt[V]),G=F|0,X=Or(n,o,28)^kn(n,o,34)^kn(n,o,39),re=Ir(n,o,28)^Pn(n,o,34)^Pn(n,o,39),_=n&u^n&a^u&a,R=o&f^o&h^f&h;K=O|0,D=q|0,O=x|0,q=p|0,x=m|0,p=N|0,{h:m,l:N}=Rt(w|0,E|0,P|0,G|0),w=a|0,E=h|0,a=u|0,h=f|0,u=n|0,f=o|0;const M=If(G,re,R);n=Ff(M,P,X,_),o=M|0}({h:n,l:o}=Rt(this.Ah|0,this.Al|0,n|0,o|0)),{h:u,l:f}=Rt(this.Bh|0,this.Bl|0,u|0,f|0),{h:a,l:h}=Rt(this.Ch|0,this.Cl|0,a|0,h|0),{h:w,l:E}=Rt(this.Dh|0,this.Dl|0,w|0,E|0),{h:m,l:N}=Rt(this.Eh|0,this.El|0,m|0,N|0),{h:x,l:p}=Rt(this.Fh|0,this.Fl|0,x|0,p|0),{h:O,l:q}=Rt(this.Gh|0,this.Gl|0,O|0,q|0),{h:K,l:D}=Rt(this.Hh|0,this.Hl|0,K|0,D|0),this.set(n,o,u,f,a,h,w,E,m,N,x,p,O,q,K,D)}roundClean(){gn(jt,zt)}destroy(){gn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ws=Ys(()=>new ja),Hf=Ys(()=>new Mf),Lf=Ys(()=>new Gf),jf=Ws,zf=Hf;function Kf(e){return zf.create().update(new Uint8Array(e)).digest()}const Cn="__principal__",Df=2,So=4,Yf="aaaaa-aa",Wf=e=>{var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))},Zf=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"");let Ee=class Hn{constructor(t){this._arr=t,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([So]))}static managementCanister(){return this.fromText(Yf)}static selfAuthenticating(t){const r=Kf(t);return new this(new Uint8Array([...r,Df]))}static from(t){if(typeof t=="string")return Hn.fromText(t);if(Object.getPrototypeOf(t)===Uint8Array.prototype)return new Hn(t);if(typeof t=="object"&&t!==null&&t._isPrincipal===!0)return new Hn(t._arr);throw new Error(`Impossible to convert ${JSON.stringify(t)} to Principal.`)}static fromHex(t){return new this(Wf(t))}static fromText(t){let r=t;if(t.includes(Cn)){const f=JSON.parse(t);Cn in f&&(r=f[Cn])}const n=r.toLowerCase().replace(/-/g,"");let o=wf(n);o=o.slice(4,o.length);const u=new this(o);if(u.toText()!==r)throw new Error(`Principal "${u.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return u}static fromUint8Array(t){return new this(t)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===So}toUint8Array(){return this._arr}toHex(){return Zf(this._arr).toUpperCase()}toText(){const t=new ArrayBuffer(4);new DataView(t).setUint32(0,xf(this._arr));const n=new Uint8Array(t),o=Uint8Array.from(this._arr),u=new Uint8Array([...n,...o]),a=_f(u).match(/.{1,5}/g);if(!a)throw new Error;return a.join("-")}toString(){return this.toText()}toJSON(){return{[Cn]:this.toText()}}compareTo(t){for(let r=0;r<Math.min(this._arr.length,t._arr.length);r++){if(this._arr[r]<t._arr[r])return"lt";if(this._arr[r]>t._arr[r])return"gt"}return this._arr.length<t._arr.length?"lt":this._arr.length>t._arr.length?"gt":"eq"}ltEq(t){const r=this.compareTo(t);return r=="lt"||r=="eq"}gtEq(t){const r=this.compareTo(t);return r=="gt"||r=="eq"}};function mt(...e){const t=new Uint8Array(e.reduce((n,o)=>n+o.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t.buffer}function Pe(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const Xf=new RegExp(/^[0-9a-fA-F]+$/);function $t(e){if(!Xf.test(e))throw new Error("Invalid hexadecimal string.");const t=[...e].reduce((r,n,o)=>(r[o/2|0]=(r[o/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(t).buffer}function Ka(e,t){if(e.byteLength!==t.byteLength)return e.byteLength-t.byteLength;const r=new Uint8Array(e),n=new Uint8Array(t);for(let o=0;o<r.length;o++)if(r[o]!==n[o])return r[o]-n[o];return 0}function An(e,t){return Ka(e,t)===0}function dn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function Ct(e){return e instanceof Uint8Array?dn(e):e instanceof ArrayBuffer?e:Array.isArray(e)?dn(new Uint8Array(e)):"buffer"in e?Ct(e.buffer):dn(new Uint8Array(e))}class Ce extends Error{constructor(t){super(t),this.message=t,this.name="AgentError",this.__proto__=Ce.prototype,Object.setPrototypeOf(this,Ce.prototype)}}function Fe(...e){const t=new Uint8Array(e.reduce((n,o)=>n+o.byteLength,0));let r=0;for(const n of e)t.set(new Uint8Array(n),r),r+=n.byteLength;return t}class Jr{constructor(t,r=(t==null?void 0:t.byteLength)||0){this._buffer=Er(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}save(){return this._view}restore(t){this._view=t}get buffer(){return Er(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+t);n.set(this._view),this._buffer=r,this._view=n}}function Ki(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function Er(e){return e instanceof Uint8Array?Ki(e):e instanceof ArrayBuffer?e:Array.isArray(e)?Ki(new Uint8Array(e)):"buffer"in e?Er(e.buffer):Ki(new Uint8Array(e))}function Jf(e){const r=new TextEncoder().encode(e);let n=0;for(const o of r)n=(n*223+o)%2**32;return n}function Tt(e){if(/^_\d+_$/.test(e)||/^_0x[0-9a-fA-F]+_$/.test(e)){const t=+e.slice(1,-1);if(Number.isSafeInteger(t)&&t>=0&&t<2**32)return t}return Jf(e)}function Da(){throw new Error("unexpected end of buffer")}function vr(e,t){return e.byteLength<t&&Da(),e.read(t)}function Nr(e){const t=e.readUint8();return t===void 0&&Da(),t}function Ve(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new Jr(new ArrayBuffer(t),0);for(;;){const n=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function ze(e){let t=BigInt(1),r=BigInt(0),n;do n=Nr(e),r+=BigInt(n&127).valueOf()*t,t*=BigInt(128);while(n>=128);return r}function Le(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,n=new Jr(new ArrayBuffer(r),0);for(;;){const u=o(e);if(e/=BigInt(128),t&&e===BigInt(0)&&(u&64)!==0||!t&&e===BigInt(0)&&(u&64)===0){n.write(new Uint8Array([u]));break}else n.write(new Uint8Array([u|128]))}function o(u){const f=u%BigInt(128);return Number(t?BigInt(128)-f-BigInt(1):f)}return n.buffer}function Wt(e){const t=new Uint8Array(e.buffer);let r=0;for(;r<t.byteLength;r++)if(t[r]<128){if((t[r]&64)===0)return ze(e);break}const n=new Uint8Array(vr(e,r+1));let o=BigInt(0);for(let u=n.byteLength-1;u>=0;u--)o=o*BigInt(128)+BigInt(128-(n[u]&127)-1);return-o-BigInt(1)}function Qf(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return Ya(e,t)}function Ya(e,t){e=BigInt(e);const r=new Jr(new ArrayBuffer(Math.min(1,t)),0);let n=0,o=BigInt(256),u=BigInt(0),f=Number(e%o);for(r.write(new Uint8Array([f]));++n<t;)e<0&&u===BigInt(0)&&f!==0&&(u=BigInt(1)),f=Number((e/o-u)%BigInt(256)),r.write(new Uint8Array([f])),o*=BigInt(256);return r.buffer}function Wa(e,t){let r=BigInt(Nr(e)),n=BigInt(1),o=0;for(;++o<t;){n*=BigInt(256);const u=BigInt(Nr(e));r=r+n*u}return r}function el(e,t){let r=Wa(e,t);const n=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function Rs(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}const Ln="DIDL",Ro=400;function mn(e,t,r){return e.map((n,o)=>r(n,t[o]))}class tl{constructor(){this._typs=[],this._idx=new Map}has(t){return this._idx.has(t.name)}add(t,r){const n=this._typs.length;this._idx.set(t.name,n),this._typs.push(r)}merge(t,r){const n=this._idx.get(t.name),o=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+t);if(o===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[o],this._typs.splice(o,1),this._idx.delete(r)}encode(){const t=Ve(this._typs.length),r=Fe(...this._typs);return Fe(t,r)}indexOf(t){if(!this._idx.has(t))throw new Error("Missing type index for "+t);return Le(this._idx.get(t)||0)}}class rl{visitType(t,r){throw new Error("Not implemented")}visitPrimitive(t,r){return this.visitType(t,r)}visitEmpty(t,r){return this.visitPrimitive(t,r)}visitBool(t,r){return this.visitPrimitive(t,r)}visitNull(t,r){return this.visitPrimitive(t,r)}visitReserved(t,r){return this.visitPrimitive(t,r)}visitText(t,r){return this.visitPrimitive(t,r)}visitNumber(t,r){return this.visitPrimitive(t,r)}visitInt(t,r){return this.visitNumber(t,r)}visitNat(t,r){return this.visitNumber(t,r)}visitFloat(t,r){return this.visitPrimitive(t,r)}visitFixedInt(t,r){return this.visitNumber(t,r)}visitFixedNat(t,r){return this.visitNumber(t,r)}visitPrincipal(t,r){return this.visitPrimitive(t,r)}visitConstruct(t,r){return this.visitType(t,r)}visitVec(t,r,n){return this.visitConstruct(t,n)}visitOpt(t,r,n){return this.visitConstruct(t,n)}visitRecord(t,r,n){return this.visitConstruct(t,n)}visitTuple(t,r,n){const o=r.map((u,f)=>[`_${f}_`,u]);return this.visitRecord(t,o,n)}visitVariant(t,r,n){return this.visitConstruct(t,n)}visitRec(t,r,n){return this.visitConstruct(r,n)}visitFunc(t,r){return this.visitConstruct(t,r)}visitService(t,r){return this.visitConstruct(t,r)}}class Ti{display(){return this.name}valueToString(t){return $e(t)}buildTypeTable(t){t.has(this)||this._buildTypeTableImpl(t)}}class ht extends Ti{checkType(t){if(this.name!==t.name)throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`);return t}_buildTypeTableImpl(t){}}class ir extends Ti{checkType(t){if(t instanceof qt){const r=t.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`)}encodeType(t){return t.indexOf(this.name)}}class Za extends ht{accept(t,r){return t.visitEmpty(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return Le(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class Xa extends Ti{checkType(t){throw new Error("Method not implemented for unknown.")}accept(t,r){throw t.visitType(this,r)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(t,r){let n=r.decodeValue(t,r);Object(n)!==n&&(n=Object(n));let o;return r instanceof qt?o=()=>r.getType():o=()=>r,Object.defineProperty(n,"type",{value:o,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Ja extends ht{accept(t,r){return t.visitBool(this,r)}covariant(t){if(typeof t=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){return new Uint8Array([t?1:0])}encodeType(){return Le(-2)}decodeValue(t,r){switch(this.checkType(r),Nr(t)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class hi extends ht{accept(t,r){return t.visitNull(this,r)}covariant(t){if(t===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Le(-1)}decodeValue(t,r){return this.checkType(r),null}get name(){return"null"}}class Wr extends ht{accept(t,r){return t.visitReserved(this,r)}covariant(t){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Le(-16)}decodeValue(t,r){return r.name!==this.name&&r.decodeValue(t,r),null}get name(){return"reserved"}}class Qa extends ht{accept(t,r){return t.visitText(this,r)}covariant(t){if(typeof t=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){const r=new TextEncoder().encode(t),n=Ve(r.byteLength);return Fe(n,r)}encodeType(){return Le(-15)}decodeValue(t,r){this.checkType(r);const n=ze(t),o=vr(t,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(o)}get name(){return"text"}valueToString(t){return'"'+t+'"'}}class ec extends ht{accept(t,r){return t.visitInt(this,r)}covariant(t){if(typeof t=="bigint"||Number.isInteger(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){return Le(t)}encodeType(){return Le(-4)}decodeValue(t,r){return this.checkType(r),Wt(t)}get name(){return"int"}valueToString(t){return t.toString()}}class tc extends ht{accept(t,r){return t.visitNat(this,r)}covariant(t){if(typeof t=="bigint"&&t>=BigInt(0)||Number.isInteger(t)&&t>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){return Ve(t)}encodeType(){return Le(-3)}decodeValue(t,r){return this.checkType(r),ze(t)}get name(){return"nat"}valueToString(t){return t.toString()}}class Zs extends ht{constructor(t){if(super(),this._bits=t,t!==32&&t!==64)throw new Error("not a valid float type")}accept(t,r){return t.visitFloat(this,r)}covariant(t){if(typeof t=="number"||t instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,t,!0):n.setFloat64(0,t,!0),r}encodeType(){const t=this._bits===32?-13:-14;return Le(t)}decodeValue(t,r){this.checkType(r);const n=vr(t,this._bits/8),o=new DataView(n);return this._bits===32?o.getFloat32(0,!0):o.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(t){return t.toString()}}class Br extends ht{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedInt(this,r)}covariant(t){const r=Rs(this._bits-1)*BigInt(-1),n=Rs(this._bits-1)-BigInt(1);let o=!1;if(typeof t=="bigint")o=t>=r&&t<=n;else if(Number.isInteger(t)){const u=BigInt(t);o=u>=r&&u<=n}else o=!1;if(o)return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){return Ya(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return Le(-9-t)}decodeValue(t,r){this.checkType(r);const n=el(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(t){return t.toString()}}class rr extends ht{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedNat(this,r)}covariant(t){const r=Rs(this._bits);let n=!1;if(typeof t=="bigint"&&t>=BigInt(0)?n=t<r:Number.isInteger(t)&&t>=0?n=BigInt(t)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){return Qf(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return Le(-5-t)}decodeValue(t,r){this.checkType(r);const n=Wa(t,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(t){return t.toString()}}class Ai extends ir{constructor(t){super(),this._type=t,this._blobOptimization=!1,t instanceof rr&&t._bits===8&&(this._blobOptimization=!0)}accept(t,r){return t.visitVec(this,this._type,r)}covariant(t){const r=this._type instanceof rr?this._type._bits:this._type instanceof Br?this._type._bits:0;if(ArrayBuffer.isView(t)&&r==t.BYTES_PER_ELEMENT*8||Array.isArray(t)&&t.every((n,o)=>{try{return this._type.covariant(n)}catch(u){throw new Error(`Invalid ${this.display()} argument: 

index ${o} -> ${u.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){const r=Ve(t.length);if(this._blobOptimization)return Fe(r,new Uint8Array(t));if(ArrayBuffer.isView(t))return Fe(r,new Uint8Array(t.buffer));const n=new Jr(new ArrayBuffer(r.byteLength+t.length),0);n.write(r);for(const o of t){const u=this._type.encodeValue(o);n.write(new Uint8Array(u))}return n.buffer}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=Le(-19),n=this._type.encodeType(t);t.add(this,Fe(r,n))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Ai))throw new Error("Not a vector type");const o=Number(ze(t));if(this._type instanceof rr){if(this._type._bits==8)return new Uint8Array(t.read(o));if(this._type._bits==16)return new Uint16Array(t.read(o*2));if(this._type._bits==32)return new Uint32Array(t.read(o*4));if(this._type._bits==64)return new BigUint64Array(t.read(o*8))}if(this._type instanceof Br){if(this._type._bits==8)return new Int8Array(t.read(o));if(this._type._bits==16)return new Int16Array(t.read(o*2));if(this._type._bits==32)return new Int32Array(t.read(o*4));if(this._type._bits==64)return new BigInt64Array(t.read(o*8))}const u=[];for(let f=0;f<o;f++)u.push(this._type.decodeValue(t,n._type));return u}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(t){return"vec {"+t.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Tr extends ir{constructor(t){super(),this._type=t}accept(t,r){return t.visitOpt(this,this._type,r)}covariant(t){try{if(Array.isArray(t)&&(t.length===0||t.length===1&&this._type.covariant(t[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${$e(t)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){return t.length===0?new Uint8Array([0]):Fe(new Uint8Array([1]),this._type.encodeValue(t[0]))}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const r=Le(-18),n=this._type.encodeType(t);t.add(this,Fe(r,n))}decodeValue(t,r){if(r instanceof hi)return[];if(r instanceof Wr)return[];let n=r;if(r instanceof qt){const o=r.getType();if(typeof o>"u")throw new Error("type mismatch with uninitialized type");n=o}if(n instanceof Tr)switch(Nr(t)){case 0:return[];case 1:{const o=t.save();try{return[this._type.decodeValue(t,n._type)]}catch{return t.restore(o),n._type.decodeValue(t,n._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof hi||this._type instanceof Tr||this._type instanceof Wr)return n.decodeValue(t,n),[];{const o=t.save();try{return[this._type.decodeValue(t,r)]}catch{return t.restore(o),n.decodeValue(t,r),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(t){return t.length===0?"null":`opt ${this._type.valueToString(t[0])}`}}class Sn extends ir{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Tt(r[0])-Tt(n[0]))}accept(t,r){return t.visitRecord(this,this._fields,r)}tryAsTuple(){const t=[];for(let r=0;r<this._fields.length;r++){const[n,o]=this._fields[r];if(n!==`_${r}_`)return null;t.push(o)}return t}covariant(t){if(typeof t=="object"&&this._fields.every(([r,n])=>{if(!t.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(t[r])}catch(o){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${o.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){const r=this._fields.map(([o])=>t[o]),n=mn(this._fields,r,([,o],u)=>o.encodeValue(u));return Fe(...n)}_buildTypeTableImpl(t){this._fields.forEach(([u,f])=>f.buildTypeTable(t));const r=Le(-20),n=Ve(this._fields.length),o=this._fields.map(([u,f])=>Fe(Ve(Tt(u)),f.encodeType(t)));t.add(this,Fe(r,n,Fe(...o)))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Sn))throw new Error("Not a record type");const o={};let u=0,f=0;for(;f<n._fields.length;){const[a,h]=n._fields[f];if(u>=this._fields.length){h.decodeValue(t,h),f++;continue}const[w,E]=this._fields[u],m=Tt(this._fields[u][0]),N=Tt(a);if(m===N)o[w]=E.decodeValue(t,h),u++,f++;else if(N>m)if(E instanceof Tr||E instanceof Wr)o[w]=[],u++;else throw new Error("Cannot find required field "+w);else h.decodeValue(t,h),f++}for(const[a,h]of this._fields.slice(u))if(h instanceof Tr||h instanceof Wr)o[a]=[];else throw new Error("Cannot find required field "+a);return o}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(t){const r=this._fields.map(([o])=>t[o]);return`record {${mn(this._fields,r,([o,u],f)=>o+"="+u.valueToString(f)).join("; ")}}`}}class Si extends Sn{constructor(t){const r={};t.forEach((n,o)=>r["_"+o+"_"]=n),super(r),this._components=t}accept(t,r){return t.visitTuple(this,this._components,r)}covariant(t){if(Array.isArray(t)&&t.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(t[n])}catch(o){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${o.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){const r=mn(this._components,t,(n,o)=>n.encodeValue(o));return Fe(...r)}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Si))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const o=[];for(const[u,f]of n._components.entries())u>=this._components.length?f.decodeValue(t,f):o.push(this._components[u].decodeValue(t,f));return o}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(t){return`record {${mn(this._components,t,(n,o)=>n.valueToString(o)).join("; ")}}`}}class Ri extends ir{constructor(t={}){super(),this._fields=Object.entries(t).sort((r,n)=>Tt(r[0])-Tt(n[0]))}accept(t,r){return t.visitVariant(this,this._fields,r)}covariant(t){if(typeof t=="object"&&Object.entries(t).length===1&&this._fields.every(([r,n])=>{try{return!t.hasOwnProperty(r)||n.covariant(t[r])}catch(o){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${o.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){for(let r=0;r<this._fields.length;r++){const[n,o]=this._fields[r];if(t.hasOwnProperty(n)){const u=Ve(r),f=o.encodeValue(t[n]);return Fe(u,f)}}throw Error("Variant has no data: "+t)}_buildTypeTableImpl(t){this._fields.forEach(([,u])=>{u.buildTypeTable(t)});const r=Le(-21),n=Ve(this._fields.length),o=this._fields.map(([u,f])=>Fe(Ve(Tt(u)),f.encodeType(t)));t.add(this,Fe(r,n,...o))}decodeValue(t,r){const n=this.checkType(r);if(!(n instanceof Ri))throw new Error("Not a variant type");const o=Number(ze(t));if(o>=n._fields.length)throw Error("Invalid variant index: "+o);const[u,f]=n._fields[o];for(const[a,h]of this._fields)if(Tt(u)===Tt(a)){const w=h.decodeValue(t,f);return{[a]:w}}throw new Error("Cannot find field hash "+u)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(t){for(const[r,n]of this._fields)if(t.hasOwnProperty(r)){const o=n.valueToString(t[r]);return o==="null"?`variant {${r}}`:`variant {${r}=${o}}`}throw new Error("Variant has no data: "+t)}}class qt extends ir{constructor(){super(...arguments),this._id=qt._counter++,this._type=void 0}accept(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return t.visitRec(this,this._type,r)}fill(t){this._type=t}getType(){return this._type}covariant(t){if(this._type&&this._type.covariant(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(t)}_buildTypeTableImpl(t){if(!this._type)throw Error("Recursive type uninitialized.");t.add(this,new Uint8Array([])),this._type.buildTypeTable(t),t.merge(this,this._type.name)}decodeValue(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(t,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(t)}}qt._counter=0;function Xs(e){if(Nr(e)!==1)throw new Error("Cannot decode principal");const r=Number(ze(e));return Ee.fromUint8Array(new Uint8Array(vr(e,r)))}class rc extends ht{accept(t,r){return t.visitPrincipal(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Ve(r.byteLength);return Fe(new Uint8Array([1]),n,r)}encodeType(){return Le(-24)}decodeValue(t,r){return this.checkType(r),Xs(t)}get name(){return"principal"}valueToString(t){return`${this.name} "${t.toText()}"`}}class Js extends ir{constructor(t,r,n=[]){super(),this.argTypes=t,this.retTypes=r,this.annotations=n}static argsToString(t,r){if(t.length!==r.length)throw new Error("arity mismatch");return"("+t.map((n,o)=>n.valueToString(r[o])).join(", ")+")"}accept(t,r){return t.visitFunc(this,r)}covariant(t){if(Array.isArray(t)&&t.length===2&&t[0]&&t[0]._isPrincipal&&typeof t[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue([t,r]){const n=t.toUint8Array(),o=Ve(n.byteLength),u=Fe(new Uint8Array([1]),o,n),f=new TextEncoder().encode(r),a=Ve(f.byteLength);return Fe(new Uint8Array([1]),u,a,f)}_buildTypeTableImpl(t){this.argTypes.forEach(w=>w.buildTypeTable(t)),this.retTypes.forEach(w=>w.buildTypeTable(t));const r=Le(-22),n=Ve(this.argTypes.length),o=Fe(...this.argTypes.map(w=>w.encodeType(t))),u=Ve(this.retTypes.length),f=Fe(...this.retTypes.map(w=>w.encodeType(t))),a=Ve(this.annotations.length),h=Fe(...this.annotations.map(w=>this.encodeAnnotation(w)));t.add(this,Fe(r,n,o,u,f,a,h))}decodeValue(t){if(Nr(t)!==1)throw new Error("Cannot decode function reference");const n=Xs(t),o=Number(ze(t)),u=vr(t,o),a=new TextDecoder("utf8",{fatal:!0}).decode(u);return[n,a]}get name(){const t=this.argTypes.map(o=>o.name).join(", "),r=this.retTypes.map(o=>o.name).join(", "),n=" "+this.annotations.join(" ");return`(${t}) -> (${r})${n}`}valueToString([t,r]){return`func "${t.toText()}".${r}`}display(){const t=this.argTypes.map(o=>o.display()).join(", "),r=this.retTypes.map(o=>o.display()).join(", "),n=" "+this.annotations.join(" ");return`(${t}) → (${r})${n}`}encodeAnnotation(t){if(t==="query")return new Uint8Array([1]);if(t==="oneway")return new Uint8Array([2]);if(t==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class nc extends ir{constructor(t){super(),this._fields=Object.entries(t).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(t,r){return t.visitService(this,r)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${$e(t)}`)}encodeValue(t){const r=t.toUint8Array(),n=Ve(r.length);return Fe(new Uint8Array([1]),n,r)}_buildTypeTableImpl(t){this._fields.forEach(([u,f])=>f.buildTypeTable(t));const r=Le(-23),n=Ve(this._fields.length),o=this._fields.map(([u,f])=>{const a=new TextEncoder().encode(u),h=Ve(a.length);return Fe(h,a,f.encodeType(t))});t.add(this,Fe(r,n,...o))}decodeValue(t){return Xs(t)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(t){return`service "${t.toText()}"`}}function $e(e){const t=JSON.stringify(e,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return t&&t.length>Ro?t.substring(0,Ro-3)+"...":t}function Os(e,t){if(t.length<e.length)throw Error("Wrong number of message arguments");const r=new tl;e.forEach(h=>h.buildTypeTable(r));const n=new TextEncoder().encode(Ln),o=r.encode(),u=Ve(t.length),f=Fe(...e.map(h=>h.encodeType(r))),a=Fe(...mn(e,t,(h,w)=>{try{h.covariant(w)}catch(E){throw new Error(E.message+`

`)}return h.encodeValue(w)}));return Fe(n,o,u,f,a)}function ic(e,t){const r=new Jr(t);if(t.byteLength<Ln.length)throw new Error("Message length smaller than magic number");const n=vr(r,Ln.length),o=new TextDecoder().decode(n);if(o!==Ln)throw new Error("Wrong magic number: "+JSON.stringify(o));function u(x){const p=[],O=Number(ze(x));for(let D=0;D<O;D++){const V=Number(Wt(x));switch(V){case-18:case-19:{const te=Number(Wt(x));p.push([V,te]);break}case-20:case-21:{const te=[];let I=Number(ze(x)),W;for(;I--;){const J=Number(ze(x));if(J>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof W=="number"&&W>=J)throw new Error("field id collision or not sorted");W=J;const F=Number(Wt(x));te.push([J,F])}p.push([V,te]);break}case-22:{const te=[];let I=Number(ze(x));for(;I--;)te.push(Number(Wt(x)));const W=[];let J=Number(ze(x));for(;J--;)W.push(Number(Wt(x)));const F=[];let P=Number(ze(x));for(;P--;)switch(Number(ze(x))){case 1:{F.push("query");break}case 2:{F.push("oneway");break}case 3:{F.push("composite_query");break}default:throw new Error("unknown annotation")}p.push([V,[te,W,F]]);break}case-23:{let te=Number(ze(x));const I=[];for(;te--;){const W=Number(ze(x)),J=new TextDecoder().decode(vr(x,W)),F=Wt(x);I.push([J,F])}p.push([V,I]);break}default:throw new Error("Illegal op_code: "+V)}}const q=[],K=Number(ze(x));for(let D=0;D<K;D++)q.push(Number(Wt(x)));return[p,q]}const[f,a]=u(r);if(a.length<e.length)throw new Error("Wrong number of return values");const h=f.map(x=>Sc());function w(x){if(x<-24)throw new Error("future value not supported");if(x<0)switch(x){case-1:return cc;case-2:return ac;case-3:return lc;case-4:return fc;case-5:return _c;case-6:return wc;case-7:return bc;case-8:return xc;case-9:return pc;case-10:return yc;case-11:return gc;case-12:return mc;case-13:return dc;case-14:return hc;case-15:return uc;case-16:return oc;case-17:return sc;case-24:return Ec;default:throw new Error("Illegal op_code: "+x)}if(x>=f.length)throw new Error("type index out of range");return h[x]}function E(x){switch(x[0]){case-19:{const p=w(x[1]);return Nc(p)}case-18:{const p=w(x[1]);return Bc(p)}case-20:{const p={};for(const[K,D]of x[1]){const V=`_${K}_`;p[V]=w(D)}const O=Tc(p),q=O.tryAsTuple();return Array.isArray(q)?vc(...q):O}case-21:{const p={};for(const[O,q]of x[1]){const K=`_${O}_`;p[K]=w(q)}return Ac(p)}case-22:{const[p,O,q]=x[1];return Rc(p.map(K=>w(K)),O.map(K=>w(K)),q)}case-23:{const p={},O=x[1];for(const[q,K]of O){let D=w(K);if(D instanceof qt&&(D=D.getType()),!(D instanceof Js))throw new Error("Illegal service definition: services can only contain functions");p[q]=D}return Oc(p)}default:throw new Error("Illegal op_code: "+x[0])}}f.forEach((x,p)=>{if(x[0]===-22){const O=E(x);h[p].fill(O)}}),f.forEach((x,p)=>{if(x[0]!==-22){const O=E(x);h[p].fill(O)}});const m=a.map(x=>w(x)),N=e.map((x,p)=>x.decodeValue(r,m[p]));for(let x=e.length;x<m.length;x++)m[x].decodeValue(r,m[x]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return N}const sc=new Za,oc=new Wr,nl=new Xa,ac=new Ja,cc=new hi,uc=new Qa,fc=new ec,lc=new tc,dc=new Zs(32),hc=new Zs(64),pc=new Br(8),yc=new Br(16),gc=new Br(32),mc=new Br(64),_c=new rr(8),wc=new rr(16),bc=new rr(32),xc=new rr(64),Ec=new rc;function vc(...e){return new Si(e)}function Nc(e){return new Ai(e)}function Bc(e){return new Tr(e)}function Tc(e){return new Sn(e)}function Ac(e){return new Ri(e)}function Sc(){return new qt}function Rc(e,t,r=[]){return new Js(e,t,r)}function Oc(e){return new nc(e)}const il=Object.freeze(Object.defineProperty({__proto__:null,Bool:ac,BoolClass:Ja,ConstructType:ir,Empty:sc,EmptyClass:Za,FixedIntClass:Br,FixedNatClass:rr,Float32:dc,Float64:hc,FloatClass:Zs,Func:Rc,FuncClass:Js,Int:fc,Int16:yc,Int32:gc,Int64:mc,Int8:pc,IntClass:ec,Nat:lc,Nat16:wc,Nat32:bc,Nat64:xc,Nat8:_c,NatClass:tc,Null:cc,NullClass:hi,Opt:Bc,OptClass:Tr,PrimitiveType:ht,Principal:Ec,PrincipalClass:rc,Rec:Sc,RecClass:qt,Record:Tc,RecordClass:Sn,Reserved:oc,ReservedClass:Wr,Service:Oc,ServiceClass:nc,Text:uc,TextClass:Qa,Tuple:vc,TupleClass:Si,Type:Ti,Unknown:nl,UnknownClass:Xa,Variant:Ac,VariantClass:Ri,Vec:Nc,VecClass:Ai,Visitor:rl,decode:ic,encode:Os},Symbol.toStringTag,{value:"Module"}));var Di={},Yi={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Oo;function Oi(){return Oo||(Oo=1,function(e){var t=Ma(),r=Ks(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=D,e.INSPECT_MAX_BYTES=50;var o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var g=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(g,l),g.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function f(g){if(g>o)throw new RangeError('The value "'+g+'" is invalid for option "size"');var l=new Uint8Array(g);return Object.setPrototypeOf(l,a.prototype),l}function a(g,l,d){if(typeof g=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(g)}return h(g,l,d)}a.poolSize=8192;function h(g,l,d){if(typeof g=="string")return N(g,l);if(ArrayBuffer.isView(g))return p(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(L(g,ArrayBuffer)||g&&L(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(L(g,SharedArrayBuffer)||g&&L(g.buffer,SharedArrayBuffer)))return O(g,l,d);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var b=g.valueOf&&g.valueOf();if(b!=null&&b!==g)return a.from(b,l,d);var T=q(g);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return a.from(g[Symbol.toPrimitive]("string"),l,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}a.from=function(g,l,d){return h(g,l,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function w(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function E(g,l,d){return w(g),g<=0?f(g):l!==void 0?typeof d=="string"?f(g).fill(l,d):f(g).fill(l):f(g)}a.alloc=function(g,l,d){return E(g,l,d)};function m(g){return w(g),f(g<0?0:K(g)|0)}a.allocUnsafe=function(g){return m(g)},a.allocUnsafeSlow=function(g){return m(g)};function N(g,l){if((typeof l!="string"||l==="")&&(l="utf8"),!a.isEncoding(l))throw new TypeError("Unknown encoding: "+l);var d=V(g,l)|0,b=f(d),T=b.write(g,l);return T!==d&&(b=b.slice(0,T)),b}function x(g){for(var l=g.length<0?0:K(g.length)|0,d=f(l),b=0;b<l;b+=1)d[b]=g[b]&255;return d}function p(g){if(L(g,Uint8Array)){var l=new Uint8Array(g);return O(l.buffer,l.byteOffset,l.byteLength)}return x(g)}function O(g,l,d){if(l<0||g.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<l+(d||0))throw new RangeError('"length" is outside of buffer bounds');var b;return l===void 0&&d===void 0?b=new Uint8Array(g):d===void 0?b=new Uint8Array(g,l):b=new Uint8Array(g,l,d),Object.setPrototypeOf(b,a.prototype),b}function q(g){if(a.isBuffer(g)){var l=K(g.length)|0,d=f(l);return d.length===0||g.copy(d,0,0,l),d}if(g.length!==void 0)return typeof g.length!="number"||H(g.length)?f(0):x(g);if(g.type==="Buffer"&&Array.isArray(g.data))return x(g.data)}function K(g){if(g>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return g|0}function D(g){return+g!=g&&(g=0),a.alloc(+g)}a.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==a.prototype},a.compare=function(l,d){if(L(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),L(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(l)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===d)return 0;for(var b=l.length,T=d.length,C=0,Z=Math.min(b,T);C<Z;++C)if(l[C]!==d[C]){b=l[C],T=d[C];break}return b<T?-1:T<b?1:0},a.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(l,d){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return a.alloc(0);var b;if(d===void 0)for(d=0,b=0;b<l.length;++b)d+=l[b].length;var T=a.allocUnsafe(d),C=0;for(b=0;b<l.length;++b){var Z=l[b];if(L(Z,Uint8Array))C+Z.length>T.length?a.from(Z).copy(T,C):Uint8Array.prototype.set.call(T,Z,C);else if(a.isBuffer(Z))Z.copy(T,C);else throw new TypeError('"list" argument must be an Array of Buffers');C+=Z.length}return T};function V(g,l){if(a.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||L(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var d=g.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&d===0)return 0;for(var T=!1;;)switch(l){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return Q(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return A(g).length;default:if(T)return b?-1:Q(g).length;l=(""+l).toLowerCase(),T=!0}}a.byteLength=V;function te(g,l,d){var b=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,l>>>=0,d<=l))return"";for(g||(g="utf8");;)switch(g){case"hex":return le(this,l,d);case"utf8":case"utf-8":return R(this,l,d);case"ascii":return ee(this,l,d);case"latin1":case"binary":return ne(this,l,d);case"base64":return _(this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,l,d);default:if(b)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),b=!0}}a.prototype._isBuffer=!0;function I(g,l,d){var b=g[l];g[l]=g[d],g[d]=b}a.prototype.swap16=function(){var l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<l;d+=2)I(this,d,d+1);return this},a.prototype.swap32=function(){var l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<l;d+=4)I(this,d,d+3),I(this,d+1,d+2);return this},a.prototype.swap64=function(){var l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<l;d+=8)I(this,d,d+7),I(this,d+1,d+6),I(this,d+2,d+5),I(this,d+3,d+4);return this},a.prototype.toString=function(){var l=this.length;return l===0?"":arguments.length===0?R(this,0,l):te.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(l){if(!a.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:a.compare(this,l)===0},a.prototype.inspect=function(){var l="",d=e.INSPECT_MAX_BYTES;return l=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(l+=" ... "),"<Buffer "+l+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(l,d,b,T,C){if(L(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(d===void 0&&(d=0),b===void 0&&(b=l?l.length:0),T===void 0&&(T=0),C===void 0&&(C=this.length),d<0||b>l.length||T<0||C>this.length)throw new RangeError("out of range index");if(T>=C&&d>=b)return 0;if(T>=C)return-1;if(d>=b)return 1;if(d>>>=0,b>>>=0,T>>>=0,C>>>=0,this===l)return 0;for(var Z=C-T,oe=b-d,ye=Math.min(Z,oe),he=this.slice(T,C),ve=l.slice(d,b),s=0;s<ye;++s)if(he[s]!==ve[s]){Z=he[s],oe=ve[s];break}return Z<oe?-1:oe<Z?1:0};function W(g,l,d,b,T){if(g.length===0)return-1;if(typeof d=="string"?(b=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,H(d)&&(d=T?0:g.length-1),d<0&&(d=g.length+d),d>=g.length){if(T)return-1;d=g.length-1}else if(d<0)if(T)d=0;else return-1;if(typeof l=="string"&&(l=a.from(l,b)),a.isBuffer(l))return l.length===0?-1:J(g,l,d,b,T);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(g,l,d):Uint8Array.prototype.lastIndexOf.call(g,l,d):J(g,[l],d,b,T);throw new TypeError("val must be string, number or Buffer")}function J(g,l,d,b,T){var C=1,Z=g.length,oe=l.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(g.length<2||l.length<2)return-1;C=2,Z/=2,oe/=2,d/=2}function ye(c,y){return C===1?c[y]:c.readUInt16BE(y*C)}var he;if(T){var ve=-1;for(he=d;he<Z;he++)if(ye(g,he)===ye(l,ve===-1?0:he-ve)){if(ve===-1&&(ve=he),he-ve+1===oe)return ve*C}else ve!==-1&&(he-=he-ve),ve=-1}else for(d+oe>Z&&(d=Z-oe),he=d;he>=0;he--){for(var s=!0,i=0;i<oe;i++)if(ye(g,he+i)!==ye(l,i)){s=!1;break}if(s)return he}return-1}a.prototype.includes=function(l,d,b){return this.indexOf(l,d,b)!==-1},a.prototype.indexOf=function(l,d,b){return W(this,l,d,b,!0)},a.prototype.lastIndexOf=function(l,d,b){return W(this,l,d,b,!1)};function F(g,l,d,b){d=Number(d)||0;var T=g.length-d;b?(b=Number(b),b>T&&(b=T)):b=T;var C=l.length;b>C/2&&(b=C/2);for(var Z=0;Z<b;++Z){var oe=parseInt(l.substr(Z*2,2),16);if(H(oe))return Z;g[d+Z]=oe}return Z}function P(g,l,d,b){return k(Q(l,g.length-d),g,d,b)}function G(g,l,d,b){return k(se(l),g,d,b)}function X(g,l,d,b){return k(A(l),g,d,b)}function re(g,l,d,b){return k(B(l,g.length-d),g,d,b)}a.prototype.write=function(l,d,b,T){if(d===void 0)T="utf8",b=this.length,d=0;else if(b===void 0&&typeof d=="string")T=d,b=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(b)?(b=b>>>0,T===void 0&&(T="utf8")):(T=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var C=this.length-d;if((b===void 0||b>C)&&(b=C),l.length>0&&(b<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");for(var Z=!1;;)switch(T){case"hex":return F(this,l,d,b);case"utf8":case"utf-8":return P(this,l,d,b);case"ascii":case"latin1":case"binary":return G(this,l,d,b);case"base64":return X(this,l,d,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,l,d,b);default:if(Z)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),Z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(g,l,d){return l===0&&d===g.length?t.fromByteArray(g):t.fromByteArray(g.slice(l,d))}function R(g,l,d){d=Math.min(g.length,d);for(var b=[],T=l;T<d;){var C=g[T],Z=null,oe=C>239?4:C>223?3:C>191?2:1;if(T+oe<=d){var ye,he,ve,s;switch(oe){case 1:C<128&&(Z=C);break;case 2:ye=g[T+1],(ye&192)===128&&(s=(C&31)<<6|ye&63,s>127&&(Z=s));break;case 3:ye=g[T+1],he=g[T+2],(ye&192)===128&&(he&192)===128&&(s=(C&15)<<12|(ye&63)<<6|he&63,s>2047&&(s<55296||s>57343)&&(Z=s));break;case 4:ye=g[T+1],he=g[T+2],ve=g[T+3],(ye&192)===128&&(he&192)===128&&(ve&192)===128&&(s=(C&15)<<18|(ye&63)<<12|(he&63)<<6|ve&63,s>65535&&s<1114112&&(Z=s))}}Z===null?(Z=65533,oe=1):Z>65535&&(Z-=65536,b.push(Z>>>10&1023|55296),Z=56320|Z&1023),b.push(Z),T+=oe}return Y(b)}var M=4096;function Y(g){var l=g.length;if(l<=M)return String.fromCharCode.apply(String,g);for(var d="",b=0;b<l;)d+=String.fromCharCode.apply(String,g.slice(b,b+=M));return d}function ee(g,l,d){var b="";d=Math.min(g.length,d);for(var T=l;T<d;++T)b+=String.fromCharCode(g[T]&127);return b}function ne(g,l,d){var b="";d=Math.min(g.length,d);for(var T=l;T<d;++T)b+=String.fromCharCode(g[T]);return b}function le(g,l,d){var b=g.length;(!l||l<0)&&(l=0),(!d||d<0||d>b)&&(d=b);for(var T="",C=l;C<d;++C)T+=j[g[C]];return T}function ge(g,l,d){for(var b=g.slice(l,d),T="",C=0;C<b.length-1;C+=2)T+=String.fromCharCode(b[C]+b[C+1]*256);return T}a.prototype.slice=function(l,d){var b=this.length;l=~~l,d=d===void 0?b:~~d,l<0?(l+=b,l<0&&(l=0)):l>b&&(l=b),d<0?(d+=b,d<0&&(d=0)):d>b&&(d=b),d<l&&(d=l);var T=this.subarray(l,d);return Object.setPrototypeOf(T,a.prototype),T};function ie(g,l,d){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+l>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(l,d,b){l=l>>>0,d=d>>>0,b||ie(l,d,this.length);for(var T=this[l],C=1,Z=0;++Z<d&&(C*=256);)T+=this[l+Z]*C;return T},a.prototype.readUintBE=a.prototype.readUIntBE=function(l,d,b){l=l>>>0,d=d>>>0,b||ie(l,d,this.length);for(var T=this[l+--d],C=1;d>0&&(C*=256);)T+=this[l+--d]*C;return T},a.prototype.readUint8=a.prototype.readUInt8=function(l,d){return l=l>>>0,d||ie(l,1,this.length),this[l]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(l,d){return l=l>>>0,d||ie(l,2,this.length),this[l]|this[l+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(l,d){return l=l>>>0,d||ie(l,2,this.length),this[l]<<8|this[l+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(l,d){return l=l>>>0,d||ie(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(l,d){return l=l>>>0,d||ie(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},a.prototype.readIntLE=function(l,d,b){l=l>>>0,d=d>>>0,b||ie(l,d,this.length);for(var T=this[l],C=1,Z=0;++Z<d&&(C*=256);)T+=this[l+Z]*C;return C*=128,T>=C&&(T-=Math.pow(2,8*d)),T},a.prototype.readIntBE=function(l,d,b){l=l>>>0,d=d>>>0,b||ie(l,d,this.length);for(var T=d,C=1,Z=this[l+--T];T>0&&(C*=256);)Z+=this[l+--T]*C;return C*=128,Z>=C&&(Z-=Math.pow(2,8*d)),Z},a.prototype.readInt8=function(l,d){return l=l>>>0,d||ie(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},a.prototype.readInt16LE=function(l,d){l=l>>>0,d||ie(l,2,this.length);var b=this[l]|this[l+1]<<8;return b&32768?b|4294901760:b},a.prototype.readInt16BE=function(l,d){l=l>>>0,d||ie(l,2,this.length);var b=this[l+1]|this[l]<<8;return b&32768?b|4294901760:b},a.prototype.readInt32LE=function(l,d){return l=l>>>0,d||ie(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},a.prototype.readInt32BE=function(l,d){return l=l>>>0,d||ie(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},a.prototype.readFloatLE=function(l,d){return l=l>>>0,d||ie(l,4,this.length),r.read(this,l,!0,23,4)},a.prototype.readFloatBE=function(l,d){return l=l>>>0,d||ie(l,4,this.length),r.read(this,l,!1,23,4)},a.prototype.readDoubleLE=function(l,d){return l=l>>>0,d||ie(l,8,this.length),r.read(this,l,!0,52,8)},a.prototype.readDoubleBE=function(l,d){return l=l>>>0,d||ie(l,8,this.length),r.read(this,l,!1,52,8)};function ae(g,l,d,b,T,C){if(!a.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>T||l<C)throw new RangeError('"value" argument is out of bounds');if(d+b>g.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(l,d,b,T){if(l=+l,d=d>>>0,b=b>>>0,!T){var C=Math.pow(2,8*b)-1;ae(this,l,d,b,C,0)}var Z=1,oe=0;for(this[d]=l&255;++oe<b&&(Z*=256);)this[d+oe]=l/Z&255;return d+b},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(l,d,b,T){if(l=+l,d=d>>>0,b=b>>>0,!T){var C=Math.pow(2,8*b)-1;ae(this,l,d,b,C,0)}var Z=b-1,oe=1;for(this[d+Z]=l&255;--Z>=0&&(oe*=256);)this[d+Z]=l/oe&255;return d+b},a.prototype.writeUint8=a.prototype.writeUInt8=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,1,255,0),this[d]=l&255,d+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,2,65535,0),this[d]=l&255,this[d+1]=l>>>8,d+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,2,65535,0),this[d]=l>>>8,this[d+1]=l&255,d+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,4,4294967295,0),this[d+3]=l>>>24,this[d+2]=l>>>16,this[d+1]=l>>>8,this[d]=l&255,d+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,4,4294967295,0),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4},a.prototype.writeIntLE=function(l,d,b,T){if(l=+l,d=d>>>0,!T){var C=Math.pow(2,8*b-1);ae(this,l,d,b,C-1,-C)}var Z=0,oe=1,ye=0;for(this[d]=l&255;++Z<b&&(oe*=256);)l<0&&ye===0&&this[d+Z-1]!==0&&(ye=1),this[d+Z]=(l/oe>>0)-ye&255;return d+b},a.prototype.writeIntBE=function(l,d,b,T){if(l=+l,d=d>>>0,!T){var C=Math.pow(2,8*b-1);ae(this,l,d,b,C-1,-C)}var Z=b-1,oe=1,ye=0;for(this[d+Z]=l&255;--Z>=0&&(oe*=256);)l<0&&ye===0&&this[d+Z+1]!==0&&(ye=1),this[d+Z]=(l/oe>>0)-ye&255;return d+b},a.prototype.writeInt8=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,1,127,-128),l<0&&(l=255+l+1),this[d]=l&255,d+1},a.prototype.writeInt16LE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,2,32767,-32768),this[d]=l&255,this[d+1]=l>>>8,d+2},a.prototype.writeInt16BE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,2,32767,-32768),this[d]=l>>>8,this[d+1]=l&255,d+2},a.prototype.writeInt32LE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,4,2147483647,-2147483648),this[d]=l&255,this[d+1]=l>>>8,this[d+2]=l>>>16,this[d+3]=l>>>24,d+4},a.prototype.writeInt32BE=function(l,d,b){return l=+l,d=d>>>0,b||ae(this,l,d,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4};function Ne(g,l,d,b,T,C){if(d+b>g.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function S(g,l,d,b,T){return l=+l,d=d>>>0,T||Ne(g,l,d,4),r.write(g,l,d,b,23,4),d+4}a.prototype.writeFloatLE=function(l,d,b){return S(this,l,d,!0,b)},a.prototype.writeFloatBE=function(l,d,b){return S(this,l,d,!1,b)};function be(g,l,d,b,T){return l=+l,d=d>>>0,T||Ne(g,l,d,8),r.write(g,l,d,b,52,8),d+8}a.prototype.writeDoubleLE=function(l,d,b){return be(this,l,d,!0,b)},a.prototype.writeDoubleBE=function(l,d,b){return be(this,l,d,!1,b)},a.prototype.copy=function(l,d,b,T){if(!a.isBuffer(l))throw new TypeError("argument should be a Buffer");if(b||(b=0),!T&&T!==0&&(T=this.length),d>=l.length&&(d=l.length),d||(d=0),T>0&&T<b&&(T=b),T===b||l.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),l.length-d<T-b&&(T=l.length-d+b);var C=T-b;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,b,T):Uint8Array.prototype.set.call(l,this.subarray(b,T),d),C},a.prototype.fill=function(l,d,b,T){if(typeof l=="string"){if(typeof d=="string"?(T=d,d=0,b=this.length):typeof b=="string"&&(T=b,b=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!a.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(l.length===1){var C=l.charCodeAt(0);(T==="utf8"&&C<128||T==="latin1")&&(l=C)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(d<0||this.length<d||this.length<b)throw new RangeError("Out of range index");if(b<=d)return this;d=d>>>0,b=b===void 0?this.length:b>>>0,l||(l=0);var Z;if(typeof l=="number")for(Z=d;Z<b;++Z)this[Z]=l;else{var oe=a.isBuffer(l)?l:a.from(l,T),ye=oe.length;if(ye===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(Z=0;Z<b-d;++Z)this[Z+d]=oe[Z%ye]}return this};var Be=/[^+/0-9A-Za-z-_]/g;function ce(g){if(g=g.split("=")[0],g=g.trim().replace(Be,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Q(g,l){l=l||1/0;for(var d,b=g.length,T=null,C=[],Z=0;Z<b;++Z){if(d=g.charCodeAt(Z),d>55295&&d<57344){if(!T){if(d>56319){(l-=3)>-1&&C.push(239,191,189);continue}else if(Z+1===b){(l-=3)>-1&&C.push(239,191,189);continue}T=d;continue}if(d<56320){(l-=3)>-1&&C.push(239,191,189),T=d;continue}d=(T-55296<<10|d-56320)+65536}else T&&(l-=3)>-1&&C.push(239,191,189);if(T=null,d<128){if((l-=1)<0)break;C.push(d)}else if(d<2048){if((l-=2)<0)break;C.push(d>>6|192,d&63|128)}else if(d<65536){if((l-=3)<0)break;C.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((l-=4)<0)break;C.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return C}function se(g){for(var l=[],d=0;d<g.length;++d)l.push(g.charCodeAt(d)&255);return l}function B(g,l){for(var d,b,T,C=[],Z=0;Z<g.length&&!((l-=2)<0);++Z)d=g.charCodeAt(Z),b=d>>8,T=d%256,C.push(T),C.push(b);return C}function A(g){return t.toByteArray(ce(g))}function k(g,l,d,b){for(var T=0;T<b&&!(T+d>=l.length||T>=g.length);++T)l[T+d]=g[T];return T}function L(g,l){return g instanceof l||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===l.name}function H(g){return g!==g}var j=function(){for(var g="0123456789abcdef",l=new Array(256),d=0;d<16;++d)for(var b=d*16,T=0;T<16;++T)l[b+T]=g[d]+g[T];return l}()}(Yi)),Yi}var jn={exports:{}},sl=jn.exports,Io;function Ii(){return Io||(Io=1,function(e){(function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,u=Math.floor,f="[BigNumber Error] ",a=f+"Number primitive has more than 15 significant digits: ",h=1e14,w=14,E=9007199254740991,m=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],N=1e7,x=1e9;function p(W){var J,F,P,G=S.prototype={constructor:S,toString:null,valueOf:null},X=new S(1),re=20,_=4,R=-7,M=21,Y=-1e7,ee=1e7,ne=!1,le=1,ge=0,ie={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ae="0123456789abcdefghijklmnopqrstuvwxyz",Ne=!0;function S(B,A){var k,L,H,j,g,l,d,b,T=this;if(!(T instanceof S))return new S(B,A);if(A==null){if(B&&B._isBigNumber===!0){T.s=B.s,!B.c||B.e>ee?T.c=T.e=null:B.e<Y?T.c=[T.e=0]:(T.e=B.e,T.c=B.c.slice());return}if((l=typeof B=="number")&&B*0==0){if(T.s=1/B<0?(B=-B,-1):1,B===~~B){for(j=0,g=B;g>=10;g/=10,j++);j>ee?T.c=T.e=null:(T.e=j,T.c=[B]);return}b=String(B)}else{if(!n.test(b=String(B)))return P(T,b,l);T.s=b.charCodeAt(0)==45?(b=b.slice(1),-1):1}(j=b.indexOf("."))>-1&&(b=b.replace(".","")),(g=b.search(/e/i))>0?(j<0&&(j=g),j+=+b.slice(g+1),b=b.substring(0,g)):j<0&&(j=b.length)}else{if(D(A,2,ae.length,"Base"),A==10&&Ne)return T=new S(B),Q(T,re+T.e+1,_);if(b=String(B),l=typeof B=="number"){if(B*0!=0)return P(T,b,l,A);if(T.s=1/B<0?(b=b.slice(1),-1):1,S.DEBUG&&b.replace(/^0\.0*|\./,"").length>15)throw Error(a+B)}else T.s=b.charCodeAt(0)===45?(b=b.slice(1),-1):1;for(k=ae.slice(0,A),j=g=0,d=b.length;g<d;g++)if(k.indexOf(L=b.charAt(g))<0){if(L=="."){if(g>j){j=d;continue}}else if(!H&&(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase()))){H=!0,g=-1,j=0;continue}return P(T,String(B),l,A)}l=!1,b=F(b,A,10,T.s),(j=b.indexOf("."))>-1?b=b.replace(".",""):j=b.length}for(g=0;b.charCodeAt(g)===48;g++);for(d=b.length;b.charCodeAt(--d)===48;);if(b=b.slice(g,++d)){if(d-=g,l&&S.DEBUG&&d>15&&(B>E||B!==u(B)))throw Error(a+T.s*B);if((j=j-g-1)>ee)T.c=T.e=null;else if(j<Y)T.c=[T.e=0];else{if(T.e=j,T.c=[],g=(j+1)%w,j<0&&(g+=w),g<d){for(g&&T.c.push(+b.slice(0,g)),d-=w;g<d;)T.c.push(+b.slice(g,g+=w));g=w-(b=b.slice(g)).length}else g-=d;for(;g--;b+="0");T.c.push(+b)}}else T.c=[T.e=0]}S.clone=p,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(B){var A,k;if(B!=null)if(typeof B=="object"){if(B.hasOwnProperty(A="DECIMAL_PLACES")&&(k=B[A],D(k,0,x,A),re=k),B.hasOwnProperty(A="ROUNDING_MODE")&&(k=B[A],D(k,0,8,A),_=k),B.hasOwnProperty(A="EXPONENTIAL_AT")&&(k=B[A],k&&k.pop?(D(k[0],-x,0,A),D(k[1],0,x,A),R=k[0],M=k[1]):(D(k,-x,x,A),R=-(M=k<0?-k:k))),B.hasOwnProperty(A="RANGE"))if(k=B[A],k&&k.pop)D(k[0],-x,-1,A),D(k[1],1,x,A),Y=k[0],ee=k[1];else if(D(k,-x,x,A),k)Y=-(ee=k<0?-k:k);else throw Error(f+A+" cannot be zero: "+k);if(B.hasOwnProperty(A="CRYPTO"))if(k=B[A],k===!!k)if(k)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ne=k;else throw ne=!k,Error(f+"crypto unavailable");else ne=k;else throw Error(f+A+" not true or false: "+k);if(B.hasOwnProperty(A="MODULO_MODE")&&(k=B[A],D(k,0,9,A),le=k),B.hasOwnProperty(A="POW_PRECISION")&&(k=B[A],D(k,0,x,A),ge=k),B.hasOwnProperty(A="FORMAT"))if(k=B[A],typeof k=="object")ie=k;else throw Error(f+A+" not an object: "+k);if(B.hasOwnProperty(A="ALPHABET"))if(k=B[A],typeof k=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(k))Ne=k.slice(0,10)=="0123456789",ae=k;else throw Error(f+A+" invalid: "+k)}else throw Error(f+"Object expected: "+B);return{DECIMAL_PLACES:re,ROUNDING_MODE:_,EXPONENTIAL_AT:[R,M],RANGE:[Y,ee],CRYPTO:ne,MODULO_MODE:le,POW_PRECISION:ge,FORMAT:ie,ALPHABET:ae}},S.isBigNumber=function(B){if(!B||B._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var A,k,L=B.c,H=B.e,j=B.s;e:if({}.toString.call(L)=="[object Array]"){if((j===1||j===-1)&&H>=-x&&H<=x&&H===u(H)){if(L[0]===0){if(H===0&&L.length===1)return!0;break e}if(A=(H+1)%w,A<1&&(A+=w),String(L[0]).length==A){for(A=0;A<L.length;A++)if(k=L[A],k<0||k>=h||k!==u(k))break e;if(k!==0)return!0}}}else if(L===null&&H===null&&(j===null||j===1||j===-1))return!0;throw Error(f+"Invalid BigNumber: "+B)},S.maximum=S.max=function(){return Be(arguments,-1)},S.minimum=S.min=function(){return Be(arguments,1)},S.random=function(){var B=9007199254740992,A=Math.random()*B&2097151?function(){return u(Math.random()*B)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(k){var L,H,j,g,l,d=0,b=[],T=new S(X);if(k==null?k=re:D(k,0,x),g=o(k/w),ne)if(crypto.getRandomValues){for(L=crypto.getRandomValues(new Uint32Array(g*=2));d<g;)l=L[d]*131072+(L[d+1]>>>11),l>=9e15?(H=crypto.getRandomValues(new Uint32Array(2)),L[d]=H[0],L[d+1]=H[1]):(b.push(l%1e14),d+=2);d=g/2}else if(crypto.randomBytes){for(L=crypto.randomBytes(g*=7);d<g;)l=(L[d]&31)*281474976710656+L[d+1]*1099511627776+L[d+2]*4294967296+L[d+3]*16777216+(L[d+4]<<16)+(L[d+5]<<8)+L[d+6],l>=9e15?crypto.randomBytes(7).copy(L,d):(b.push(l%1e14),d+=7);d=g/7}else throw ne=!1,Error(f+"crypto unavailable");if(!ne)for(;d<g;)l=A(),l<9e15&&(b[d++]=l%1e14);for(g=b[--d],k%=w,g&&k&&(l=m[w-k],b[d]=u(g/l)*l);b[d]===0;b.pop(),d--);if(d<0)b=[j=0];else{for(j=-1;b[0]===0;b.splice(0,1),j-=w);for(d=1,l=b[0];l>=10;l/=10,d++);d<w&&(j-=w-d)}return T.e=j,T.c=b,T}}(),S.sum=function(){for(var B=1,A=arguments,k=new S(A[0]);B<A.length;)k=k.plus(A[B++]);return k},F=function(){var B="0123456789";function A(k,L,H,j){for(var g,l=[0],d,b=0,T=k.length;b<T;){for(d=l.length;d--;l[d]*=L);for(l[0]+=j.indexOf(k.charAt(b++)),g=0;g<l.length;g++)l[g]>H-1&&(l[g+1]==null&&(l[g+1]=0),l[g+1]+=l[g]/H|0,l[g]%=H)}return l.reverse()}return function(k,L,H,j,g){var l,d,b,T,C,Z,oe,ye,he=k.indexOf("."),ve=re,s=_;for(he>=0&&(T=ge,ge=0,k=k.replace(".",""),ye=new S(L),Z=ye.pow(k.length-he),ge=T,ye.c=A(I(q(Z.c),Z.e,"0"),10,H,B),ye.e=ye.c.length),oe=A(k,L,H,g?(l=ae,B):(l=B,ae)),b=T=oe.length;oe[--T]==0;oe.pop());if(!oe[0])return l.charAt(0);if(he<0?--b:(Z.c=oe,Z.e=b,Z.s=j,Z=J(Z,ye,ve,s,H),oe=Z.c,C=Z.r,b=Z.e),d=b+ve+1,he=oe[d],T=H/2,C=C||d<0||oe[d+1]!=null,C=s<4?(he!=null||C)&&(s==0||s==(Z.s<0?3:2)):he>T||he==T&&(s==4||C||s==6&&oe[d-1]&1||s==(Z.s<0?8:7)),d<1||!oe[0])k=C?I(l.charAt(1),-ve,l.charAt(0)):l.charAt(0);else{if(oe.length=d,C)for(--H;++oe[--d]>H;)oe[d]=0,d||(++b,oe=[1].concat(oe));for(T=oe.length;!oe[--T];);for(he=0,k="";he<=T;k+=l.charAt(oe[he++]));k=I(k,b,l.charAt(0))}return k}}(),J=function(){function B(L,H,j){var g,l,d,b,T=0,C=L.length,Z=H%N,oe=H/N|0;for(L=L.slice();C--;)d=L[C]%N,b=L[C]/N|0,g=oe*d+b*Z,l=Z*d+g%N*N+T,T=(l/j|0)+(g/N|0)+oe*b,L[C]=l%j;return T&&(L=[T].concat(L)),L}function A(L,H,j,g){var l,d;if(j!=g)d=j>g?1:-1;else for(l=d=0;l<j;l++)if(L[l]!=H[l]){d=L[l]>H[l]?1:-1;break}return d}function k(L,H,j,g){for(var l=0;j--;)L[j]-=l,l=L[j]<H[j]?1:0,L[j]=l*g+L[j]-H[j];for(;!L[0]&&L.length>1;L.splice(0,1));}return function(L,H,j,g,l){var d,b,T,C,Z,oe,ye,he,ve,s,i,c,y,v,U,$,de,me=L.s==H.s?1:-1,pe=L.c,fe=H.c;if(!pe||!pe[0]||!fe||!fe[0])return new S(!L.s||!H.s||(pe?fe&&pe[0]==fe[0]:!fe)?NaN:pe&&pe[0]==0||!fe?me*0:me/0);for(he=new S(me),ve=he.c=[],b=L.e-H.e,me=j+b+1,l||(l=h,b=O(L.e/w)-O(H.e/w),me=me/w|0),T=0;fe[T]==(pe[T]||0);T++);if(fe[T]>(pe[T]||0)&&b--,me<0)ve.push(1),C=!0;else{for(v=pe.length,$=fe.length,T=0,me+=2,Z=u(l/(fe[0]+1)),Z>1&&(fe=B(fe,Z,l),pe=B(pe,Z,l),$=fe.length,v=pe.length),y=$,s=pe.slice(0,$),i=s.length;i<$;s[i++]=0);de=fe.slice(),de=[0].concat(de),U=fe[0],fe[1]>=l/2&&U++;do{if(Z=0,d=A(fe,s,$,i),d<0){if(c=s[0],$!=i&&(c=c*l+(s[1]||0)),Z=u(c/U),Z>1)for(Z>=l&&(Z=l-1),oe=B(fe,Z,l),ye=oe.length,i=s.length;A(oe,s,ye,i)==1;)Z--,k(oe,$<ye?de:fe,ye,l),ye=oe.length,d=1;else Z==0&&(d=Z=1),oe=fe.slice(),ye=oe.length;if(ye<i&&(oe=[0].concat(oe)),k(s,oe,i,l),i=s.length,d==-1)for(;A(fe,s,$,i)<1;)Z++,k(s,$<i?de:fe,i,l),i=s.length}else d===0&&(Z++,s=[0]);ve[T++]=Z,s[0]?s[i++]=pe[y]||0:(s=[pe[y]],i=1)}while((y++<v||s[0]!=null)&&me--);C=s[0]!=null,ve[0]||ve.splice(0,1)}if(l==h){for(T=1,me=ve[0];me>=10;me/=10,T++);Q(he,j+(he.e=T+b*w-1)+1,g,C)}else he.e=b,he.r=+C;return he}}();function be(B,A,k,L){var H,j,g,l,d;if(k==null?k=_:D(k,0,8),!B.c)return B.toString();if(H=B.c[0],g=B.e,A==null)d=q(B.c),d=L==1||L==2&&(g<=R||g>=M)?te(d,g):I(d,g,"0");else if(B=Q(new S(B),A,k),j=B.e,d=q(B.c),l=d.length,L==1||L==2&&(A<=j||j<=R)){for(;l<A;d+="0",l++);d=te(d,j)}else if(A-=g,d=I(d,j,"0"),j+1>l){if(--A>0)for(d+=".";A--;d+="0");}else if(A+=j-l,A>0)for(j+1==l&&(d+=".");A--;d+="0");return B.s<0&&H?"-"+d:d}function Be(B,A){for(var k,L,H=1,j=new S(B[0]);H<B.length;H++)L=new S(B[H]),(!L.s||(k=K(j,L))===A||k===0&&j.s===A)&&(j=L);return j}function ce(B,A,k){for(var L=1,H=A.length;!A[--H];A.pop());for(H=A[0];H>=10;H/=10,L++);return(k=L+k*w-1)>ee?B.c=B.e=null:k<Y?B.c=[B.e=0]:(B.e=k,B.c=A),B}P=function(){var B=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,k=/^\.([^.]+)$/,L=/^-?(Infinity|NaN)$/,H=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(j,g,l,d){var b,T=l?g:g.replace(H,"");if(L.test(T))j.s=isNaN(T)?null:T<0?-1:1;else{if(!l&&(T=T.replace(B,function(C,Z,oe){return b=(oe=oe.toLowerCase())=="x"?16:oe=="b"?2:8,!d||d==b?Z:C}),d&&(b=d,T=T.replace(A,"$1").replace(k,"0.$1")),g!=T))return new S(T,b);if(S.DEBUG)throw Error(f+"Not a"+(d?" base "+d:"")+" number: "+g);j.s=null}j.c=j.e=null}}();function Q(B,A,k,L){var H,j,g,l,d,b,T,C=B.c,Z=m;if(C){e:{for(H=1,l=C[0];l>=10;l/=10,H++);if(j=A-H,j<0)j+=w,g=A,d=C[b=0],T=u(d/Z[H-g-1]%10);else if(b=o((j+1)/w),b>=C.length)if(L){for(;C.length<=b;C.push(0));d=T=0,H=1,j%=w,g=j-w+1}else break e;else{for(d=l=C[b],H=1;l>=10;l/=10,H++);j%=w,g=j-w+H,T=g<0?0:u(d/Z[H-g-1]%10)}if(L=L||A<0||C[b+1]!=null||(g<0?d:d%Z[H-g-1]),L=k<4?(T||L)&&(k==0||k==(B.s<0?3:2)):T>5||T==5&&(k==4||L||k==6&&(j>0?g>0?d/Z[H-g]:0:C[b-1])%10&1||k==(B.s<0?8:7)),A<1||!C[0])return C.length=0,L?(A-=B.e+1,C[0]=Z[(w-A%w)%w],B.e=-A||0):C[0]=B.e=0,B;if(j==0?(C.length=b,l=1,b--):(C.length=b+1,l=Z[w-j],C[b]=g>0?u(d/Z[H-g]%Z[g])*l:0),L)for(;;)if(b==0){for(j=1,g=C[0];g>=10;g/=10,j++);for(g=C[0]+=l,l=1;g>=10;g/=10,l++);j!=l&&(B.e++,C[0]==h&&(C[0]=1));break}else{if(C[b]+=l,C[b]!=h)break;C[b--]=0,l=1}for(j=C.length;C[--j]===0;C.pop());}B.e>ee?B.c=B.e=null:B.e<Y&&(B.c=[B.e=0])}return B}function se(B){var A,k=B.e;return k===null?B.toString():(A=q(B.c),A=k<=R||k>=M?te(A,k):I(A,k,"0"),B.s<0?"-"+A:A)}return G.absoluteValue=G.abs=function(){var B=new S(this);return B.s<0&&(B.s=1),B},G.comparedTo=function(B,A){return K(this,new S(B,A))},G.decimalPlaces=G.dp=function(B,A){var k,L,H,j=this;if(B!=null)return D(B,0,x),A==null?A=_:D(A,0,8),Q(new S(j),B+j.e+1,A);if(!(k=j.c))return null;if(L=((H=k.length-1)-O(this.e/w))*w,H=k[H])for(;H%10==0;H/=10,L--);return L<0&&(L=0),L},G.dividedBy=G.div=function(B,A){return J(this,new S(B,A),re,_)},G.dividedToIntegerBy=G.idiv=function(B,A){return J(this,new S(B,A),0,1)},G.exponentiatedBy=G.pow=function(B,A){var k,L,H,j,g,l,d,b,T,C=this;if(B=new S(B),B.c&&!B.isInteger())throw Error(f+"Exponent not an integer: "+se(B));if(A!=null&&(A=new S(A)),l=B.e>14,!C.c||!C.c[0]||C.c[0]==1&&!C.e&&C.c.length==1||!B.c||!B.c[0])return T=new S(Math.pow(+se(C),l?B.s*(2-V(B)):+se(B))),A?T.mod(A):T;if(d=B.s<0,A){if(A.c?!A.c[0]:!A.s)return new S(NaN);L=!d&&C.isInteger()&&A.isInteger(),L&&(C=C.mod(A))}else{if(B.e>9&&(C.e>0||C.e<-1||(C.e==0?C.c[0]>1||l&&C.c[1]>=24e7:C.c[0]<8e13||l&&C.c[0]<=9999975e7)))return j=C.s<0&&V(B)?-0:0,C.e>-1&&(j=1/j),new S(d?1/j:j);ge&&(j=o(ge/w+2))}for(l?(k=new S(.5),d&&(B.s=1),b=V(B)):(H=Math.abs(+se(B)),b=H%2),T=new S(X);;){if(b){if(T=T.times(C),!T.c)break;j?T.c.length>j&&(T.c.length=j):L&&(T=T.mod(A))}if(H){if(H=u(H/2),H===0)break;b=H%2}else if(B=B.times(k),Q(B,B.e+1,1),B.e>14)b=V(B);else{if(H=+se(B),H===0)break;b=H%2}C=C.times(C),j?C.c&&C.c.length>j&&(C.c.length=j):L&&(C=C.mod(A))}return L?T:(d&&(T=X.div(T)),A?T.mod(A):j?Q(T,ge,_,g):T)},G.integerValue=function(B){var A=new S(this);return B==null?B=_:D(B,0,8),Q(A,A.e+1,B)},G.isEqualTo=G.eq=function(B,A){return K(this,new S(B,A))===0},G.isFinite=function(){return!!this.c},G.isGreaterThan=G.gt=function(B,A){return K(this,new S(B,A))>0},G.isGreaterThanOrEqualTo=G.gte=function(B,A){return(A=K(this,new S(B,A)))===1||A===0},G.isInteger=function(){return!!this.c&&O(this.e/w)>this.c.length-2},G.isLessThan=G.lt=function(B,A){return K(this,new S(B,A))<0},G.isLessThanOrEqualTo=G.lte=function(B,A){return(A=K(this,new S(B,A)))===-1||A===0},G.isNaN=function(){return!this.s},G.isNegative=function(){return this.s<0},G.isPositive=function(){return this.s>0},G.isZero=function(){return!!this.c&&this.c[0]==0},G.minus=function(B,A){var k,L,H,j,g=this,l=g.s;if(B=new S(B,A),A=B.s,!l||!A)return new S(NaN);if(l!=A)return B.s=-A,g.plus(B);var d=g.e/w,b=B.e/w,T=g.c,C=B.c;if(!d||!b){if(!T||!C)return T?(B.s=-A,B):new S(C?g:NaN);if(!T[0]||!C[0])return C[0]?(B.s=-A,B):new S(T[0]?g:_==3?-0:0)}if(d=O(d),b=O(b),T=T.slice(),l=d-b){for((j=l<0)?(l=-l,H=T):(b=d,H=C),H.reverse(),A=l;A--;H.push(0));H.reverse()}else for(L=(j=(l=T.length)<(A=C.length))?l:A,l=A=0;A<L;A++)if(T[A]!=C[A]){j=T[A]<C[A];break}if(j&&(H=T,T=C,C=H,B.s=-B.s),A=(L=C.length)-(k=T.length),A>0)for(;A--;T[k++]=0);for(A=h-1;L>l;){if(T[--L]<C[L]){for(k=L;k&&!T[--k];T[k]=A);--T[k],T[L]+=h}T[L]-=C[L]}for(;T[0]==0;T.splice(0,1),--b);return T[0]?ce(B,T,b):(B.s=_==3?-1:1,B.c=[B.e=0],B)},G.modulo=G.mod=function(B,A){var k,L,H=this;return B=new S(B,A),!H.c||!B.s||B.c&&!B.c[0]?new S(NaN):!B.c||H.c&&!H.c[0]?new S(H):(le==9?(L=B.s,B.s=1,k=J(H,B,0,3),B.s=L,k.s*=L):k=J(H,B,0,le),B=H.minus(k.times(B)),!B.c[0]&&le==1&&(B.s=H.s),B)},G.multipliedBy=G.times=function(B,A){var k,L,H,j,g,l,d,b,T,C,Z,oe,ye,he,ve,s=this,i=s.c,c=(B=new S(B,A)).c;if(!i||!c||!i[0]||!c[0])return!s.s||!B.s||i&&!i[0]&&!c||c&&!c[0]&&!i?B.c=B.e=B.s=null:(B.s*=s.s,!i||!c?B.c=B.e=null:(B.c=[0],B.e=0)),B;for(L=O(s.e/w)+O(B.e/w),B.s*=s.s,d=i.length,C=c.length,d<C&&(ye=i,i=c,c=ye,H=d,d=C,C=H),H=d+C,ye=[];H--;ye.push(0));for(he=h,ve=N,H=C;--H>=0;){for(k=0,Z=c[H]%ve,oe=c[H]/ve|0,g=d,j=H+g;j>H;)b=i[--g]%ve,T=i[g]/ve|0,l=oe*b+T*Z,b=Z*b+l%ve*ve+ye[j]+k,k=(b/he|0)+(l/ve|0)+oe*T,ye[j--]=b%he;ye[j]=k}return k?++L:ye.splice(0,1),ce(B,ye,L)},G.negated=function(){var B=new S(this);return B.s=-B.s||null,B},G.plus=function(B,A){var k,L=this,H=L.s;if(B=new S(B,A),A=B.s,!H||!A)return new S(NaN);if(H!=A)return B.s=-A,L.minus(B);var j=L.e/w,g=B.e/w,l=L.c,d=B.c;if(!j||!g){if(!l||!d)return new S(H/0);if(!l[0]||!d[0])return d[0]?B:new S(l[0]?L:H*0)}if(j=O(j),g=O(g),l=l.slice(),H=j-g){for(H>0?(g=j,k=d):(H=-H,k=l),k.reverse();H--;k.push(0));k.reverse()}for(H=l.length,A=d.length,H-A<0&&(k=d,d=l,l=k,A=H),H=0;A;)H=(l[--A]=l[A]+d[A]+H)/h|0,l[A]=h===l[A]?0:l[A]%h;return H&&(l=[H].concat(l),++g),ce(B,l,g)},G.precision=G.sd=function(B,A){var k,L,H,j=this;if(B!=null&&B!==!!B)return D(B,1,x),A==null?A=_:D(A,0,8),Q(new S(j),B,A);if(!(k=j.c))return null;if(H=k.length-1,L=H*w+1,H=k[H]){for(;H%10==0;H/=10,L--);for(H=k[0];H>=10;H/=10,L++);}return B&&j.e+1>L&&(L=j.e+1),L},G.shiftedBy=function(B){return D(B,-E,E),this.times("1e"+B)},G.squareRoot=G.sqrt=function(){var B,A,k,L,H,j=this,g=j.c,l=j.s,d=j.e,b=re+4,T=new S("0.5");if(l!==1||!g||!g[0])return new S(!l||l<0&&(!g||g[0])?NaN:g?j:1/0);if(l=Math.sqrt(+se(j)),l==0||l==1/0?(A=q(g),(A.length+d)%2==0&&(A+="0"),l=Math.sqrt(+A),d=O((d+1)/2)-(d<0||d%2),l==1/0?A="5e"+d:(A=l.toExponential(),A=A.slice(0,A.indexOf("e")+1)+d),k=new S(A)):k=new S(l+""),k.c[0]){for(d=k.e,l=d+b,l<3&&(l=0);;)if(H=k,k=T.times(H.plus(J(j,H,b,1))),q(H.c).slice(0,l)===(A=q(k.c)).slice(0,l))if(k.e<d&&--l,A=A.slice(l-3,l+1),A=="9999"||!L&&A=="4999"){if(!L&&(Q(H,H.e+re+2,0),H.times(H).eq(j))){k=H;break}b+=4,l+=4,L=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(Q(k,k.e+re+2,1),B=!k.times(k).eq(j));break}}return Q(k,k.e+re+1,_,B)},G.toExponential=function(B,A){return B!=null&&(D(B,0,x),B++),be(this,B,A,1)},G.toFixed=function(B,A){return B!=null&&(D(B,0,x),B=B+this.e+1),be(this,B,A)},G.toFormat=function(B,A,k){var L,H=this;if(k==null)B!=null&&A&&typeof A=="object"?(k=A,A=null):B&&typeof B=="object"?(k=B,B=A=null):k=ie;else if(typeof k!="object")throw Error(f+"Argument not an object: "+k);if(L=H.toFixed(B,A),H.c){var j,g=L.split("."),l=+k.groupSize,d=+k.secondaryGroupSize,b=k.groupSeparator||"",T=g[0],C=g[1],Z=H.s<0,oe=Z?T.slice(1):T,ye=oe.length;if(d&&(j=l,l=d,d=j,ye-=j),l>0&&ye>0){for(j=ye%l||l,T=oe.substr(0,j);j<ye;j+=l)T+=b+oe.substr(j,l);d>0&&(T+=b+oe.slice(j)),Z&&(T="-"+T)}L=C?T+(k.decimalSeparator||"")+((d=+k.fractionGroupSize)?C.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(k.fractionGroupSeparator||"")):C):T}return(k.prefix||"")+L+(k.suffix||"")},G.toFraction=function(B){var A,k,L,H,j,g,l,d,b,T,C,Z,oe=this,ye=oe.c;if(B!=null&&(l=new S(B),!l.isInteger()&&(l.c||l.s!==1)||l.lt(X)))throw Error(f+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+se(l));if(!ye)return new S(oe);for(A=new S(X),b=k=new S(X),L=d=new S(X),Z=q(ye),j=A.e=Z.length-oe.e-1,A.c[0]=m[(g=j%w)<0?w+g:g],B=!B||l.comparedTo(A)>0?j>0?A:b:l,g=ee,ee=1/0,l=new S(Z),d.c[0]=0;T=J(l,A,0,1),H=k.plus(T.times(L)),H.comparedTo(B)!=1;)k=L,L=H,b=d.plus(T.times(H=b)),d=H,A=l.minus(T.times(H=A)),l=H;return H=J(B.minus(k),L,0,1),d=d.plus(H.times(b)),k=k.plus(H.times(L)),d.s=b.s=oe.s,j=j*2,C=J(b,L,j,_).minus(oe).abs().comparedTo(J(d,k,j,_).minus(oe).abs())<1?[b,L]:[d,k],ee=g,C},G.toNumber=function(){return+se(this)},G.toPrecision=function(B,A){return B!=null&&D(B,1,x),be(this,B,A,2)},G.toString=function(B){var A,k=this,L=k.s,H=k.e;return H===null?L?(A="Infinity",L<0&&(A="-"+A)):A="NaN":(B==null?A=H<=R||H>=M?te(q(k.c),H):I(q(k.c),H,"0"):B===10&&Ne?(k=Q(new S(k),re+H+1,_),A=I(q(k.c),k.e,"0")):(D(B,2,ae.length,"Base"),A=F(I(q(k.c),H,"0"),10,B,L,!0)),L<0&&k.c[0]&&(A="-"+A)),A},G.valueOf=G.toJSON=function(){return se(this)},G._isBigNumber=!0,W!=null&&S.set(W),S}function O(W){var J=W|0;return W>0||W===J?J:J-1}function q(W){for(var J,F,P=1,G=W.length,X=W[0]+"";P<G;){for(J=W[P++]+"",F=w-J.length;F--;J="0"+J);X+=J}for(G=X.length;X.charCodeAt(--G)===48;);return X.slice(0,G+1||1)}function K(W,J){var F,P,G=W.c,X=J.c,re=W.s,_=J.s,R=W.e,M=J.e;if(!re||!_)return null;if(F=G&&!G[0],P=X&&!X[0],F||P)return F?P?0:-_:re;if(re!=_)return re;if(F=re<0,P=R==M,!G||!X)return P?0:!G^F?1:-1;if(!P)return R>M^F?1:-1;for(_=(R=G.length)<(M=X.length)?R:M,re=0;re<_;re++)if(G[re]!=X[re])return G[re]>X[re]^F?1:-1;return R==M?0:R>M^F?1:-1}function D(W,J,F,P){if(W<J||W>F||W!==u(W))throw Error(f+(P||"Argument")+(typeof W=="number"?W<J||W>F?" out of range: ":" not an integer: ":" not a primitive number: ")+String(W))}function V(W){var J=W.c.length-1;return O(W.e/w)==J&&W.c[J]%2!=0}function te(W,J){return(W.length>1?W.charAt(0)+"."+W.slice(1):W)+(J<0?"e":"e+")+J}function I(W,J,F){var P,G;if(J<0){for(G=F+".";++J;G+=F);W=G+W}else if(P=W.length,++J>P){for(G=F,J-=P;--J;G+=F);W+=G}else J<P&&(W=W.slice(0,J)+"."+W.slice(J));return W}r=p(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=r)})(sl)}(jn)),jn.exports}var Wi,Fo;function ol(){return Fo||(Fo=1,Wi=function(t,r,n){var o=new t.Uint8Array(n),u=r.pushInt,f=r.pushInt32,a=r.pushInt32Neg,h=r.pushInt64,w=r.pushInt64Neg,E=r.pushFloat,m=r.pushFloatSingle,N=r.pushFloatDouble,x=r.pushTrue,p=r.pushFalse,O=r.pushUndefined,q=r.pushNull,K=r.pushInfinity,D=r.pushInfinityNeg,V=r.pushNaN,te=r.pushNaNNeg,I=r.pushArrayStart,W=r.pushArrayStartFixed,J=r.pushArrayStartFixed32,F=r.pushArrayStartFixed64,P=r.pushObjectStart,G=r.pushObjectStartFixed,X=r.pushObjectStartFixed32,re=r.pushObjectStartFixed64,_=r.pushByteString,R=r.pushByteStringStart,M=r.pushUtf8String,Y=r.pushUtf8StringStart,ee=r.pushSimpleUnassigned,ne=r.pushTagStart,le=r.pushTagStart4,ge=r.pushTagStart8,ie=r.pushTagUnassigned,ae=r.pushBreak,Ne=t.Math.pow,S=0,be=0,Be=0;function ce(z){for(z=z|0,S=0,be=z;(S|0)<(be|0)&&(Be=sf[o[S]&255](o[S]|0)|0,!((Be|0)>0)););return Be|0}function Q(z){return z=z|0,((S|0)+(z|0)|0)<(be|0)?0:1}function se(z){return z=z|0,o[z|0]<<8|o[z+1|0]|0}function B(z){return z=z|0,o[z|0]<<24|o[z+1|0]<<16|o[z+2|0]<<8|o[z+3|0]|0}function A(z){return z=z|0,u(z|0),S=S+1|0,0}function k(z){return z=z|0,Q(1)|0?1:(u(o[S+1|0]|0),S=S+2|0,0)}function L(z){return z=z|0,Q(2)|0?1:(u(se(S+1|0)|0),S=S+3|0,0)}function H(z){return z=z|0,Q(4)|0?1:(f(se(S+1|0)|0,se(S+3|0)|0),S=S+5|0,0)}function j(z){return z=z|0,Q(8)|0?1:(h(se(S+1|0)|0,se(S+3|0)|0,se(S+5|0)|0,se(S+7|0)|0),S=S+9|0,0)}function g(z){return z=z|0,u(-1-(z-32|0)|0),S=S+1|0,0}function l(z){return z=z|0,Q(1)|0?1:(u(-1-(o[S+1|0]|0)|0),S=S+2|0,0)}function d(z){z=z|0;var Se=0;return Q(2)|0?1:(Se=se(S+1|0)|0,u(-1-(Se|0)|0),S=S+3|0,0)}function b(z){return z=z|0,Q(4)|0?1:(a(se(S+1|0)|0,se(S+3|0)|0),S=S+5|0,0)}function T(z){return z=z|0,Q(8)|0?1:(w(se(S+1|0)|0,se(S+3|0)|0,se(S+5|0)|0,se(S+7|0)|0),S=S+9|0,0)}function C(z){z=z|0;var Se=0,Re=0,Te=0;return Te=z-64|0,Q(Te|0)|0?1:(Se=S+1|0,Re=(S+1|0)+(Te|0)|0,_(Se|0,Re|0),S=Re|0,0)}function Z(z){z=z|0;var Se=0,Re=0,Te=0;return Q(1)|0||(Te=o[S+1|0]|0,Se=S+2|0,Re=(S+2|0)+(Te|0)|0,Q(Te+1|0)|0)?1:(_(Se|0,Re|0),S=Re|0,0)}function oe(z){z=z|0;var Se=0,Re=0,Te=0;return Q(2)|0||(Te=se(S+1|0)|0,Se=S+3|0,Re=(S+3|0)+(Te|0)|0,Q(Te+2|0)|0)?1:(_(Se|0,Re|0),S=Re|0,0)}function ye(z){z=z|0;var Se=0,Re=0,Te=0;return Q(4)|0||(Te=B(S+1|0)|0,Se=S+5|0,Re=(S+5|0)+(Te|0)|0,Q(Te+4|0)|0)?1:(_(Se|0,Re|0),S=Re|0,0)}function he(z){return z=z|0,1}function ve(z){return z=z|0,R(),S=S+1|0,0}function s(z){z=z|0;var Se=0,Re=0,Te=0;return Te=z-96|0,Q(Te|0)|0?1:(Se=S+1|0,Re=(S+1|0)+(Te|0)|0,M(Se|0,Re|0),S=Re|0,0)}function i(z){z=z|0;var Se=0,Re=0,Te=0;return Q(1)|0||(Te=o[S+1|0]|0,Se=S+2|0,Re=(S+2|0)+(Te|0)|0,Q(Te+1|0)|0)?1:(M(Se|0,Re|0),S=Re|0,0)}function c(z){z=z|0;var Se=0,Re=0,Te=0;return Q(2)|0||(Te=se(S+1|0)|0,Se=S+3|0,Re=(S+3|0)+(Te|0)|0,Q(Te+2|0)|0)?1:(M(Se|0,Re|0),S=Re|0,0)}function y(z){z=z|0;var Se=0,Re=0,Te=0;return Q(4)|0||(Te=B(S+1|0)|0,Se=S+5|0,Re=(S+5|0)+(Te|0)|0,Q(Te+4|0)|0)?1:(M(Se|0,Re|0),S=Re|0,0)}function v(z){return z=z|0,1}function U(z){return z=z|0,Y(),S=S+1|0,0}function $(z){return z=z|0,W(z-128|0),S=S+1|0,0}function de(z){return z=z|0,Q(1)|0?1:(W(o[S+1|0]|0),S=S+2|0,0)}function me(z){return z=z|0,Q(2)|0?1:(W(se(S+1|0)|0),S=S+3|0,0)}function pe(z){return z=z|0,Q(4)|0?1:(J(se(S+1|0)|0,se(S+3|0)|0),S=S+5|0,0)}function fe(z){return z=z|0,Q(8)|0?1:(F(se(S+1|0)|0,se(S+3|0)|0,se(S+5|0)|0,se(S+7|0)|0),S=S+9|0,0)}function we(z){return z=z|0,I(),S=S+1|0,0}function Ie(z){z=z|0;var Se=0;return Se=z-160|0,Q(Se|0)|0?1:(G(Se|0),S=S+1|0,0)}function or(z){return z=z|0,Q(1)|0?1:(G(o[S+1|0]|0),S=S+2|0,0)}function ar(z){return z=z|0,Q(2)|0?1:(G(se(S+1|0)|0),S=S+3|0,0)}function cr(z){return z=z|0,Q(4)|0?1:(X(se(S+1|0)|0,se(S+3|0)|0),S=S+5|0,0)}function ur(z){return z=z|0,Q(8)|0?1:(re(se(S+1|0)|0,se(S+3|0)|0,se(S+5|0)|0,se(S+7|0)|0),S=S+9|0,0)}function fr(z){return z=z|0,P(),S=S+1|0,0}function ft(z){return z=z|0,ne(z-192|0|0),S=S+1|0,0}function _p(z){return z=z|0,ne(z|0),S=S+1|0,0}function wp(z){return z=z|0,ne(z|0),S=S+1|0,0}function bp(z){return z=z|0,ne(z|0),S=S+1|0,0}function xp(z){return z=z|0,ne(z|0),S=S+1|0,0}function je(z){return z=z|0,ne(z-192|0|0),S=S+1|0,0}function Ep(z){return z=z|0,ne(z|0),S=S+1|0,0}function vp(z){return z=z|0,ne(z|0),S=S+1|0,0}function Np(z){return z=z|0,ne(z|0),S=S+1|0,0}function zu(z){return z=z|0,Q(1)|0?1:(ne(o[S+1|0]|0),S=S+2|0,0)}function Ku(z){return z=z|0,Q(2)|0?1:(ne(se(S+1|0)|0),S=S+3|0,0)}function Du(z){return z=z|0,Q(4)|0?1:(le(se(S+1|0)|0,se(S+3|0)|0),S=S+5|0,0)}function Yu(z){return z=z|0,Q(8)|0?1:(ge(se(S+1|0)|0,se(S+3|0)|0,se(S+5|0)|0,se(S+7|0)|0),S=S+9|0,0)}function qe(z){return z=z|0,ee((z|0)-224|0),S=S+1|0,0}function Wu(z){return z=z|0,p(),S=S+1|0,0}function Zu(z){return z=z|0,x(),S=S+1|0,0}function Xu(z){return z=z|0,q(),S=S+1|0,0}function Ju(z){return z=z|0,O(),S=S+1|0,0}function Qu(z){return z=z|0,Q(1)|0?1:(ee(o[S+1|0]|0),S=S+2|0,0)}function ef(z){z=z|0;var Se=0,Re=0,Te=1,In=0,en=0,Bp=0;return Q(2)|0?1:(Se=o[S+1|0]|0,Re=o[S+2|0]|0,(Se|0)&128&&(Te=-1),In=+(((Se|0)&124)>>2),en=+(((Se|0)&3)<<8|Re),+In==0?E(+(+Te*5960464477539063e-23*+en)):+In==31?+Te==1?+en>0?V():K():+en>0?te():D():E(+(+Te*Ne(2,+(+In-25))*+(1024+en))),S=S+3|0,0)}function tf(z){return z=z|0,Q(4)|0?1:(m(o[S+1|0]|0,o[S+2|0]|0,o[S+3|0]|0,o[S+4|0]|0),S=S+5|0,0)}function rf(z){return z=z|0,Q(8)|0?1:(N(o[S+1|0]|0,o[S+2|0]|0,o[S+3|0]|0,o[S+4|0]|0,o[S+5|0]|0,o[S+6|0]|0,o[S+7|0]|0,o[S+8|0]|0),S=S+9|0,0)}function Ue(z){return z=z|0,1}function nf(z){return z=z|0,ae(),S=S+1|0,0}var sf=[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,k,L,H,j,Ue,Ue,Ue,Ue,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,l,d,b,T,Ue,Ue,Ue,Ue,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,Z,oe,ye,he,Ue,Ue,Ue,ve,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,i,c,y,v,Ue,Ue,Ue,U,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,de,me,pe,fe,Ue,Ue,Ue,we,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,Ie,or,ar,cr,ur,Ue,Ue,Ue,fr,ft,ft,ft,ft,ft,ft,je,je,je,je,je,je,je,je,je,je,je,je,je,je,je,je,je,je,zu,Ku,Du,Yu,Ue,Ue,Ue,Ue,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,Wu,Zu,Xu,Ju,Qu,ef,tf,rf,Ue,Ue,Ue,nf];return{parse:ce}}),Wi}var Zi={},st={},Uo;function Fi(){if(Uo)return st;Uo=1;const e=Ii().BigNumber;return st.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},st.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},st.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},st.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},st.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},st.SHIFT32=Math.pow(2,32),st.SHIFT16=Math.pow(2,16),st.MAX_SAFE_HIGH=2097151,st.NEG_ONE=new e(-1),st.TEN=new e(10),st.TWO=new e(2),st.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},st}var ko;function Qs(){return ko||(ko=1,function(e){const{Buffer:t}=Oi(),r=Ii().BigNumber,n=Fi(),o=n.SHIFT32,u=n.SHIFT16,f=2097151;e.parseHalf=function(w){var E,m,N;return N=w[0]&128?-1:1,E=(w[0]&124)>>2,m=(w[0]&3)<<8|w[1],E?E===31?N*(m?NaN:1/0):N*Math.pow(2,E-25)*(1024+m):N*5960464477539063e-23*m};function a(h){return h<16?"0"+h.toString(16):h.toString(16)}e.arrayBufferToBignumber=function(h){const w=h.byteLength;let E="";for(let m=0;m<w;m++)E+=a(h[m]);return new r(E,16)},e.buildMap=h=>{const w=new Map,E=Object.keys(h),m=E.length;for(let N=0;N<m;N++)w.set(E[N],h[E[N]]);return w},e.buildInt32=(h,w)=>h*u+w,e.buildInt64=(h,w,E,m)=>{const N=e.buildInt32(h,w),x=e.buildInt32(E,m);return N>f?new r(N).times(o).plus(x):N*o+x},e.writeHalf=function(w,E){const m=t.allocUnsafe(4);m.writeFloatBE(E,0);const N=m.readUInt32BE(0);if((N&8191)!==0)return!1;var x=N>>16&32768;const p=N>>23&255,O=N&8388607;if(p>=113&&p<=142)x+=(p-112<<10)+(O>>13);else if(p>=103&&p<113){if(O&(1<<126-p)-1)return!1;x+=O+8388608>>126-p}else return!1;return w.writeUInt16BE(x,0),!0},e.keySorter=function(h,w){var E=h[0].byteLength,m=w[0].byteLength;return E>m?1:m>E?-1:h[0].compare(w[0])},e.isNegativeZero=h=>h===0&&1/h<0,e.nextPowerOf2=h=>{let w=0;if(h&&!(h&h-1))return h;for(;h!==0;)h>>=1,w+=1;return 1<<w}}(Zi)),Zi}var Xi,Po;function Ic(){if(Po)return Xi;Po=1;const e=Fi(),t=e.MT,r=e.SIMPLE,n=e.SYMS;class o{constructor(f){if(typeof f!="number")throw new Error("Invalid Simple type: "+typeof f);if(f<0||f>255||(f|0)!==f)throw new Error("value must be a small positive integer: "+f);this.value=f}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(f){return f._pushInt(this.value,t.SIMPLE_FLOAT)}static isSimple(f){return f instanceof o}static decode(f,a){switch(a==null&&(a=!0),f){case r.FALSE:return!1;case r.TRUE:return!0;case r.NULL:return a?null:n.NULL;case r.UNDEFINED:return a?void 0:n.UNDEFINED;case-1:if(!a)throw new Error("Invalid BREAK");return n.BREAK;default:return new o(f)}}}return Xi=o,Xi}var Ji,Co;function Fc(){if(Co)return Ji;Co=1;class e{constructor(r,n,o){if(this.tag=r,this.value=n,this.err=o,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(r){return r._pushTag(this.tag),r.pushAny(this.value)}convert(r){var n,o;if(o=r!=null?r[this.tag]:void 0,typeof o!="function"&&(o=e["_tag"+this.tag],typeof o!="function"))return this;try{return o.call(e,this.value)}catch(u){return n=u,this.err=n,this}}}return Ji=e,Ji}var Qi,Vo;function Uc(){if(Vo)return Qi;Vo=1;const e=self.location?self.location.protocol+"//"+self.location.host:"",t=self.URL;class r{constructor(u="",f=e){this.super=new t(u,f),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(u){this.super.hash=u}set host(u){this.super.host=u}set hostname(u){this.super.hostname=u}set href(u){this.super.href=u}set origin(u){this.super.origin=u}set password(u){this.super.password=u}set pathname(u){this.super.pathname=u}set port(u){this.super.port=u}set protocol(u){this.super.protocol=u}set search(u){this.super.search=u}set searchParams(u){this.super.searchParams=u}set username(u){this.super.username=u}createObjectURL(u){return this.super.createObjectURL(u)}revokeObjectURL(u){this.super.revokeObjectURL(u)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function n(o){if(typeof o=="string")return new t(o).toString();if(!(o instanceof t)){const u=o.username&&o.password?`${o.username}:${o.password}@`:"",f=o.auth?o.auth+"@":"",a=o.port?":"+o.port:"",h=o.protocol?o.protocol+"//":"",w=o.host||"",E=o.hostname||"",m=o.search||(o.query?"?"+o.query:""),N=o.hash||"",x=o.pathname||"",p=o.path||x+m;return`${h}${u||f}${w||E+a}${p}${N}`}}return Qi={URLWithLegacySupport:r,URLSearchParams:self.URLSearchParams,defaultBase:e,format:n},Qi}var es,Mo;function al(){if(Mo)return es;Mo=1;const{URLWithLegacySupport:e,format:t}=Uc();return es=(r,n={},o={},u)=>{let f=n.protocol?n.protocol.replace(":",""):"http";f=(o[f]||u||f)+":";let a;try{a=new e(r)}catch{a={}}const h=Object.assign({},n,{protocol:f||a.protocol,host:n.host||a.host});return new e(r,t(h)).toString()},es}var ts,$o;function kc(){if($o)return ts;$o=1;const{URLWithLegacySupport:e,format:t,URLSearchParams:r,defaultBase:n}=Uc(),o=al();return ts={URL:e,URLSearchParams:r,format:t,relative:o,defaultBase:n},ts}var rs,qo;function Pc(){if(qo)return rs;qo=1;const{Buffer:e}=Oi(),t=Ks(),r=Ii().BigNumber,n=ol(),o=Qs(),u=Fi(),f=Ic(),a=Fc(),{URL:h}=kc();class w{constructor(m){m=m||{},!m.size||m.size<65536?m.size=65536:m.size=o.nextPowerOf2(m.size),this._heap=new ArrayBuffer(m.size),this._heap8=new Uint8Array(this._heap),this._buffer=e.from(this._heap),this._reset(),this._knownTags=Object.assign({0:N=>new Date(N),1:N=>new Date(N*1e3),2:N=>o.arrayBufferToBignumber(N),3:N=>u.NEG_ONE.minus(o.arrayBufferToBignumber(N)),4:N=>u.TEN.pow(N[0]).times(N[1]),5:N=>u.TWO.pow(N[0]).times(N[1]),32:N=>new h(N),35:N=>new RegExp(N)},m.tags),this.parser=n(lf,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var m=this._parents.pop();if(m.length>0)throw new Error(`Missing ${m.length} elements`);switch(m.type){case u.PARENT.TAG:this._push(this.createTag(m.ref[0],m.ref[1]));break;case u.PARENT.BYTE_STRING:this._push(this.createByteString(m.ref,m.length));break;case u.PARENT.UTF8_STRING:this._push(this.createUtf8String(m.ref,m.length));break;case u.PARENT.MAP:if(m.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(m.ref,m.length));break;case u.PARENT.OBJECT:if(m.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(m.ref,m.length));break;case u.PARENT.ARRAY:this._push(this.createArray(m.ref,m.length));break}this._currentParent&&this._currentParent.type===u.PARENT.TAG&&this._dec()}_dec(){const m=this._currentParent;m.length<0||(m.length--,m.length===0&&this._closeParent())}_push(m,N){const x=this._currentParent;switch(x.values++,x.type){case u.PARENT.ARRAY:case u.PARENT.BYTE_STRING:case u.PARENT.UTF8_STRING:x.length>-1?this._ref[this._ref.length-x.length]=m:this._ref.push(m),this._dec();break;case u.PARENT.OBJECT:x.tmpKey!=null?(this._ref[x.tmpKey]=m,x.tmpKey=null,this._dec()):(x.tmpKey=m,typeof x.tmpKey!="string"&&(x.type=u.PARENT.MAP,x.ref=o.buildMap(x.ref)));break;case u.PARENT.MAP:x.tmpKey!=null?(this._ref.set(x.tmpKey,m),x.tmpKey=null,this._dec()):x.tmpKey=m;break;case u.PARENT.TAG:this._ref.push(m),N||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(m,N,x){this._parents[this._depth]={type:N,length:x,ref:m,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:u.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(m,N){const x=this._knownTags[m];return x?x(N):new a(m,N)}createMap(m,N){return m}createObject(m,N){return m}createArray(m,N){return m}createByteString(m,N){return e.concat(m)}createByteStringFromHeap(m,N){return m===N?e.alloc(0):e.from(this._heap.slice(m,N))}createInt(m){return m}createInt32(m,N){return o.buildInt32(m,N)}createInt64(m,N,x,p){return o.buildInt64(m,N,x,p)}createFloat(m){return m}createFloatSingle(m,N,x,p){return t.read([m,N,x,p],0,!1,23,4)}createFloatDouble(m,N,x,p,O,q,K,D){return t.read([m,N,x,p,O,q,K,D],0,!1,52,8)}createInt32Neg(m,N){return-1-o.buildInt32(m,N)}createInt64Neg(m,N,x,p){const O=o.buildInt32(m,N),q=o.buildInt32(x,p);return O>u.MAX_SAFE_HIGH?u.NEG_ONE.minus(new r(O).times(u.SHIFT32).plus(q)):-1-(O*u.SHIFT32+q)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(m,N){return m.join("")}createUtf8StringFromHeap(m,N){return m===N?"":this._buffer.toString("utf8",m,N)}createSimpleUnassigned(m){return new f(m)}pushInt(m){this._push(this.createInt(m))}pushInt32(m,N){this._push(this.createInt32(m,N))}pushInt64(m,N,x,p){this._push(this.createInt64(m,N,x,p))}pushFloat(m){this._push(this.createFloat(m))}pushFloatSingle(m,N,x,p){this._push(this.createFloatSingle(m,N,x,p))}pushFloatDouble(m,N,x,p,O,q,K,D){this._push(this.createFloatDouble(m,N,x,p,O,q,K,D))}pushInt32Neg(m,N){this._push(this.createInt32Neg(m,N))}pushInt64Neg(m,N,x,p){this._push(this.createInt64Neg(m,N,x,p))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],u.PARENT.ARRAY,-1)}pushArrayStartFixed(m){this._createArrayStartFixed(m)}pushArrayStartFixed32(m,N){const x=o.buildInt32(m,N);this._createArrayStartFixed(x)}pushArrayStartFixed64(m,N,x,p){const O=o.buildInt64(m,N,x,p);this._createArrayStartFixed(O)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(m){this._createObjectStartFixed(m)}pushObjectStartFixed32(m,N){const x=o.buildInt32(m,N);this._createObjectStartFixed(x)}pushObjectStartFixed64(m,N,x,p){const O=o.buildInt64(m,N,x,p);this._createObjectStartFixed(O)}pushByteStringStart(){this._parents[this._depth]={type:u.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(m,N){this._push(this.createByteStringFromHeap(m,N))}pushUtf8StringStart(){this._parents[this._depth]={type:u.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(m,N){this._push(this.createUtf8StringFromHeap(m,N))}pushSimpleUnassigned(m){this._push(this.createSimpleUnassigned(m))}pushTagStart(m){this._parents[this._depth]={type:u.PARENT.TAG,length:1,ref:[m]}}pushTagStart4(m,N){this.pushTagStart(o.buildInt32(m,N))}pushTagStart8(m,N,x,p){this.pushTagStart(o.buildInt64(m,N,x,p))}pushTagUnassigned(m){this._push(this.createTag(m))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(m){if(m===0){this._push(this.createObject({}));return}this._createParent({},u.PARENT.OBJECT,m)}_createArrayStartFixed(m){if(m===0){this._push(this.createArray([]));return}this._createParent(new Array(m),u.PARENT.ARRAY,m)}_decode(m){if(m.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(m);const N=this.parser.parse(m.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(N>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(m){return this._decode(m),this._res[0]}decodeAll(m){return this._decode(m),this._res}static decode(m,N){return typeof m=="string"&&(m=e.from(m,N||"hex")),new w({size:m.length}).decodeFirst(m)}static decodeAll(m,N){return typeof m=="string"&&(m=e.from(m,N||"hex")),new w({size:m.length}).decodeAll(m)}}return w.decodeFirst=w.decode,rs=w,rs}var ns,Go;function cl(){if(Go)return ns;Go=1;const{Buffer:e}=Oi(),t=Pc(),r=Qs();class n extends t{createTag(f,a){return`${f}(${a})`}createInt(f){return super.createInt(f).toString()}createInt32(f,a){return super.createInt32(f,a).toString()}createInt64(f,a,h,w){return super.createInt64(f,a,h,w).toString()}createInt32Neg(f,a){return super.createInt32Neg(f,a).toString()}createInt64Neg(f,a,h,w){return super.createInt64Neg(f,a,h,w).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(f){const a=super.createFloat(f);return r.isNegativeZero(f)?"-0_1":`${a}_1`}createFloatSingle(f,a,h,w){return`${super.createFloatSingle(f,a,h,w)}_2`}createFloatDouble(f,a,h,w,E,m,N,x){return`${super.createFloatDouble(f,a,h,w,E,m,N,x)}_3`}createByteString(f,a){const h=f.join(", ");return a===-1?`(_ ${h})`:`h'${h}`}createByteStringFromHeap(f,a){return`h'${e.from(super.createByteStringFromHeap(f,a)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(f){return`simple(${f})`}createArray(f,a){const h=super.createArray(f,a);return a===-1?`[_ ${h.join(", ")}]`:`[${h.join(", ")}]`}createMap(f,a){const h=super.createMap(f),w=Array.from(h.keys()).reduce(o(h),"");return a===-1?`{_ ${w}}`:`{${w}}`}createObject(f,a){const h=super.createObject(f),w=Object.keys(h).reduce(o(h),"");return a===-1?`{_ ${w}}`:`{${w}}`}createUtf8String(f,a){const h=f.join(", ");return a===-1?`(_ ${h})`:`"${h}"`}createUtf8StringFromHeap(f,a){return`"${e.from(super.createUtf8StringFromHeap(f,a)).toString("utf8")}"`}static diagnose(f,a){return typeof f=="string"&&(f=e.from(f,a||"hex")),new n().decodeFirst(f)}}ns=n;function o(u){return(f,a)=>f?`${f}, ${a}: ${u[a]}`:`${a}: ${u[a]}`}return ns}var is,Ho;function ul(){if(Ho)return is;Ho=1;const{Buffer:e}=Oi(),{URL:t}=kc(),r=Ii().BigNumber,n=Qs(),o=Fi(),u=o.MT,f=o.NUMBYTES,a=o.SHIFT32,h=o.SYMS,w=o.TAG,E=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.TWO,m=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.FOUR,N=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.EIGHT,x=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.TRUE,p=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.FALSE,O=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.UNDEFINED,q=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.NULL,K=new r("0x20000000000000"),D=e.from("f97e00","hex"),V=e.from("f9fc00","hex"),te=e.from("f97c00","hex");function I(J){return{}.toString.call(J).slice(8,-1)}class W{constructor(F){F=F||{},this.streaming=typeof F.stream=="function",this.onData=F.stream,this.semanticTypes=[[t,this._pushUrl],[r,this._pushBigNumber]];const P=F.genTypes||[],G=P.length;for(let X=0;X<G;X++)this.addSemanticType(P[X][0],P[X][1]);this._reset()}addSemanticType(F,P){const G=this.semanticTypes.length;for(let X=0;X<G;X++)if(this.semanticTypes[X][0]===F){const _=this.semanticTypes[X][1];return this.semanticTypes[X][1]=P,_}return this.semanticTypes.push([F,P]),null}push(F){return F&&(this.result[this.offset]=F,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=F.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(F,P,G){return this.result[this.offset]=F,this.resultMethod[this.offset]=P,this.resultLength[this.offset]=G,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(F){return this.pushWrite(F,1,1)}_pushUInt16BE(F){return this.pushWrite(F,2,2)}_pushUInt32BE(F){return this.pushWrite(F,3,4)}_pushDoubleBE(F){return this.pushWrite(F,4,8)}_pushNaN(){return this.push(D)}_pushInfinity(F){const P=F<0?V:te;return this.push(P)}_pushFloat(F){const P=e.allocUnsafe(2);if(n.writeHalf(P,F)&&n.parseHalf(P)===F)return this._pushUInt8(E)&&this.push(P);const G=e.allocUnsafe(4);return G.writeFloatBE(F,0),G.readFloatBE(0)===F?this._pushUInt8(m)&&this.push(G):this._pushUInt8(N)&&this._pushDoubleBE(F)}_pushInt(F,P,G){const X=P<<5;return F<24?this._pushUInt8(X|F):F<=255?this._pushUInt8(X|f.ONE)&&this._pushUInt8(F):F<=65535?this._pushUInt8(X|f.TWO)&&this._pushUInt16BE(F):F<=4294967295?this._pushUInt8(X|f.FOUR)&&this._pushUInt32BE(F):F<=Number.MAX_SAFE_INTEGER?this._pushUInt8(X|f.EIGHT)&&this._pushUInt32BE(Math.floor(F/a))&&this._pushUInt32BE(F%a):P===u.NEG_INT?this._pushFloat(G):this._pushFloat(F)}_pushIntNum(F){return F<0?this._pushInt(-F-1,u.NEG_INT,F):this._pushInt(F,u.POS_INT)}_pushNumber(F){switch(!1){case F===F:return this._pushNaN(F);case isFinite(F):return this._pushInfinity(F);case F%1!==0:return this._pushIntNum(F);default:return this._pushFloat(F)}}_pushString(F){const P=e.byteLength(F,"utf8");return this._pushInt(P,u.UTF8_STRING)&&this.pushWrite(F,5,P)}_pushBoolean(F){return this._pushUInt8(F?x:p)}_pushUndefined(F){return this._pushUInt8(O)}_pushArray(F,P){const G=P.length;if(!F._pushInt(G,u.ARRAY))return!1;for(let X=0;X<G;X++)if(!F.pushAny(P[X]))return!1;return!0}_pushTag(F){return this._pushInt(F,u.TAG)}_pushDate(F,P){return F._pushTag(w.DATE_EPOCH)&&F.pushAny(Math.round(P/1e3))}_pushBuffer(F,P){return F._pushInt(P.length,u.BYTE_STRING)&&F.push(P)}_pushNoFilter(F,P){return F._pushBuffer(F,P.slice())}_pushRegexp(F,P){return F._pushTag(w.REGEXP)&&F.pushAny(P.source)}_pushSet(F,P){if(!F._pushInt(P.size,u.ARRAY))return!1;for(const G of P)if(!F.pushAny(G))return!1;return!0}_pushUrl(F,P){return F._pushTag(w.URI)&&F.pushAny(P.format())}_pushBigint(F){let P=w.POS_BIGINT;F.isNegative()&&(F=F.negated().minus(1),P=w.NEG_BIGINT);let G=F.toString(16);G.length%2&&(G="0"+G);const X=e.from(G,"hex");return this._pushTag(P)&&this._pushBuffer(this,X)}_pushBigNumber(F,P){if(P.isNaN())return F._pushNaN();if(!P.isFinite())return F._pushInfinity(P.isNegative()?-1/0:1/0);if(P.isInteger())return F._pushBigint(P);if(!(F._pushTag(w.DECIMAL_FRAC)&&F._pushInt(2,u.ARRAY)))return!1;const G=P.decimalPlaces(),X=P.multipliedBy(new r(10).pow(G));return F._pushIntNum(-G)?X.abs().isLessThan(K)?F._pushIntNum(X.toNumber()):F._pushBigint(X):!1}_pushMap(F,P){return F._pushInt(P.size,u.MAP)?this._pushRawMap(P.size,Array.from(P)):!1}_pushObject(F){if(!F)return this._pushUInt8(q);for(var P=this.semanticTypes.length,G=0;G<P;G++)if(F instanceof this.semanticTypes[G][0])return this.semanticTypes[G][1].call(F,this,F);var X=F.encodeCBOR;if(typeof X=="function")return X.call(F,this);var re=Object.keys(F),_=re.length;return this._pushInt(_,u.MAP)?this._pushRawMap(_,re.map(R=>[R,F[R]])):!1}_pushRawMap(F,P){P=P.map(function(X){return X[0]=W.encode(X[0]),X}).sort(n.keySorter);for(var G=0;G<F;G++)if(!this.push(P[G][0])||!this.pushAny(P[G][1]))return!1;return!0}write(F){return this.pushAny(F)}pushAny(F){var P=I(F);switch(P){case"Number":return this._pushNumber(F);case"String":return this._pushString(F);case"Boolean":return this._pushBoolean(F);case"Object":return this._pushObject(F);case"Array":return this._pushArray(this,F);case"Uint8Array":return this._pushBuffer(this,e.isBuffer(F)?F:e.from(F));case"Null":return this._pushUInt8(q);case"Undefined":return this._pushUndefined(F);case"Map":return this._pushMap(this,F);case"Set":return this._pushSet(this,F);case"URL":return this._pushUrl(this,F);case"BigNumber":return this._pushBigNumber(this,F);case"Date":return this._pushDate(this,F);case"RegExp":return this._pushRegexp(this,F);case"Symbol":switch(F){case h.NULL:return this._pushObject(null);case h.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+F.toString())}default:throw new Error("Unknown type: "+typeof F+", "+(F?F.toString():""))}}finalize(){if(this.offset===0)return null;for(var F=this.result,P=this.resultLength,G=this.resultMethod,X=this.offset,re=0,_=0;_<X;_++)re+=P[_];var R=e.allocUnsafe(re),M=0,Y=0;for(_=0;_<X;_++){switch(Y=P[_],G[_]){case 0:F[_].copy(R,M);break;case 1:R.writeUInt8(F[_],M,!0);break;case 2:R.writeUInt16BE(F[_],M,!0);break;case 3:R.writeUInt32BE(F[_],M,!0);break;case 4:R.writeDoubleBE(F[_],M,!0);break;case 5:R.write(F[_],M,Y,"utf8");break;default:throw new Error("unkown method")}M+=Y}var ee=R;return this._reset(),ee}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(F){const P=new W;if(!P.pushAny(F))throw new Error("Failed to encode input");return P.finalize()}}return is=W,is}var Lo;function fl(){return Lo||(Lo=1,function(e){e.Diagnose=cl(),e.Decoder=Pc(),e.Encoder=ul(),e.Simple=Ic(),e.Tagged=Fc(),e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}}(Di)),Di}var ll=fl();const Cc=df(ll);function gt(e){return dn(jf.create().update(new Uint8Array(e)).digest())}function zn(e){if(e instanceof Cc.Tagged)return zn(e.value);if(typeof e=="string")return Vc(e);if(typeof e=="number")return gt(Ve(e));if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return gt(e);if(Array.isArray(e)){const t=e.map(zn);return gt(mt(...t))}else{if(e&&typeof e=="object"&&e._isPrincipal)return gt(e.toUint8Array());if(typeof e=="object"&&e!==null&&typeof e.toHash=="function")return zn(e.toHash());if(typeof e=="object")return pi(e);if(typeof e=="bigint")return gt(Ve(e))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${e}`),{value:e})}const Vc=e=>{const t=new TextEncoder().encode(e);return gt(t)};function _n(e){return pi(e)}function pi(e){const n=Object.entries(e).filter(([,f])=>f!==void 0).map(([f,a])=>{const h=Vc(f),w=zn(a);return[h,w]}).sort(([f],[a])=>Ka(f,a)),o=mt(...n.map(f=>mt(...f)));return gt(o)}var dl=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const hl=new TextEncoder().encode(`
ic-request`);class eo{getPrincipal(){return this._principal||(this._principal=Ee.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(t){const{body:r}=t,n=dl(t,["body"]),o=_n(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(mt(hl,o))}})}}class wn{getPrincipal(){return Ee.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}}var rn={},Ot={},ke={},jo;function Mc(){if(jo)return ke;jo=1,Object.defineProperty(ke,"__esModule",{value:!0});const e=9007199254740992;function t(_,...R){const M=new Uint8Array(_.byteLength+R.reduce((ee,ne)=>ee+ne.byteLength,0));M.set(new Uint8Array(_),0);let Y=_.byteLength;for(const ee of R)M.set(new Uint8Array(ee),Y),Y+=ee.byteLength;return M.buffer}function r(_,R,M){M=M.replace(/[^0-9a-fA-F]/g,"");const Y=2**(R-24);M=M.slice(-Y*2).padStart(Y*2,"0");const ee=[(_<<5)+R].concat(M.match(/../g).map(ne=>parseInt(ne,16)));return new Uint8Array(ee).buffer}function n(_,R){if(R<24)return new Uint8Array([(_<<5)+R]).buffer;{const M=R<=255?24:R<=65535?25:R<=4294967295?26:27;return r(_,M,R.toString(16))}}function o(_){const R=[];for(let M=0;M<_.length;M++){let Y=_.charCodeAt(M);Y<128?R.push(Y):Y<2048?R.push(192|Y>>6,128|Y&63):Y<55296||Y>=57344?R.push(224|Y>>12,128|Y>>6&63,128|Y&63):(M++,Y=(Y&1023)<<10|_.charCodeAt(M)&1023,R.push(240|Y>>18,128|Y>>12&63,128|Y>>6&63,128|Y&63))}return t(new Uint8Array(n(3,_.length)),new Uint8Array(R))}function u(_,R){if(_==14277111)return t(new Uint8Array([217,217,247]),R);if(_<24)return t(new Uint8Array([192+_]),R);{const M=_<=255?24:_<=65535?25:_<=4294967295?26:27,Y=2**(M-24),ee=_.toString(16).slice(-Y*2).padStart(Y*2,"0"),ne=[192+M].concat(ee.match(/../g).map(le=>parseInt(le,16)));return new Uint8Array(ne).buffer}}ke.tagged=u;function f(_){return new Uint8Array(_).buffer}ke.raw=f;function a(_){if(isNaN(_))throw new RangeError("Invalid number.");_=Math.min(Math.max(0,_),23);const R=[0+_];return new Uint8Array(R).buffer}ke.uSmall=a;function h(_,R){if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,_),255),_=_.toString(16),r(0,24,_)}ke.u8=h;function w(_,R){if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,_),65535),_=_.toString(16),r(0,25,_)}ke.u16=w;function E(_,R){if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,_),4294967295),_=_.toString(16),r(0,26,_)}ke.u32=E;function m(_,R){if(typeof _=="string"&&R==16){if(_.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return r(0,27,_)}if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,_),e),_=_.toString(16),r(0,27,_)}ke.u64=m;function N(_){if(isNaN(_))throw new RangeError("Invalid number.");if(_===0)return a(0);_=Math.min(Math.max(0,-_),24)-1;const R=[32+_];return new Uint8Array(R).buffer}ke.iSmall=N;function x(_,R){if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,-_-1),255),_=_.toString(16),r(1,24,_)}ke.i8=x;function p(_,R){if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,-_-1),65535),_=_.toString(16),r(1,25,_)}ke.i16=p;function O(_,R){if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,-_-1),4294967295),_=_.toString(16),r(1,26,_)}ke.i32=O;function q(_,R){if(typeof _=="string"&&R==16){if(_.startsWith("-")?_=_.slice(1):_="0",_.match(/[^0-9a-fA-F]/)||_.length>16)throw new RangeError("Invalid number.");let M=!1,Y=_.split("").reduceRight((ee,ne)=>{if(M)return ne+ee;let le=parseInt(ne,16)-1;return le>=0?(M=!0,le.toString(16)+ee):"f"+ee},"");return M?r(1,27,Y):m(0)}if(_=parseInt(""+_,R),isNaN(_))throw new RangeError("Invalid number.");return _=Math.min(Math.max(0,-_-1),9007199254740992),_=_.toString(16),r(1,27,_)}ke.i64=q;function K(_){return _>=0?_<24?a(_):_<=255?h(_):_<=65535?w(_):_<=4294967295?E(_):m(_):_>=-24?N(_):_>=-255?x(_):_>=-65535?p(_):_>=-4294967295?O(_):q(_)}ke.number=K;function D(_){return t(n(2,_.byteLength),_)}ke.bytes=D;function V(_){return o(_)}ke.string=V;function te(_){return t(n(4,_.length),..._)}ke.array=te;function I(_,R=!1){_ instanceof Map||(_=new Map(Object.entries(_)));let M=Array.from(_.entries());return R&&(M=M.sort(([Y],[ee])=>Y.localeCompare(ee))),t(n(5,_.size),...M.map(([Y,ee])=>t(o(Y),ee)))}ke.map=I;function W(_){const R=new Float32Array([_]);return t(new Uint8Array([250]),new Uint8Array(R.buffer))}ke.singleFloat=W;function J(_){const R=new Float64Array([_]);return t(new Uint8Array([251]),new Uint8Array(R.buffer))}ke.doubleFloat=J;function F(_){return _?P():G()}ke.bool=F;function P(){return f(new Uint8Array([245]))}ke.true_=P;function G(){return f(new Uint8Array([244]))}ke.false_=G;function X(){return f(new Uint8Array([246]))}ke.null_=X;function re(){return f(new Uint8Array([247]))}return ke.undefined_=re,ke}var zo;function pl(){if(zo)return Ot;zo=1;var e=Ot&&Ot.__importStar||function(a){if(a&&a.__esModule)return a;var h={};if(a!=null)for(var w in a)Object.hasOwnProperty.call(a,w)&&(h[w]=a[w]);return h.default=a,h};Object.defineProperty(Ot,"__esModule",{value:!0});const t=e(Mc()),r=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class n{constructor(h,w=!1){this._serializer=h,this._stable=w,this.name="jsonDefault",this.priority=-100}match(h){return["undefined","boolean","number","string","object"].indexOf(typeof h)!=-1}encode(h){switch(typeof h){case"undefined":return t.undefined_();case"boolean":return t.bool(h);case"number":return Math.floor(h)===h?t.number(h):t.doubleFloat(h);case"string":return t.string(h);case"object":if(h===null)return t.null_();if(Array.isArray(h))return t.array(h.map(w=>this._serializer.serializeValue(w)));if(r.find(w=>h instanceof w))return t.bytes(h.buffer);if(Object.getOwnPropertyNames(h).indexOf("toJSON")!==-1)return this.encode(h.toJSON());if(h instanceof Map){const w=new Map;for(const[E,m]of h.entries())w.set(E,this._serializer.serializeValue(m));return t.map(w,this._stable)}else{const w=new Map;for(const[E,m]of Object.entries(h))w.set(E,this._serializer.serializeValue(m));return t.map(w,this._stable)}default:throw new Error("Invalid value.")}}}Ot.JsonDefaultCborEncoder=n;class o{constructor(){this.name="cborEncoder",this.priority=-90}match(h){return typeof h=="object"&&typeof h.toCBOR=="function"}encode(h){return h.toCBOR()}}Ot.ToCborEncoder=o;class u{constructor(){this._encoders=new Set}static withDefaultEncoders(h=!1){const w=new this;return w.addEncoder(new n(w,h)),w.addEncoder(new o),w}removeEncoder(h){for(const w of this._encoders.values())w.name==h&&this._encoders.delete(w)}addEncoder(h){this._encoders.add(h)}getEncoderFor(h){let w=null;for(const E of this._encoders)(!w||E.priority>w.priority)&&E.match(h)&&(w=E);if(w===null)throw new Error("Could not find an encoder for value.");return w}serializeValue(h){return this.getEncoderFor(h).encode(h)}serialize(h){return this.serializeValue(h)}}Ot.CborSerializer=u;class f extends u{serialize(h){return t.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(h))]))}}return Ot.SelfDescribeCborSerializer=f,Ot}var Ko;function yl(){return Ko||(Ko=1,function(e){function t(o){for(var u in o)e.hasOwnProperty(u)||(e[u]=o[u])}var r=rn&&rn.__importStar||function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var f in o)Object.hasOwnProperty.call(o,f)&&(u[f]=o[f]);return u.default=o,u};Object.defineProperty(e,"__esModule",{value:!0}),t(pl());const n=r(Mc());e.value=n}(rn)),rn}var ct=yl();class gl{get name(){return"Principal"}get priority(){return 0}match(t){return t&&t._isPrincipal===!0}encode(t){return ct.value.bytes(t.toUint8Array())}}class ml{get name(){return"Buffer"}get priority(){return 1}match(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}encode(t){return ct.value.bytes(new Uint8Array(t))}}class _l{get name(){return"BigInt"}get priority(){return 1}match(t){return typeof t=="bigint"}encode(t){return t>BigInt(0)?ct.value.tagged(2,ct.value.bytes($t(t.toString(16)))):ct.value.tagged(3,ct.value.bytes($t((BigInt("-1")*t).toString(16))))}}const Ui=ct.SelfDescribeCborSerializer.withDefaultEncoders(!0);Ui.addEncoder(new gl);Ui.addEncoder(new ml);Ui.addEncoder(new _l);var Is;(function(e){e[e.Uint64LittleEndian=71]="Uint64LittleEndian",e[e.Semantic=55799]="Semantic"})(Is||(Is={}));function ss(e){return Ui.serialize(e)}function Do(e){const t=e.byteLength;let r=BigInt(0);for(let n=0;n<t;n++)r=r*BigInt(256)+BigInt(e[n]);return r}class wl extends Cc.Decoder{createByteString(t){return mt(...t)}createByteStringFromHeap(t,r){return t===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(t,r))}}function Vt(e){const t=new Uint8Array(e),r=new wl({size:t.byteLength,tags:{2:n=>Do(n),3:n=>-Do(n),[Is.Semantic]:n=>n}});try{return r.decodeFirst(t)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${Pe(t)}`)}}const Vn=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Fs;(function(e){e.Call="call"})(Fs||(Fs={}));function Us(){const e=new ArrayBuffer(16),t=new DataView(e),r=Vn(),n=Vn(),o=Vn(),u=Vn();return t.setUint32(0,r),t.setUint32(4,n),t.setUint32(8,o),t.setUint32(12,u),e}const Yo=BigInt(1e6),bl=60*1e3;class Mn{constructor(t){if(t<90*1e3){const a=BigInt(Date.now()+t)*Yo/BigInt(1e9);this._value=a*BigInt(1e9);return}const u=BigInt(Math.floor(Date.now()+t-bl))*Yo/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=u}toCBOR(){return ct.value.u64(this._value.toString(16),16)}toHash(){return Ve(this._value)}}function Wo(e=Us){return async t=>{const r=t.request.headers;t.request.headers=r,t.endpoint==="call"&&(t.body.nonce=e())}}function sn(e){const t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}class os extends Ce{constructor(t,r){super(t),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class xl extends Ce{constructor(t,r,n,o,u,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=o,this.senderSig=u,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class El extends Ce{constructor(t,r,n,o,u,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=o,this.senderSig=u,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class vl extends Ce{constructor(t,r,n,o,u,f){super(t),this.response=r,this.requestId=n,this.senderPubkey=o,this.senderSig=u,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const to=BigInt(0),yi=BigInt(1);function bn(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function $c(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?to:BigInt("0x"+e)}function At(e){return $c(Yr(e))}function xn(e){return Ze(e),$c(Yr(Uint8Array.from(e).reverse()))}function Ye(e,t){return qa(e.toString(16).padStart(t*2,"0"))}function ki(e,t){return Ye(e,t).reverse()}function it(e,t,r){let n;if(typeof t=="string")try{n=qa(t)}catch(u){throw new Error(e+" must be hex string or Uint8Array, cause: "+u)}else if(Ds(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=n.length;if(typeof r=="number"&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n}const as=e=>typeof e=="bigint"&&to<=e;function qc(e,t,r){return as(e)&&as(t)&&as(r)&&t<=e&&e<r}function on(e,t,r,n){if(!qc(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function hn(e){let t;for(t=0;e>to;e>>=yi,t+=1);return t}function Nl(e,t){return e>>BigInt(t)&yi}const zr=e=>(yi<<BigInt(e))-yi;function Bl(e){return typeof e=="function"&&Number.isSafeInteger(e.outputLen)}function Rn(e,t,r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(o,u,f){const a=e[o];if(f&&a===void 0)return;const h=typeof a;if(h!==u||a===null)throw new Error(`param "${o}" is invalid: expected ${u}, got ${h}`)}Object.entries(t).forEach(([o,u])=>n(o,u,!1)),Object.entries(r).forEach(([o,u])=>n(o,u,!0))}const Zo=()=>{throw new Error("not implemented")};function En(e){const t=new WeakMap;return(r,...n)=>{const o=t.get(r);if(o!==void 0)return o;const u=e(r,...n);return t.set(r,u),u}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const at=BigInt(0),We=BigInt(1),mr=BigInt(2),Tl=BigInt(3),Gc=BigInt(4),Hc=BigInt(5),Lc=BigInt(8);function Ge(e,t){const r=e%t;return r>=at?r:t+r}function wt(e,t,r){let n=e;for(;t-- >at;)n*=n,n%=r;return n}function Xo(e,t){if(e===at)throw new Error("invert: expected non-zero number");if(t<=at)throw new Error("invert: expected positive modulus, got "+t);let r=Ge(e,t),n=t,o=at,u=We;for(;r!==at;){const a=n/r,h=n%r,w=o-u*a;n=r,r=h,o=u,u=w}if(n!==We)throw new Error("invert: does not exist");return Ge(o,t)}function jc(e,t){const r=(e.ORDER+We)/Gc,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}function Al(e,t){const r=(e.ORDER-Hc)/Lc,n=e.mul(t,mr),o=e.pow(n,r),u=e.mul(t,o),f=e.mul(e.mul(u,mr),o),a=e.mul(u,e.sub(f,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function Sl(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-We,r=0;for(;t%mr===at;)t/=mr,r++;let n=mr;const o=Sr(e);for(;gi(o,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return jc;let u=o.pow(n,t);const f=(t+We)/mr;return function(h,w){if(h.is0(w))return w;if(gi(h,w)!==1)throw new Error("Cannot find square root");let E=r,m=h.mul(h.ONE,u),N=h.pow(w,t),x=h.pow(w,f);for(;!h.eql(N,h.ONE);){if(h.is0(N))return h.ZERO;let p=1,O=h.sqr(N);for(;!h.eql(O,h.ONE);)if(p++,O=h.sqr(O),p===E)throw new Error("Cannot find square root");const q=We<<BigInt(E-p-1),K=h.pow(m,q);E=p,m=h.sqr(K),N=h.mul(N,m),x=h.mul(x,K)}return x}}function Rl(e){return e%Gc===Tl?jc:e%Lc===Hc?Al:Sl(e)}const Ol=(e,t)=>(Ge(e,t)&We)===We,Il=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zc(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Il.reduce((n,o)=>(n[o]="function",n),t);return Rn(e,r),e}function Kn(e,t,r){if(r<at)throw new Error("invalid exponent, negatives unsupported");if(r===at)return e.ONE;if(r===We)return t;let n=e.ONE,o=t;for(;r>at;)r&We&&(n=e.mul(n,o)),o=e.sqr(o),r>>=We;return n}function br(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((f,a,h)=>e.is0(a)?f:(n[h]=f,e.mul(f,a)),e.ONE),u=e.inv(o);return t.reduceRight((f,a,h)=>e.is0(a)?f:(n[h]=e.mul(f,n[h]),e.mul(f,a)),u),n}function gi(e,t){const r=(e.ORDER-We)/mr,n=e.pow(t,r),o=e.eql(n,e.ONE),u=e.eql(n,e.ZERO),f=e.eql(n,e.neg(e.ONE));if(!o&&!u&&!f)throw new Error("invalid Legendre symbol result");return o?1:u?0:-1}function Fl(e,t){t!==void 0&&Ef(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Sr(e,t,r=!1,n={}){if(e<=at)throw new Error("invalid field: expected ORDER > 0, got "+e);let o,u;if(typeof t=="object"&&t!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const E=t;E.BITS&&(o=E.BITS),E.sqrt&&(u=E.sqrt),typeof E.isLE=="boolean"&&(r=E.isLE)}else typeof t=="number"&&(o=t),n.sqrt&&(u=n.sqrt);const{nBitLength:f,nByteLength:a}=Fl(e,o);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const w=Object.freeze({ORDER:e,isLE:r,BITS:f,BYTES:a,MASK:zr(f),ZERO:at,ONE:We,create:E=>Ge(E,e),isValid:E=>{if(typeof E!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof E);return at<=E&&E<e},is0:E=>E===at,isValidNot0:E=>!w.is0(E)&&w.isValid(E),isOdd:E=>(E&We)===We,neg:E=>Ge(-E,e),eql:(E,m)=>E===m,sqr:E=>Ge(E*E,e),add:(E,m)=>Ge(E+m,e),sub:(E,m)=>Ge(E-m,e),mul:(E,m)=>Ge(E*m,e),pow:(E,m)=>Kn(w,E,m),div:(E,m)=>Ge(E*Xo(m,e),e),sqrN:E=>E*E,addN:(E,m)=>E+m,subN:(E,m)=>E-m,mulN:(E,m)=>E*m,inv:E=>Xo(E,e),sqrt:u||(E=>(h||(h=Rl(e)),h(w,E))),toBytes:E=>r?ki(E,a):Ye(E,a),fromBytes:E=>{if(E.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+E.length);return r?xn(E):At(E)},invertBatch:E=>br(w,E),cmov:(E,m,N)=>N?m:E});return Object.freeze(w)}function Kc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Dc(e){const t=Kc(e);return t+Math.ceil(t/2)}function Ul(e,t,r=!1){const n=e.length,o=Kc(t),u=Dc(t);if(n<16||n<u||n>1024)throw new Error("expected "+u+"-1024 bytes of input, got "+n);const f=r?xn(e):At(e),a=Ge(f,t-We)+We;return r?ki(a,o):Ye(a,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zr=BigInt(0),_r=BigInt(1);function pn(e,t){const r=t.negate();return e?r:t}function mi(e,t,r){const n=t==="pz"?f=>f.pz:f=>f.ez,o=br(e.Fp,r.map(n));return r.map((f,a)=>f.toAffine(o[a])).map(e.fromAffine)}function Yc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function cs(e,t){Yc(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),o=2**e,u=zr(e),f=BigInt(e);return{windows:r,windowSize:n,mask:u,maxNumber:o,shiftBy:f}}function Jo(e,t,r){const{windowSize:n,mask:o,maxNumber:u,shiftBy:f}=r;let a=Number(e&o),h=e>>f;a>n&&(a-=u,h+=_r);const w=t*n,E=w+Math.abs(a)-1,m=a===0,N=a<0,x=t%2!==0;return{nextN:h,offset:E,isZero:m,isNeg:N,isNegF:x,offsetF:w}}function kl(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function Pl(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const us=new WeakMap,Wc=new WeakMap;function fs(e){return Wc.get(e)||1}function Qo(e){if(e!==Zr)throw new Error("invalid wNAF")}function Zc(e,t){return{constTimeNegate:pn,hasPrecomputes(r){return fs(r)!==1},unsafeLadder(r,n,o=e.ZERO){let u=r;for(;n>Zr;)n&_r&&(o=o.add(u)),u=u.double(),n>>=_r;return o},precomputeWindow(r,n){const{windows:o,windowSize:u}=cs(n,t),f=[];let a=r,h=a;for(let w=0;w<o;w++){h=a,f.push(h);for(let E=1;E<u;E++)h=h.add(a),f.push(h);a=h.double()}return f},wNAF(r,n,o){let u=e.ZERO,f=e.BASE;const a=cs(r,t);for(let h=0;h<a.windows;h++){const{nextN:w,offset:E,isZero:m,isNeg:N,isNegF:x,offsetF:p}=Jo(o,h,a);o=w,m?f=f.add(pn(x,n[p])):u=u.add(pn(N,n[E]))}return Qo(o),{p:u,f}},wNAFUnsafe(r,n,o,u=e.ZERO){const f=cs(r,t);for(let a=0;a<f.windows&&o!==Zr;a++){const{nextN:h,offset:w,isZero:E,isNeg:m}=Jo(o,a,f);if(o=h,!E){const N=n[w];u=u.add(m?N.negate():N)}}return Qo(o),u},getPrecomputes(r,n,o){let u=us.get(n);return u||(u=this.precomputeWindow(n,r),r!==1&&(typeof o=="function"&&(u=o(u)),us.set(n,u))),u},wNAFCached(r,n,o){const u=fs(r);return this.wNAF(u,this.getPrecomputes(u,r,o),n)},wNAFCachedUnsafe(r,n,o,u){const f=fs(r);return f===1?this.unsafeLadder(r,n,u):this.wNAFUnsafe(f,this.getPrecomputes(f,r,o),n,u)},setWindowSize(r,n){Yc(n,t),Wc.set(r,n),us.delete(r)}}}function Cl(e,t,r,n){let o=t,u=e.ZERO,f=e.ZERO;for(;r>Zr||n>Zr;)r&_r&&(u=u.add(o)),n&_r&&(f=f.add(o)),o=o.double(),r>>=_r,n>>=_r;return{p1:u,p2:f}}function Xc(e,t,r,n){kl(r,e),Pl(n,t);const o=r.length,u=n.length;if(o!==u)throw new Error("arrays of points and scalars must have equal length");const f=e.ZERO,a=hn(BigInt(o));let h=1;a>12?h=a-3:a>4?h=a-2:a>0&&(h=2);const w=zr(h),E=new Array(Number(w)+1).fill(f),m=Math.floor((t.BITS-1)/h)*h;let N=f;for(let x=m;x>=0;x-=h){E.fill(f);for(let O=0;O<u;O++){const q=n[O],K=Number(q>>BigInt(x)&w);E[K]=E[K].add(r[O])}let p=f;for(let O=E.length-1,q=f;O>0;O--)q=q.add(E[O]),p=p.add(q);if(N=N.add(p),x!==0)for(let O=0;O<h;O++)N=N.double()}return N}function ea(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return zc(t),t}else return Sr(e)}function Jc(e,t,r={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const h=t[a];if(!(typeof h=="bigint"&&h>Zr))throw new Error(`CURVE.${a} must be positive bigint`)}const n=ea(t.p,r.Fp),o=ea(t.n,r.Fn),f=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const a of f)if(!n.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:o}}const Vl=At;function Zt(e,t){if(vn(e),vn(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function Ml(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function vn(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function $l(e,t,r,n){Ze(e),Ze(t),vn(r),t.length>255&&(t=n(Me(Bi("H2C-OVERSIZE-DST-"),t)));const{outputLen:o,blockLen:u}=n,f=Math.ceil(r/o);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=Me(t,Zt(t.length,1)),h=Zt(0,u),w=Zt(r,2),E=new Array(f),m=n(Me(h,e,w,Zt(0,1),a));E[0]=n(Me(m,Zt(1,1),a));for(let x=1;x<=f;x++){const p=[Ml(m,E[x-1]),Zt(x+1,1),a];E[x]=n(Me(...p))}return Me(...E).slice(0,r)}function ql(e,t,r,n,o){if(Ze(e),Ze(t),vn(r),t.length>255){const u=Math.ceil(2*n/8);t=o.create({dkLen:u}).update(Bi("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:r}).update(e).update(Zt(r,2)).update(t).update(Zt(t.length,1)).digest()}function ta(e,t,r){Rn(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:o,m:u,hash:f,expand:a,DST:h}=r;if(!Ds(h)&&typeof h!="string")throw new Error("DST must be string or uint8array");if(!Bl(r.hash))throw new Error("expected valid hash");Ze(e),vn(t);const w=typeof h=="string"?Bi(h):h,E=n.toString(2).length,m=Math.ceil((E+o)/8),N=t*u*m;let x;if(a==="xmd")x=$l(e,w,N,f);else if(a==="xof")x=ql(e,w,N,o,f);else if(a==="_internal_pass")x=e;else throw new Error('expand must be "xmd" or "xof"');const p=new Array(t);for(let O=0;O<t;O++){const q=new Array(u);for(let K=0;K<u;K++){const D=m*(K+O*u),V=x.subarray(D,D+m);q[K]=Ge(Vl(V),n)}p[O]=q}return p}function Qc(e,t){const r=t.map(n=>Array.from(n).reverse());return(n,o)=>{const[u,f,a,h]=r.map(m=>m.reduce((N,x)=>e.add(e.mul(N,n),x))),[w,E]=br(e,[f,h],!0);return n=e.mul(u,w),o=e.mul(o,e.mul(a,E)),{x:n,y:o}}}function ra(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function n(u){return e.fromAffine(t(u))}function o(u){const f=u.clearCofactor();return f.equals(e.ZERO)?e.ZERO:(f.assertValidity(),f)}return{defaults:r,hashToCurve(u,f){const a=r.DST?r.DST:{},h=Object.assign({},r,a,f),w=ta(u,2,h),E=n(w[0]),m=n(w[1]);return o(E.add(m))},encodeToCurve(u,f){const a=r.encodeDST?r.encodeDST:{},h=Object.assign({},r,a,f),w=ta(u,1,h);return o(n(w[0]))},mapToCurve(u){if(!Array.isArray(u))throw new Error("expected array of bigints");for(const f of u)if(typeof f!="bigint")throw new Error("expected array of bigints");return o(n(u))}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ks=BigInt(0),ot=BigInt(1),Kt=BigInt(2),Gr=BigInt(3),Ps=BigInt(4);function eu(e,t,r){function n(o){const u=e.sqr(o),f=e.mul(u,o);return e.add(e.add(f,e.mul(o,t)),r)}return n}function tu(e,t,r){const{BYTES:n}=e;function o(u){let f;if(typeof u=="bigint")f=u;else{let a=it("private key",u);if(t){if(!t.includes(a.length*2))throw new Error("invalid private key");const h=new Uint8Array(n);h.set(a,h.length-a.length),a=h}try{f=e.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof u}`)}}if(r&&(f=e.create(f)),!e.isValidNot0(f))throw new Error("invalid private key: out of range [1..N-1]");return f}return o}function Gl(e,t={}){const{Fp:r,Fn:n}=Jc("weierstrass",e,t),{h:o,n:u}=e;Rn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=t;if(f&&(!r.is0(e.a)||typeof f.beta!="bigint"||typeof f.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(F,P,G){const{x:X,y:re}=P.toAffine(),_=r.toBytes(X);if(bn("isCompressed",G),G){a();const R=!r.isOdd(re);return Me(Hl(R),_)}else return Me(Uint8Array.of(4),_,r.toBytes(re))}function w(F){Ze(F);const P=r.BYTES,G=P+1,X=2*P+1,re=F.length,_=F[0],R=F.subarray(1);if(re===G&&(_===2||_===3)){const M=r.fromBytes(R);if(!r.isValid(M))throw new Error("bad point: is not on curve, wrong x");const Y=N(M);let ee;try{ee=r.sqrt(Y)}catch(ge){const ie=ge instanceof Error?": "+ge.message:"";throw new Error("bad point: is not on curve, sqrt error"+ie)}a();const ne=r.isOdd(ee);return(_&1)===1!==ne&&(ee=r.neg(ee)),{x:M,y:ee}}else if(re===X&&_===4){const M=r.fromBytes(R.subarray(P*0,P*1)),Y=r.fromBytes(R.subarray(P*1,P*2));if(!x(M,Y))throw new Error("bad point: is not on curve");return{x:M,y:Y}}else throw new Error(`bad point: got length ${re}, expected compressed=${G} or uncompressed=${X}`)}const E=t.toBytes||h,m=t.fromBytes||w,N=eu(r,e.a,e.b);function x(F,P){const G=r.sqr(P),X=N(F);return r.eql(G,X)}if(!x(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const p=r.mul(r.pow(e.a,Gr),Ps),O=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(p,O)))throw new Error("bad curve params: a or b");function q(F,P,G=!1){if(!r.isValid(P)||G&&r.is0(P))throw new Error(`bad point coordinate ${F}`);return P}function K(F){if(!(F instanceof I))throw new Error("ProjectivePoint expected")}const D=En((F,P)=>{const{px:G,py:X,pz:re}=F;if(r.eql(re,r.ONE))return{x:G,y:X};const _=F.is0();P==null&&(P=_?r.ONE:r.inv(re));const R=r.mul(G,P),M=r.mul(X,P),Y=r.mul(re,P);if(_)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Y,r.ONE))throw new Error("invZ was invalid");return{x:R,y:M}}),V=En(F=>{if(F.is0()){if(t.allowInfinityPoint&&!r.is0(F.py))return;throw new Error("bad point: ZERO")}const{x:P,y:G}=F.toAffine();if(!r.isValid(P)||!r.isValid(G))throw new Error("bad point: x or y not field elements");if(!x(P,G))throw new Error("bad point: equation left != right");if(!F.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function te(F,P,G,X,re){return G=new I(r.mul(G.px,F),G.py,G.pz),P=pn(X,P),G=pn(re,G),P.add(G)}class I{constructor(P,G,X){this.px=q("x",P),this.py=q("y",G,!0),this.pz=q("z",X),Object.freeze(this)}static fromAffine(P){const{x:G,y:X}=P||{};if(!P||!r.isValid(G)||!r.isValid(X))throw new Error("invalid affine point");if(P instanceof I)throw new Error("projective point not allowed");return r.is0(G)&&r.is0(X)?I.ZERO:new I(G,X,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){return mi(I,"pz",P)}static fromBytes(P){return Ze(P),I.fromHex(P)}static fromHex(P){const G=I.fromAffine(m(it("pointHex",P)));return G.assertValidity(),G}static fromPrivateKey(P){const G=tu(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return I.BASE.multiply(G(P))}static msm(P,G){return Xc(I,n,P,G)}precompute(P=8,G=!0){return J.setWindowSize(this,P),G||this.multiply(Gr),this}_setWindowSize(P){this.precompute(P)}assertValidity(){V(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){K(P);const{px:G,py:X,pz:re}=this,{px:_,py:R,pz:M}=P,Y=r.eql(r.mul(G,M),r.mul(_,re)),ee=r.eql(r.mul(X,M),r.mul(R,re));return Y&&ee}negate(){return new I(this.px,r.neg(this.py),this.pz)}double(){const{a:P,b:G}=e,X=r.mul(G,Gr),{px:re,py:_,pz:R}=this;let M=r.ZERO,Y=r.ZERO,ee=r.ZERO,ne=r.mul(re,re),le=r.mul(_,_),ge=r.mul(R,R),ie=r.mul(re,_);return ie=r.add(ie,ie),ee=r.mul(re,R),ee=r.add(ee,ee),M=r.mul(P,ee),Y=r.mul(X,ge),Y=r.add(M,Y),M=r.sub(le,Y),Y=r.add(le,Y),Y=r.mul(M,Y),M=r.mul(ie,M),ee=r.mul(X,ee),ge=r.mul(P,ge),ie=r.sub(ne,ge),ie=r.mul(P,ie),ie=r.add(ie,ee),ee=r.add(ne,ne),ne=r.add(ee,ne),ne=r.add(ne,ge),ne=r.mul(ne,ie),Y=r.add(Y,ne),ge=r.mul(_,R),ge=r.add(ge,ge),ne=r.mul(ge,ie),M=r.sub(M,ne),ee=r.mul(ge,le),ee=r.add(ee,ee),ee=r.add(ee,ee),new I(M,Y,ee)}add(P){K(P);const{px:G,py:X,pz:re}=this,{px:_,py:R,pz:M}=P;let Y=r.ZERO,ee=r.ZERO,ne=r.ZERO;const le=e.a,ge=r.mul(e.b,Gr);let ie=r.mul(G,_),ae=r.mul(X,R),Ne=r.mul(re,M),S=r.add(G,X),be=r.add(_,R);S=r.mul(S,be),be=r.add(ie,ae),S=r.sub(S,be),be=r.add(G,re);let Be=r.add(_,M);return be=r.mul(be,Be),Be=r.add(ie,Ne),be=r.sub(be,Be),Be=r.add(X,re),Y=r.add(R,M),Be=r.mul(Be,Y),Y=r.add(ae,Ne),Be=r.sub(Be,Y),ne=r.mul(le,be),Y=r.mul(ge,Ne),ne=r.add(Y,ne),Y=r.sub(ae,ne),ne=r.add(ae,ne),ee=r.mul(Y,ne),ae=r.add(ie,ie),ae=r.add(ae,ie),Ne=r.mul(le,Ne),be=r.mul(ge,be),ae=r.add(ae,Ne),Ne=r.sub(ie,Ne),Ne=r.mul(le,Ne),be=r.add(be,Ne),ie=r.mul(ae,be),ee=r.add(ee,ie),ie=r.mul(Be,be),Y=r.mul(S,Y),Y=r.sub(Y,ie),ie=r.mul(S,ae),ne=r.mul(Be,ne),ne=r.add(ne,ie),new I(Y,ee,ne)}subtract(P){return this.add(P.negate())}is0(){return this.equals(I.ZERO)}multiply(P){const{endo:G}=t;if(!n.isValidNot0(P))throw new Error("invalid scalar: out of range");let X,re;const _=R=>J.wNAFCached(this,R,I.normalizeZ);if(G){const{k1neg:R,k1:M,k2neg:Y,k2:ee}=G.splitScalar(P),{p:ne,f:le}=_(M),{p:ge,f:ie}=_(ee);re=le.add(ie),X=te(G.beta,ne,ge,R,Y)}else{const{p:R,f:M}=_(P);X=R,re=M}return I.normalizeZ([X,re])[0]}multiplyUnsafe(P){const{endo:G}=t,X=this;if(!n.isValid(P))throw new Error("invalid scalar: out of range");if(P===ks||X.is0())return I.ZERO;if(P===ot)return X;if(J.hasPrecomputes(this))return this.multiply(P);if(G){const{k1neg:re,k1:_,k2neg:R,k2:M}=G.splitScalar(P),{p1:Y,p2:ee}=Cl(I,X,_,M);return te(G.beta,Y,ee,re,R)}else return J.wNAFCachedUnsafe(X,P)}multiplyAndAddUnsafe(P,G,X){const re=this.multiplyUnsafe(G).add(P.multiplyUnsafe(X));return re.is0()?void 0:re}toAffine(P){return D(this,P)}isTorsionFree(){const{isTorsionFree:P}=t;return o===ot?!0:P?P(I,this):J.wNAFCachedUnsafe(this,u).is0()}clearCofactor(){const{clearCofactor:P}=t;return o===ot?this:P?P(I,this):this.multiplyUnsafe(o)}toBytes(P=!0){return bn("isCompressed",P),this.assertValidity(),E(I,this,P)}toRawBytes(P=!0){return this.toBytes(P)}toHex(P=!0){return Yr(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(e.Gx,e.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO),I.Fp=r,I.Fn=n;const W=n.BITS,J=Zc(I,t.endo?Math.ceil(W/2):W);return I}function na(e){const{CURVE:t,curveOpts:r}=Ll(e),n=Gl(t,r);return jl(e,n)}function Hl(e){return Uint8Array.of(e?2:3)}function Ll(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=Sr(t.n,e.nBitLength),o={Fp:r,Fn:n,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:o}}function jl(e,t){const{Fp:r,Fn:n}=t;function o(a){return qc(a,ot,n.ORDER)}const u=eu(r,e.a,e.b),f=tu(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return Object.assign({},{CURVE:e,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:o})}function zl(e,t){const r=e.ORDER;let n=ks;for(let p=r-ot;p%Kt===ks;p/=Kt)n+=ot;const o=n,u=Kt<<o-ot-ot,f=u*Kt,a=(r-ot)/f,h=(a-ot)/Kt,w=f-ot,E=u,m=e.pow(t,a),N=e.pow(t,(a+ot)/Kt);let x=(p,O)=>{let q=m,K=e.pow(O,w),D=e.sqr(K);D=e.mul(D,O);let V=e.mul(p,D);V=e.pow(V,h),V=e.mul(V,K),K=e.mul(V,O),D=e.mul(V,p);let te=e.mul(D,K);V=e.pow(te,E);let I=e.eql(V,e.ONE);K=e.mul(D,N),V=e.mul(te,q),D=e.cmov(K,D,I),te=e.cmov(V,te,I);for(let W=o;W>ot;W--){let J=W-Kt;J=Kt<<J-ot;let F=e.pow(te,J);const P=e.eql(F,e.ONE);K=e.mul(D,q),q=e.mul(q,q),F=e.mul(te,q),D=e.cmov(K,D,P),te=e.cmov(F,te,P)}return{isValid:I,value:D}};if(e.ORDER%Ps===Gr){const p=(e.ORDER-Gr)/Ps,O=e.sqrt(e.neg(t));x=(q,K)=>{let D=e.sqr(K);const V=e.mul(q,K);D=e.mul(D,V);let te=e.pow(D,p);te=e.mul(te,V);const I=e.mul(te,O),W=e.mul(e.sqr(te),K),J=e.eql(W,q);let F=e.cmov(I,te,J);return{isValid:J,value:F}}}return x}function ru(e,t){zc(e);const{A:r,B:n,Z:o}=t;if(!e.isValid(r)||!e.isValid(n)||!e.isValid(o))throw new Error("mapToCurveSimpleSWU: invalid opts");const u=zl(e,o);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return f=>{let a,h,w,E,m,N,x,p;a=e.sqr(f),a=e.mul(a,o),h=e.sqr(a),h=e.add(h,a),w=e.add(h,e.ONE),w=e.mul(w,n),E=e.cmov(o,e.neg(h),!e.eql(h,e.ZERO)),E=e.mul(E,r),h=e.sqr(w),N=e.sqr(E),m=e.mul(N,r),h=e.add(h,m),h=e.mul(h,w),N=e.mul(N,E),m=e.mul(N,n),h=e.add(h,m),x=e.mul(a,w);const{isValid:O,value:q}=u(h,N);p=e.mul(a,f),p=e.mul(p,q),x=e.cmov(x,w,O),p=e.cmov(p,q,O);const K=e.isOdd(f)===e.isOdd(p);p=e.cmov(e.neg(p),p,K);const D=br(e,[E],!0)[0];return x=e.mul(x,D),{x,y:p}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kl=BigInt(0),$n=BigInt(1),ia=BigInt(2),Hr=BigInt(3);function Dl(e){const t=[];for(;e>$n;e>>=$n)(e&$n)===Kl?t.unshift(0):(e&Hr)===Hr?(t.unshift(-1),e+=$n):t.unshift(1);return t}function Yl(e){const{Fp:t,Fr:r,Fp2:n,Fp6:o,Fp12:u}=e.fields,f=e.params.xNegative,a=e.params.twistType,h=na(e.G1),w=Object.assign(h,ra(h.Point,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),E=na(e.G2),m=Object.assign(E,ra(E.Point,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults}));let N;if(a==="multiplicative")N=(ce,Q,se,B,A,k)=>u.mul014(B,ce,n.mul(Q,A),n.mul(se,k));else if(a==="divisive")N=(ce,Q,se,B,A,k)=>u.mul034(B,n.mul(se,k),n.mul(Q,A),ce);else throw new Error("bls: unknown twist type");const x=n.div(n.ONE,n.mul(n.ONE,ia));function p(ce,Q,se,B){const A=n.sqr(se),k=n.sqr(B),L=n.mulByB(n.mul(k,Hr)),H=n.mul(L,Hr),j=n.sub(n.sub(n.sqr(n.add(se,B)),k),A),g=n.sub(L,A),l=n.mul(n.sqr(Q),Hr),d=n.neg(j);return ce.push([g,l,d]),Q=n.mul(n.mul(n.mul(n.sub(A,H),Q),se),x),se=n.sub(n.sqr(n.mul(n.add(A,H),x)),n.mul(n.sqr(L),Hr)),B=n.mul(A,j),{Rx:Q,Ry:se,Rz:B}}function O(ce,Q,se,B,A,k){const L=n.sub(se,n.mul(k,B)),H=n.sub(Q,n.mul(A,B)),j=n.sub(n.mul(L,A),n.mul(H,k)),g=n.neg(L),l=H;ce.push([j,g,l]);const d=n.sqr(H),b=n.mul(d,H),T=n.mul(d,Q),C=n.add(n.sub(b,n.mul(T,ia)),n.mul(n.sqr(L),B));return Q=n.mul(H,C),se=n.sub(n.mul(n.sub(T,C),L),n.mul(b,se)),B=n.mul(B,b),{Rx:Q,Ry:se,Rz:B}}const q=Dl(e.params.ateLoopSize),K=En(ce=>{const Q=ce,{x:se,y:B}=Q.toAffine(),A=se,k=B,L=n.neg(B);let H=A,j=k,g=n.ONE;const l=[];for(const d of q){const b=[];({Rx:H,Ry:j,Rz:g}=p(b,H,j,g)),d&&({Rx:H,Ry:j,Rz:g}=O(b,H,j,g,A,d===-1?L:k)),l.push(b)}if(e.postPrecompute){const d=l[l.length-1];e.postPrecompute(H,j,g,A,k,O.bind(null,d))}return l});function D(ce,Q=!1){let se=u.ONE;if(ce.length){const B=ce[0][0].length;for(let A=0;A<B;A++){se=u.sqr(se);for(const[k,L,H]of ce)for(const[j,g,l]of k[A])se=N(j,g,l,se,L,H)}}return f&&(se=u.conjugate(se)),Q?u.finalExponentiate(se):se}function V(ce,Q=!0){const se=[];mi(w.Point,"pz",ce.map(({g1:B})=>B)),mi(m.Point,"pz",ce.map(({g2:B})=>B));for(const{g1:B,g2:A}of ce){if(B.is0()||A.is0())throw new Error("pairing is not available for ZERO point");B.assertValidity(),A.assertValidity();const k=B.toAffine();se.push([K(A),k.x,k.y])}return D(se,Q)}function te(ce,Q,se=!0){return V([{g1:ce,g2:Q}],se)}const I=e.randomBytes||Ha,W={randomPrivateKey:()=>{const ce=Dc(r.ORDER);return Ul(I(ce),r.ORDER)},calcPairingPrecomputes:K};function J(ce){if(!Array.isArray(ce)||ce.length===0)throw new Error("expected non-empty array")}function F(ce){return ce instanceof w.Point?ce:w.Point.fromHex(ce)}function P(ce){return ce instanceof m.Point?ce:R.fromHex(ce)}function G(ce,Q){function se(L){return L instanceof ce.Point?L:ce.Point.fromHex(L)}function B(L){return L instanceof Q.Point?L:Q.Point.fromHex(L)}function A(L){if(!(L instanceof Q.Point))throw new Error(`expected valid message hashed to ${k?"G2":"G1"} curve`);return L}const k=Q.Point.Fp.BYTES>ce.Point.Fp.BYTES;return{getPublicKey(L){return ce.Point.fromPrivateKey(L)},sign(L,H,j){if(j!=null)throw new Error("sign() expects 2 arguments");return A(L).assertValidity(),L.multiply(ce.normPrivateKeyToScalar(H))},verify(L,H,j,g){if(g!=null)throw new Error("verify() expects 3 arguments");L=B(L),j=se(j);const l=j.negate(),d=ce.Point.BASE,b=A(H),T=L,Z=V(k?[{g1:l,g2:b},{g1:d,g2:T}]:[{g1:b,g2:l},{g1:T,g2:d}]);return u.eql(Z,u.ONE)},aggregatePublicKeys(L){J(L),L=L.map(j=>se(j));const H=L.reduce((j,g)=>j.add(g),ce.Point.ZERO);return H.assertValidity(),H},aggregateSignatures(L){J(L),L=L.map(j=>B(j));const H=L.reduce((j,g)=>j.add(g),Q.Point.ZERO);return H.assertValidity(),H},hash(L,H){Ze(L);const j=H?{DST:H}:void 0;return Q.hashToCurve(L,j)},Signature:k?e.G2.Signature:e.G1.ShortSignature}}const X=G(w,m),re=G(m,w),{ShortSignature:_}=e.G1,{Signature:R}=e.G2;function M(ce,Q){return ce instanceof w.Point?ce:re.hash(it("point",ce),Q==null?void 0:Q.DST)}function Y(ce,Q){return ce instanceof m.Point?ce:X.hash(it("point",ce),Q==null?void 0:Q.DST)}function ee(ce){return X.getPublicKey(ce).toBytes(!0)}function ne(ce){return re.getPublicKey(ce).toBytes(!0)}function le(ce,Q,se){const B=Y(ce,se),A=X.sign(B,Q);return ce instanceof m.Point?A:R.toBytes(A)}function ge(ce,Q,se){const B=M(ce,se),A=re.sign(B,Q);return ce instanceof w.Point?A:_.toBytes(A)}function ie(ce,Q,se,B){const A=Y(Q,B);return X.verify(ce,A,se)}function ae(ce,Q,se,B){const A=M(Q,B);return re.verify(ce,A,se)}function Ne(ce){const Q=X.aggregatePublicKeys(ce);return ce[0]instanceof w.Point?Q:Q.toBytes(!0)}function S(ce){const Q=X.aggregateSignatures(ce);return ce[0]instanceof m.Point?Q:R.toBytes(Q)}function be(ce){const Q=re.aggregateSignatures(ce);return ce[0]instanceof w.Point?Q:_.toBytes(Q)}function Be(ce,Q,se,B){if(J(Q),se.length!==Q.length)throw new Error("amount of public keys and messages should be equal");const A=P(ce),k=Q.map(g=>Y(g,B)),L=se.map(F),H=new Map;for(let g=0;g<L.length;g++){const l=L[g],d=k[g];let b=H.get(d);b===void 0&&(b=[],H.set(d,b)),b.push(l)}const j=[];try{for(const[g,l]of H){const d=l.reduce((b,T)=>b.add(T));j.push({g1:d,g2:g})}return j.push({g1:w.Point.BASE.negate(),g2:A}),u.eql(V(j),u.ONE)}catch{return!1}}return w.Point.BASE.precompute(4),{longSignatures:X,shortSignatures:re,millerLoopBatch:D,pairing:te,pairingBatch:V,verifyBatch:Be,curves:{G1:h.Point,G2:E.Point},fields:{Fr:r,Fp:t,Fp2:n,Fp6:o,Fp12:u},params:{ateLoopSize:e.params.ateLoopSize,twistType:e.params.twistType,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:W,getPublicKey:ee,getPublicKeyForShortSignatures:ne,sign:le,signShortSignature:ge,verify:ie,verifyShortSignature:ae,aggregatePublicKeys:Ne,aggregateSignatures:S,aggregateShortSignatures:be,G1:w,G2:m,Signature:R,ShortSignature:_}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sa=BigInt(0),Lr=BigInt(1),kt=BigInt(2),oa=BigInt(3);function ls(e,t,r,n,o=1,u){const f=BigInt(u===void 0?n:u),a=r**BigInt(n),h=[];for(let w=0;w<o;w++){const E=BigInt(w+1),m=[];for(let N=0,x=Lr;N<n;N++){const p=(E*x-E)/f%a;m.push(e.pow(t,p)),x*=r}h.push(m)}return h}function Wl(e,t,r){const n=t.pow(r,(e.ORDER-Lr)/oa),o=t.pow(r,(e.ORDER-Lr)/kt);function u(N,x){const p=t.mul(t.frobeniusMap(N,1),n),O=t.mul(t.frobeniusMap(x,1),o);return[p,O]}const f=t.pow(r,(e.ORDER**kt-Lr)/oa),a=t.pow(r,(e.ORDER**kt-Lr)/kt);if(!t.eql(a,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function h(N,x){return[t.mul(N,f),t.neg(x)]}const w=N=>(x,p)=>{const O=p.toAffine(),q=N(O.x,O.y);return x.fromAffine({x:q[0],y:q[1]})},E=w(u),m=w(h);return{psi:u,psi2:h,G2psi:E,G2psi2:m,PSI_X:n,PSI_Y:o,PSI2_X:f,PSI2_Y:a}}function Zl(e){const{ORDER:t}=e,r=Sr(t),n=r.create(e.NONRESIDUE||BigInt(-1)),o=r.div(r.ONE,kt),u=ls(r,n,r.ORDER,2)[0],f=({c0:_,c1:R},{c0:M,c1:Y})=>({c0:r.add(_,M),c1:r.add(R,Y)}),a=({c0:_,c1:R},{c0:M,c1:Y})=>({c0:r.sub(_,M),c1:r.sub(R,Y)}),h=({c0:_,c1:R},M)=>{if(typeof M=="bigint")return{c0:r.mul(_,M),c1:r.mul(R,M)};const{c0:Y,c1:ee}=M;let ne=r.mul(_,Y),le=r.mul(R,ee);const ge=r.sub(ne,le),ie=r.sub(r.mul(r.add(_,R),r.add(Y,ee)),r.add(ne,le));return{c0:ge,c1:ie}},w=({c0:_,c1:R})=>{const M=r.add(_,R),Y=r.sub(_,R),ee=r.add(_,_);return{c0:r.mul(M,Y),c1:r.mul(ee,R)}},E=_=>{if(_.length!==2)throw new Error("invalid tuple");const R=_.map(M=>r.create(M));return{c0:R[0],c1:R[1]}};function m(_,R){return typeof _=="bigint"&&sa<=_&&_<R}const N=t*t,x=E(e.FP2_NONRESIDUE),p={ORDER:N,isLE:r.isLE,NONRESIDUE:x,BITS:hn(N),BYTES:Math.ceil(hn(N)/8),MASK:zr(hn(N)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:_=>_,isValid:({c0:_,c1:R})=>m(_,N)&&m(R,N),is0:({c0:_,c1:R})=>r.is0(_)&&r.is0(R),isValidNot0:_=>!p.is0(_)&&p.isValid(_),eql:({c0:_,c1:R},{c0:M,c1:Y})=>r.eql(_,M)&&r.eql(R,Y),neg:({c0:_,c1:R})=>({c0:r.neg(_),c1:r.neg(R)}),pow:(_,R)=>Kn(p,_,R),invertBatch:_=>br(p,_),add:f,sub:a,mul:h,sqr:w,addN:f,subN:a,mulN:h,sqrN:w,div:(_,R)=>p.mul(_,typeof R=="bigint"?r.inv(r.create(R)):p.inv(R)),inv:({c0:_,c1:R})=>{const M=r.inv(r.create(_*_+R*R));return{c0:r.mul(M,r.create(_)),c1:r.mul(M,r.create(-R))}},sqrt:_=>{if(e.Fp2sqrt)return e.Fp2sqrt(_);const{c0:R,c1:M}=_;if(r.is0(M))return gi(r,R)===1?p.create({c0:r.sqrt(R),c1:r.ZERO}):p.create({c0:r.ZERO,c1:r.sqrt(r.div(R,n))});const Y=r.sqrt(r.sub(r.sqr(R),r.mul(r.sqr(M),n)));let ee=r.mul(r.add(Y,R),o);gi(r,ee)===-1&&(ee=r.sub(ee,Y));const le=r.sqrt(ee),ge=p.create({c0:le,c1:r.div(r.mul(M,o),le)});if(!p.eql(p.sqr(ge),_))throw new Error("Cannot find square root");const ie=ge,ae=p.neg(ie),{re:Ne,im:S}=p.reim(ie),{re:be,im:Be}=p.reim(ae);return S>Be||S===Be&&Ne>be?ie:ae},isOdd:_=>{const{re:R,im:M}=p.reim(_),Y=R%kt,ee=R===sa,ne=M%kt;return BigInt(Y||ee&&ne)==Lr},fromBytes(_){if(_.length!==p.BYTES)throw new Error("fromBytes invalid length="+_.length);return{c0:r.fromBytes(_.subarray(0,r.BYTES)),c1:r.fromBytes(_.subarray(r.BYTES))}},toBytes:({c0:_,c1:R})=>Me(r.toBytes(_),r.toBytes(R)),cmov:({c0:_,c1:R},{c0:M,c1:Y},ee)=>({c0:r.cmov(_,M,ee),c1:r.cmov(R,Y,ee)}),reim:({c0:_,c1:R})=>({re:_,im:R}),mulByNonresidue:({c0:_,c1:R})=>p.mul({c0:_,c1:R},x),mulByB:e.Fp2mulByB,fromBigTuple:E,frobeniusMap:({c0:_,c1:R},M)=>({c0:_,c1:r.mul(R,u[M%2])})},O=({c0:_,c1:R,c2:M},{c0:Y,c1:ee,c2:ne})=>({c0:p.add(_,Y),c1:p.add(R,ee),c2:p.add(M,ne)}),q=({c0:_,c1:R,c2:M},{c0:Y,c1:ee,c2:ne})=>({c0:p.sub(_,Y),c1:p.sub(R,ee),c2:p.sub(M,ne)}),K=({c0:_,c1:R,c2:M},Y)=>{if(typeof Y=="bigint")return{c0:p.mul(_,Y),c1:p.mul(R,Y),c2:p.mul(M,Y)};const{c0:ee,c1:ne,c2:le}=Y,ge=p.mul(_,ee),ie=p.mul(R,ne),ae=p.mul(M,le);return{c0:p.add(ge,p.mulByNonresidue(p.sub(p.mul(p.add(R,M),p.add(ne,le)),p.add(ie,ae)))),c1:p.add(p.sub(p.mul(p.add(_,R),p.add(ee,ne)),p.add(ge,ie)),p.mulByNonresidue(ae)),c2:p.sub(p.add(ie,p.mul(p.add(_,M),p.add(ee,le))),p.add(ge,ae))}},D=({c0:_,c1:R,c2:M})=>{let Y=p.sqr(_),ee=p.mul(p.mul(_,R),kt),ne=p.mul(p.mul(R,M),kt),le=p.sqr(M);return{c0:p.add(p.mulByNonresidue(ne),Y),c1:p.add(p.mulByNonresidue(le),ee),c2:p.sub(p.sub(p.add(p.add(ee,p.sqr(p.add(p.sub(_,R),M))),ne),Y),le)}},[V,te]=ls(p,x,r.ORDER,6,2,3),I={ORDER:p.ORDER,isLE:p.isLE,BITS:3*p.BITS,BYTES:3*p.BYTES,MASK:zr(3*p.BITS),ZERO:{c0:p.ZERO,c1:p.ZERO,c2:p.ZERO},ONE:{c0:p.ONE,c1:p.ZERO,c2:p.ZERO},create:_=>_,isValid:({c0:_,c1:R,c2:M})=>p.isValid(_)&&p.isValid(R)&&p.isValid(M),is0:({c0:_,c1:R,c2:M})=>p.is0(_)&&p.is0(R)&&p.is0(M),isValidNot0:_=>!I.is0(_)&&I.isValid(_),neg:({c0:_,c1:R,c2:M})=>({c0:p.neg(_),c1:p.neg(R),c2:p.neg(M)}),eql:({c0:_,c1:R,c2:M},{c0:Y,c1:ee,c2:ne})=>p.eql(_,Y)&&p.eql(R,ee)&&p.eql(M,ne),sqrt:Zo,div:(_,R)=>I.mul(_,typeof R=="bigint"?r.inv(r.create(R)):I.inv(R)),pow:(_,R)=>Kn(I,_,R),invertBatch:_=>br(I,_),add:O,sub:q,mul:K,sqr:D,addN:O,subN:q,mulN:K,sqrN:D,inv:({c0:_,c1:R,c2:M})=>{let Y=p.sub(p.sqr(_),p.mulByNonresidue(p.mul(M,R))),ee=p.sub(p.mulByNonresidue(p.sqr(M)),p.mul(_,R)),ne=p.sub(p.sqr(R),p.mul(_,M)),le=p.inv(p.add(p.mulByNonresidue(p.add(p.mul(M,ee),p.mul(R,ne))),p.mul(_,Y)));return{c0:p.mul(le,Y),c1:p.mul(le,ee),c2:p.mul(le,ne)}},fromBytes:_=>{if(_.length!==I.BYTES)throw new Error("fromBytes invalid length="+_.length);return{c0:p.fromBytes(_.subarray(0,p.BYTES)),c1:p.fromBytes(_.subarray(p.BYTES,2*p.BYTES)),c2:p.fromBytes(_.subarray(2*p.BYTES))}},toBytes:({c0:_,c1:R,c2:M})=>Me(p.toBytes(_),p.toBytes(R),p.toBytes(M)),cmov:({c0:_,c1:R,c2:M},{c0:Y,c1:ee,c2:ne},le)=>({c0:p.cmov(_,Y,le),c1:p.cmov(R,ee,le),c2:p.cmov(M,ne,le)}),fromBigSix:_=>{if(!Array.isArray(_)||_.length!==6)throw new Error("invalid Fp6 usage");return{c0:p.fromBigTuple(_.slice(0,2)),c1:p.fromBigTuple(_.slice(2,4)),c2:p.fromBigTuple(_.slice(4,6))}},frobeniusMap:({c0:_,c1:R,c2:M},Y)=>({c0:p.frobeniusMap(_,Y),c1:p.mul(p.frobeniusMap(R,Y),V[Y%6]),c2:p.mul(p.frobeniusMap(M,Y),te[Y%6])}),mulByFp2:({c0:_,c1:R,c2:M},Y)=>({c0:p.mul(_,Y),c1:p.mul(R,Y),c2:p.mul(M,Y)}),mulByNonresidue:({c0:_,c1:R,c2:M})=>({c0:p.mulByNonresidue(M),c1:_,c2:R}),mul1:({c0:_,c1:R,c2:M},Y)=>({c0:p.mulByNonresidue(p.mul(M,Y)),c1:p.mul(_,Y),c2:p.mul(R,Y)}),mul01({c0:_,c1:R,c2:M},Y,ee){let ne=p.mul(_,Y),le=p.mul(R,ee);return{c0:p.add(p.mulByNonresidue(p.sub(p.mul(p.add(R,M),ee),le)),ne),c1:p.sub(p.sub(p.mul(p.add(Y,ee),p.add(_,R)),ne),le),c2:p.add(p.sub(p.mul(p.add(_,M),Y),ne),le)}}},W=ls(p,x,r.ORDER,12,1,6)[0],J=({c0:_,c1:R},{c0:M,c1:Y})=>({c0:I.add(_,M),c1:I.add(R,Y)}),F=({c0:_,c1:R},{c0:M,c1:Y})=>({c0:I.sub(_,M),c1:I.sub(R,Y)}),P=({c0:_,c1:R},M)=>{if(typeof M=="bigint")return{c0:I.mul(_,M),c1:I.mul(R,M)};let{c0:Y,c1:ee}=M,ne=I.mul(_,Y),le=I.mul(R,ee);return{c0:I.add(ne,I.mulByNonresidue(le)),c1:I.sub(I.mul(I.add(_,R),I.add(Y,ee)),I.add(ne,le))}},G=({c0:_,c1:R})=>{let M=I.mul(_,R);return{c0:I.sub(I.sub(I.mul(I.add(I.mulByNonresidue(R),_),I.add(_,R)),M),I.mulByNonresidue(M)),c1:I.add(M,M)}};function X(_,R){const M=p.sqr(_),Y=p.sqr(R);return{first:p.add(p.mulByNonresidue(Y),M),second:p.sub(p.sub(p.sqr(p.add(_,R)),M),Y)}}const re={ORDER:p.ORDER,isLE:I.isLE,BITS:2*I.BITS,BYTES:2*I.BYTES,MASK:zr(2*I.BITS),ZERO:{c0:I.ZERO,c1:I.ZERO},ONE:{c0:I.ONE,c1:I.ZERO},create:_=>_,isValid:({c0:_,c1:R})=>I.isValid(_)&&I.isValid(R),is0:({c0:_,c1:R})=>I.is0(_)&&I.is0(R),isValidNot0:_=>!re.is0(_)&&re.isValid(_),neg:({c0:_,c1:R})=>({c0:I.neg(_),c1:I.neg(R)}),eql:({c0:_,c1:R},{c0:M,c1:Y})=>I.eql(_,M)&&I.eql(R,Y),sqrt:Zo,inv:({c0:_,c1:R})=>{let M=I.inv(I.sub(I.sqr(_),I.mulByNonresidue(I.sqr(R))));return{c0:I.mul(_,M),c1:I.neg(I.mul(R,M))}},div:(_,R)=>re.mul(_,typeof R=="bigint"?r.inv(r.create(R)):re.inv(R)),pow:(_,R)=>Kn(re,_,R),invertBatch:_=>br(re,_),add:J,sub:F,mul:P,sqr:G,addN:J,subN:F,mulN:P,sqrN:G,fromBytes:_=>{if(_.length!==re.BYTES)throw new Error("fromBytes invalid length="+_.length);return{c0:I.fromBytes(_.subarray(0,I.BYTES)),c1:I.fromBytes(_.subarray(I.BYTES))}},toBytes:({c0:_,c1:R})=>Me(I.toBytes(_),I.toBytes(R)),cmov:({c0:_,c1:R},{c0:M,c1:Y},ee)=>({c0:I.cmov(_,M,ee),c1:I.cmov(R,Y,ee)}),fromBigTwelve:_=>({c0:I.fromBigSix(_.slice(0,6)),c1:I.fromBigSix(_.slice(6,12))}),frobeniusMap(_,R){const{c0:M,c1:Y,c2:ee}=I.frobeniusMap(_.c1,R),ne=W[R%12];return{c0:I.frobeniusMap(_.c0,R),c1:I.create({c0:p.mul(M,ne),c1:p.mul(Y,ne),c2:p.mul(ee,ne)})}},mulByFp2:({c0:_,c1:R},M)=>({c0:I.mulByFp2(_,M),c1:I.mulByFp2(R,M)}),conjugate:({c0:_,c1:R})=>({c0:_,c1:I.neg(R)}),mul014:({c0:_,c1:R},M,Y,ee)=>{let ne=I.mul01(_,M,Y),le=I.mul1(R,ee);return{c0:I.add(I.mulByNonresidue(le),ne),c1:I.sub(I.sub(I.mul01(I.add(R,_),M,p.add(Y,ee)),ne),le)}},mul034:({c0:_,c1:R},M,Y,ee)=>{const ne=I.create({c0:p.mul(_.c0,M),c1:p.mul(_.c1,M),c2:p.mul(_.c2,M)}),le=I.mul01(R,Y,ee),ge=I.mul01(I.add(_,R),p.add(M,Y),ee);return{c0:I.add(I.mulByNonresidue(le),ne),c1:I.sub(ge,I.add(ne,le))}},_cyclotomicSquare:e.Fp12cyclotomicSquare,_cyclotomicExp:e.Fp12cyclotomicExp,finalExponentiate:e.Fp12finalExponentiate};return{Fp:r,Fp2:p,Fp6:I,Fp12:re,Fp4Square:X}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tt=BigInt(0),_i=BigInt(1),Ke=BigInt(2),Pi=BigInt(3),Nn=BigInt(4),Xt=BigInt("0xd201000000010000"),Xl=hn(Xt),Ar={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:tt,b:Nn,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},Jl=Sr(Ar.n),{Fp:xe,Fp2:_e,Fp6:Cs,Fp4Square:ds,Fp12:Ae}=Zl({ORDER:Ar.p,FP2_NONRESIDUE:[_i,_i],Fp2mulByB:({c0:e,c1:t})=>{const r=xe.mul(e,Nn),n=xe.mul(t,Nn);return{c0:xe.sub(r,n),c1:xe.add(r,n)}},Fp12cyclotomicSquare:({c0:e,c1:t})=>{const{c0:r,c1:n,c2:o}=e,{c0:u,c1:f,c2:a}=t,{first:h,second:w}=ds(r,f),{first:E,second:m}=ds(u,o),{first:N,second:x}=ds(n,a),p=_e.mulByNonresidue(x);return{c0:Cs.create({c0:_e.add(_e.mul(_e.sub(h,r),Ke),h),c1:_e.add(_e.mul(_e.sub(E,n),Ke),E),c2:_e.add(_e.mul(_e.sub(N,o),Ke),N)}),c1:Cs.create({c0:_e.add(_e.mul(_e.add(p,u),Ke),p),c1:_e.add(_e.mul(_e.add(w,f),Ke),w),c2:_e.add(_e.mul(_e.add(m,a),Ke),m)})}},Fp12cyclotomicExp(e,t){let r=Ae.ONE;for(let n=Xl-1;n>=0;n--)r=Ae._cyclotomicSquare(r),Nl(t,n)&&(r=Ae.mul(r,e));return r},Fp12finalExponentiate:e=>{const t=Xt,r=Ae.div(Ae.frobeniusMap(e,6),e),n=Ae.mul(Ae.frobeniusMap(r,2),r),o=Ae.conjugate(Ae._cyclotomicExp(n,t)),u=Ae.mul(Ae.conjugate(Ae._cyclotomicSquare(n)),o),f=Ae.conjugate(Ae._cyclotomicExp(u,t)),a=Ae.conjugate(Ae._cyclotomicExp(f,t)),h=Ae.mul(Ae.conjugate(Ae._cyclotomicExp(a,t)),Ae._cyclotomicSquare(o)),w=Ae.conjugate(Ae._cyclotomicExp(h,t)),E=Ae.frobeniusMap(Ae.mul(o,a),2),m=Ae.frobeniusMap(Ae.mul(f,n),3),N=Ae.frobeniusMap(Ae.mul(h,Ae.conjugate(n)),1),x=Ae.mul(Ae.mul(w,Ae.conjugate(u)),n);return Ae.mul(Ae.mul(Ae.mul(E,m),N),x)}}),{G2psi:aa,G2psi2:Ql}=Wl(xe,_e,_e.div(_e.ONE,_e.NONRESIDUE)),hs=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:xe.ORDER,m:2,k:128,expand:"xmd",hash:Ws}),ro={p:_e.ORDER,n:Ar.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:_e.ZERO,b:_e.fromBigTuple([Nn,Nn]),Gx:_e.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:_e.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},Ci=On(xe.toBytes(tt),{infinity:!0,compressed:!0});function Vi(e){e=e.slice();const t=e[0]&224,r=!!(t>>7&1),n=!!(t>>6&1),o=!!(t>>5&1);return e[0]&=31,{compressed:r,infinity:n,sort:o,value:e}}function On(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function ed(e,t,r){const{BYTES:n,ORDER:o}=xe,u=t.is0(),{x:f,y:a}=t.toAffine();if(r){if(u)return Ci.slice();const h=!!(a*Ke/o);return On(Ye(f,n),{compressed:!0,sort:h})}else return u?Me(Uint8Array.of(64),new Uint8Array(2*n-1)):Me(Ye(f,n),Ye(a,n))}function ps(e){e.assertValidity();const{BYTES:t,ORDER:r}=xe,{x:n,y:o}=e.toAffine();if(e.is0())return Ci.slice();const u=!!(o*Ke/r);return On(Ye(n,t),{compressed:!0,sort:u})}function td(e){const{compressed:t,infinity:r,sort:n,value:o}=Vi(e),{BYTES:u,ORDER:f}=xe;if(o.length===48&&t){const a=At(o),h=xe.create(a&xe.MASK);if(r){if(h!==tt)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:tt,y:tt}}const w=xe.add(xe.pow(h,Pi),xe.create(Ar.b));let E=xe.sqrt(w);if(!E)throw new Error("invalid G1 point: compressed point");return E*Ke/f!==BigInt(n)&&(E=xe.neg(E)),{x:xe.create(h),y:xe.create(E)}}else if(o.length===96&&!t){const a=At(o.subarray(0,u)),h=At(o.subarray(u));if(r){if(a!==tt||h!==tt)throw new Error("G1: non-empty point at infinity");return Mi.G1.Point.ZERO.toAffine()}return{x:xe.create(a),y:xe.create(h)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function ca(e){const{infinity:t,sort:r,value:n}=Vi(it("signatureHex",e,48)),o=xe.ORDER,u=Mi.G1.Point,f=At(n);if(t)return u.ZERO;const a=xe.create(f&xe.MASK),h=xe.add(xe.pow(a,Pi),xe.create(Ar.b));let w=xe.sqrt(h);if(!w)throw new Error("invalid G1 point: compressed");const E=BigInt(r);w*Ke/o!==E&&(w=xe.neg(w));const m=u.fromAffine({x:a,y:w});return m.assertValidity(),m}function rd(e,t,r){const{BYTES:n,ORDER:o}=xe,u=t.is0(),{x:f,y:a}=t.toAffine();if(r){if(u)return Me(Ci,Ye(tt,n));const h=!!(a.c1===tt?a.c0*Ke/o:a.c1*Ke/o);return Me(On(Ye(f.c1,n),{compressed:!0,sort:h}),Ye(f.c0,n))}else{if(u)return Me(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:h,im:w}=_e.reim(f),{re:E,im:m}=_e.reim(a);return Me(Ye(w,n),Ye(h,n),Ye(m,n),Ye(E,n))}}function ys(e){e.assertValidity();const{BYTES:t}=xe;if(e.is0())return Me(Ci,Ye(tt,t));const{x:r,y:n}=e.toAffine(),{re:o,im:u}=_e.reim(r),{re:f,im:a}=_e.reim(n),w=!!((a>tt?a*Ke:f*Ke)/xe.ORDER&_i),E=o;return Me(On(Ye(u,t),{sort:w,compressed:!0}),Ye(E,t))}function nd(e){const{BYTES:t,ORDER:r}=xe,{compressed:n,infinity:o,sort:u,value:f}=Vi(e);if(!n&&!o&&u||!n&&o&&u||u&&o&&n)throw new Error("invalid encoding flag: "+(e[0]&224));const a=(h,w,E)=>At(h.slice(w,E));if(f.length===96&&n){if(o){if(f.reduce((p,O)=>p!==0?O+1:O,0)>0)throw new Error("invalid G2 point: compressed");return{x:_e.ZERO,y:_e.ZERO}}const h=a(f,0,t),w=a(f,t,2*t),E=_e.create({c0:xe.create(w),c1:xe.create(h)}),m=_e.add(_e.pow(E,Pi),ro.b);let N=_e.sqrt(m);const x=N.c1===tt?N.c0*Ke/r:N.c1*Ke/r?_i:tt;return N=u&&x>0?N:_e.neg(N),{x:E,y:N}}else if(f.length===192&&!n){if(o){if(f.reduce((N,x)=>N!==0?x+1:x,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:_e.ZERO,y:_e.ZERO}}const h=a(f,0*t,1*t),w=a(f,1*t,2*t),E=a(f,2*t,3*t),m=a(f,3*t,4*t);return{x:_e.fromBigTuple([w,h]),y:_e.fromBigTuple([m,E])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function ua(e){const{ORDER:t}=xe,{infinity:r,sort:n,value:o}=Vi(it("signatureHex",e)),u=Mi.G2.Point,f=o.length/2;if(f!==48&&f!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const a=At(o.slice(0,f)),h=At(o.slice(f));if(r)return u.ZERO;const w=xe.create(a&xe.MASK),E=xe.create(h),m=_e.create({c0:E,c1:w}),N=_e.add(_e.pow(m,Pi),ro.b);let x=_e.sqrt(N);if(!x)throw new Error("Failed to find a square root");const{re:p,im:O}=_e.reim(x),q=BigInt(n),K=O>tt&&O*Ke/t!==q,D=O===tt&&p*Ke/t!==q;(K||D)&&(x=_e.neg(x));const V=u.fromAffine({x:m,y:x});return V.assertValidity(),V}const Mi=Yl({fields:{Fp:xe,Fp2:_e,Fp6:Cs,Fp12:Ae,Fr:Jl},G1:{...Ar,Fp:xe,htfDefaults:{...hs,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new e(xe.mul(t.px,r),t.py,t.pz);return t.multiplyUnsafe(Xt).negate().multiplyUnsafe(Xt).equals(n)},clearCofactor:(e,t)=>t.multiplyUnsafe(Xt).add(t),mapToCurve:cd,fromBytes:td,toBytes:ed,ShortSignature:{fromBytes(e){return Ze(e),ca(e)},fromHex(e){return ca(e)},toBytes(e){return ps(e)},toRawBytes(e){return ps(e)},toHex(e){return Yr(ps(e))}}},G2:{...ro,Fp:_e,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...hs},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:ud,isTorsionFree:(e,t)=>t.multiplyUnsafe(Xt).negate().equals(aa(e,t)),clearCofactor:(e,t)=>{const r=Xt;let n=t.multiplyUnsafe(r).negate(),o=aa(e,t),u=t.double();return u=Ql(e,u),u=u.subtract(o),o=n.add(o),o=o.multiplyUnsafe(r).negate(),u=u.add(o),u=u.subtract(n),u.subtract(t)},fromBytes:nd,toBytes:rd,Signature:{fromBytes(e){return Ze(e),ua(e)},fromHex(e){return ua(e)},toBytes(e){return ys(e)},toRawBytes(e){return ys(e)},toHex(e){return Yr(ys(e))}}},params:{ateLoopSize:Xt,r:Ar.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:hs,hash:Ws}),id=Qc(_e,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>_e.fromBigTuple(t.map(BigInt))))),sd=Qc(xe,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),od=ru(xe,{A:xe.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:xe.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:xe.create(BigInt(11))}),ad=ru(_e,{A:_e.create({c0:xe.create(tt),c1:xe.create(BigInt(240))}),B:_e.create({c0:xe.create(BigInt(1012)),c1:xe.create(BigInt(1012))}),Z:_e.create({c0:xe.create(BigInt(-2)),c1:xe.create(BigInt(-1))})});function cd(e){const{x:t,y:r}=od(xe.create(e[0]));return sd(t,r)}function ud(e){const{x:t,y:r}=ad(_e.fromBigTuple(e));return id(t,r)}function fd(e,t,r){const n=typeof e=="string"?e:Pe(e),o=typeof t=="string"?t:Pe(t),u=typeof r=="string"?r:Pe(r);return Mi.verifyShortSignature(o,u,n)}const nu=e=>ze(new Jr(e)),no=e=>{const t=nu(e);return new Date(Number(t)/1e6)};var ld=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},dd=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Dn;class Bt extends Ce{constructor(t){super(`Invalid certificate: ${t}`)}}var ut;(function(e){e[e.Empty=0]="Empty",e[e.Fork=1]="Fork",e[e.Labeled=2]="Labeled",e[e.Leaf=3]="Leaf",e[e.Pruned=4]="Pruned"})(ut||(ut={}));function hd(e,t){const r=new Uint8Array(e),n=new Uint8Array(t);for(let o=0;o<r.length;o++)if(r[o]>n[o])return!0;return!1}class xr{constructor(t,r,n,o,u=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=o,this._maxAgeInMinutes=u,Dn.set(this,!1),ld(this,Dn,f,"f"),this.cert=Vt(new Uint8Array(t))}static async create(t){const r=xr.createUnverified(t);return await r.verify(),r}static createUnverified(t){let r=t.blsVerify;return r||(r=fd),new xr(t.certificate,t.rootKey,t.canisterId,r,t.maxAgeInMinutes,t.disableTimeVerification)}lookup(t){return Xr(t,this.cert.tree)}lookup_label(t){return this.lookup([t])}async verify(){const t=await Yn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,o=yd(r),u=mt(an("ic-state-root"),t);let f=!1;const a=dt(this.lookup(["time"]));if(!a)throw new Bt("Certificate does not contain a time");if(!dd(this,Dn,"f")){const w=this._maxAgeInMinutes*60*1e3,E=Date.now(),m=E-w,N=E+3e5,x=no(a);if(x.getTime()<m)throw new Bt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+x.toISOString()+" Current time: "+new Date(E).toISOString());if(x.getTime()>N)throw new Bt("Certificate is signed more than 5 minutes in the future. Certificate time: "+x.toISOString()+" Current time: "+new Date(E).toISOString())}try{f=await this._blsVerify(new Uint8Array(o),new Uint8Array(n),new Uint8Array(u))}catch{f=!1}if(!f)throw new Bt("Signature verification failed")}async _checkDelegationAndGetKey(t){if(!t)return this._rootKey;const r=await xr.createUnverified({certificate:t.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Bt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==Gd&&!iu({canisterId:this._canisterId,subnetId:Ee.fromUint8Array(new Uint8Array(t.subnet_id)),tree:r.cert.tree}))throw new Bt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${Pe(t.subnet_id)}`);const n=dt(r.lookup(["subnet",t.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${Pe(t.subnet_id)}`);return n}}Dn=new WeakMap;const nn=$t("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),pd=96;function yd(e){const t=nn.byteLength+pd;if(e.byteLength!==t)throw new TypeError(`BLS DER-encoded public key must be ${t} bytes long`);const r=e.slice(0,nn.byteLength);if(!An(r,nn))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${nn}, but get ${r}`);return e.slice(nn.byteLength)}function dt(e){if(e.status===He.Found){if(e.value instanceof ArrayBuffer)return e.value;if(e.value instanceof Uint8Array)return e.value.buffer}}async function Yn(e){switch(e[0]){case ut.Empty:return gt(an("ic-hashtree-empty"));case ut.Pruned:return e[1];case ut.Leaf:return gt(mt(an("ic-hashtree-leaf"),e[1]));case ut.Labeled:return gt(mt(an("ic-hashtree-labeled"),e[1],await Yn(e[2])));case ut.Fork:return gt(mt(an("ic-hashtree-fork"),await Yn(e[1]),await Yn(e[2])));default:throw new Error("unreachable")}}function an(e){const t=new Uint8Array([e.length]),r=new TextEncoder().encode(e);return mt(t,r)}var He;(function(e){e.Unknown="unknown",e.Absent="absent",e.Found="found"})(He||(He={}));var Pt;(function(e){e.Less="less",e.Greater="greater"})(Pt||(Pt={}));function Xr(e,t){if(e.length===0)switch(t[0]){case ut.Leaf:{if(!t[1])throw new Error("Invalid tree structure for leaf");return t[1]instanceof ArrayBuffer?{status:He.Found,value:t[1]}:t[1]instanceof Uint8Array?{status:He.Found,value:t[1].buffer}:{status:He.Found,value:t[1]}}default:return{status:He.Found,value:t}}const r=typeof e[0]=="string"?new TextEncoder().encode(e[0]):e[0],n=Wn(r,t);switch(n.status){case He.Found:return Xr(e.slice(1),n.value);case Pt.Greater:case Pt.Less:return{status:He.Absent};default:return n}}function Vs(e){switch(e[0]){case ut.Empty:return[];case ut.Fork:return Vs(e[1]).concat(Vs(e[2]));default:return[e]}}function Wn(e,t){switch(t[0]){case ut.Labeled:return hd(e,t[1])?{status:Pt.Greater}:An(e,t[1])?{status:He.Found,value:t[2]}:{status:Pt.Less};case ut.Fork:const r=Wn(e,t[1]);switch(r.status){case Pt.Greater:{const n=Wn(e,t[2]);return n.status===Pt.Less?{status:He.Absent}:n}case He.Unknown:{let n=Wn(e,t[2]);return n.status===Pt.Less?{status:He.Unknown}:n}default:return r}case ut.Pruned:return{status:He.Unknown};default:return{status:He.Absent}}}function iu(e){const{canisterId:t,subnetId:r,tree:n}=e,o=Xr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(o.status!==He.Found||!(o.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Vt(o.value).map(h=>[Ee.fromUint8Array(h[0]),Ee.fromUint8Array(h[1])]).some(h=>h[0].ltEq(t)&&h[1].gtEq(t))}class gd{constructor(t,r,n){this.key=t,this.path=r,this.decodeStrategy=n}}const su=async e=>{const{agent:t,paths:r}=e,n=Ee.from(e.canisterId),o=[...new Set(r)],u=o.map(h=>Ms(h,n)),f=new Map,a=o.map((h,w)=>(async()=>{var E;try{const m=await t.readState(n,{paths:[u[w]]});if(t.rootKey==null)throw new Error("Agent is missing root key");const N=await xr.create({certificate:m.certificate,rootKey:t.rootKey,canisterId:n,disableTimeVerification:!0}),x=(q,K)=>{if(K==="subnet"){if(t.rootKey==null)throw new Error("Agent is missing root key");const D=ou(m.certificate,n,t.rootKey);return{path:K,data:D}}else return{path:K,data:dt(q.lookup(Ms(K,n)))}},{path:p,data:O}=x(N,o[w]);if(!O)console.warn(`Expected to find result for path ${p}, but instead found nothing.`),typeof p=="string"?f.set(p,null):f.set(p.key,null);else switch(p){case"time":{f.set(p,no(O));break}case"controllers":{f.set(p,_d(O));break}case"module_hash":{f.set(p,fa(O));break}case"subnet":{f.set(p,O);break}case"candid":{f.set(p,new TextDecoder().decode(O));break}default:if(typeof p!="string"&&"key"in p&&"path"in p)switch(p.decodeStrategy){case"raw":f.set(p.key,O);break;case"leb128":{f.set(p.key,nu(O));break}case"cbor":{f.set(p.key,au(O));break}case"hex":{f.set(p.key,fa(O));break}case"utf-8":f.set(p.key,md(O))}}}catch(m){if(!((E=m==null?void 0:m.message)===null||E===void 0)&&E.includes("Invalid certificate"))throw new Ce(m.message);typeof h!="string"&&"key"in h&&"path"in h?f.set(h.key,null):f.set(h,null),console.group(),console.warn(`Expected to find result for path ${h}, but instead found nothing.`),console.warn(m),console.groupEnd()}})());return await Promise.all(a),f},ou=(e,t,r)=>{if(!t._isPrincipal)throw new Error("Invalid canisterId");const n=Vt(new Uint8Array(e)),o=n.tree;let u=n.delegation,f;if(u&&u.subnet_id?f=Ee.fromUint8Array(new Uint8Array(u.subnet_id)):!u&&typeof r<"u"?(f=Ee.selfAuthenticating(new Uint8Array(r)),u={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=Ee.selfAuthenticating(Ee.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),u={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!iu({canisterId:t,subnetId:f,tree:o}))throw new Error("Canister not in range");const h=Xr(["subnet",u.subnet_id,"node"],o);if(h.status!==He.Found)throw new Error("Node not found");if(h.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const w=Vs(h.value),E=new Map;return w.forEach(m=>{const N=Ee.from(new Uint8Array(m[1])).toText(),x=Xr(["public_key"],m[2]);if(x.status!==He.Found)throw new Error("Public key not found");const p=x.value;if(p.byteLength!==44)throw new Error("Invalid public key length");E.set(N,p)}),{subnetId:Ee.fromUint8Array(new Uint8Array(u.subnet_id)).toText(),nodeKeys:E}},Ms=(e,t)=>{const r=new TextEncoder,n=u=>new DataView(r.encode(u).buffer).buffer,o=new DataView(t.toUint8Array().buffer).buffer;switch(e){case"time":return[n("time")];case"controllers":return[n("canister"),o,n("controllers")];case"module_hash":return[n("canister"),o,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),o,n("metadata"),n("candid:service")];default:if("key"in e&&"path"in e)if(typeof e.path=="string"||e.path instanceof ArrayBuffer){const u=e.path,f=typeof u=="string"?n(u):u;return[n("canister"),o,n("metadata"),f]}else return e.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${e} was formatted correctly.`)},fa=e=>Pe(e),au=e=>Vt(e),md=e=>new TextDecoder().decode(e),_d=e=>au(e).map(r=>Ee.fromUint8Array(new Uint8Array(r))),wd=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:gd,encodePath:Ms,fetchNodeKeys:ou,request:su},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Et=BigInt(0),rt=BigInt(1),gs=BigInt(2),bd=BigInt(8),xd={zip215:!0};function Ed(e,t,r,n){const o=e.sqr(r),u=e.sqr(n),f=e.add(e.mul(t.a,o),u),a=e.add(e.ONE,e.mul(t.d,e.mul(o,u)));return e.eql(f,a)}function vd(e,t={}){const{Fp:r,Fn:n}=Jc("edwards",e,t),{h:o,n:u}=e;Rn(t,{},{uvRatio:"function"});const f=gs<<BigInt(n.BYTES*8)-rt,a=O=>r.create(O),h=t.uvRatio||((O,q)=>{try{return{isValid:!0,value:r.sqrt(r.div(O,q))}}catch{return{isValid:!1,value:Et}}});if(!Ed(r,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function w(O,q,K=!1){const D=K?rt:Et;return on("coordinate "+O,q,D,f),q}function E(O){if(!(O instanceof x))throw new Error("ExtendedPoint expected")}const m=En((O,q)=>{const{ex:K,ey:D,ez:V}=O,te=O.is0();q==null&&(q=te?bd:r.inv(V));const I=a(K*q),W=a(D*q),J=a(V*q);if(te)return{x:Et,y:rt};if(J!==rt)throw new Error("invZ was invalid");return{x:I,y:W}}),N=En(O=>{const{a:q,d:K}=e;if(O.is0())throw new Error("bad point: ZERO");const{ex:D,ey:V,ez:te,et:I}=O,W=a(D*D),J=a(V*V),F=a(te*te),P=a(F*F),G=a(W*q),X=a(F*a(G+J)),re=a(P+a(K*a(W*J)));if(X!==re)throw new Error("bad point: equation left != right (1)");const _=a(D*V),R=a(te*I);if(_!==R)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(q,K,D,V){this.ex=w("x",q),this.ey=w("y",K),this.ez=w("z",D,!0),this.et=w("t",V),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(q){if(q instanceof x)throw new Error("extended point not allowed");const{x:K,y:D}=q||{};return w("x",K),w("y",D),new x(K,D,rt,a(K*D))}static normalizeZ(q){return mi(x,"ez",q)}static msm(q,K){return Xc(x,n,q,K)}_setWindowSize(q){this.precompute(q)}precompute(q=8,K=!0){return p.setWindowSize(this,q),K||this.multiply(gs),this}assertValidity(){N(this)}equals(q){E(q);const{ex:K,ey:D,ez:V}=this,{ex:te,ey:I,ez:W}=q,J=a(K*W),F=a(te*V),P=a(D*W),G=a(I*V);return J===F&&P===G}is0(){return this.equals(x.ZERO)}negate(){return new x(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:q}=e,{ex:K,ey:D,ez:V}=this,te=a(K*K),I=a(D*D),W=a(gs*a(V*V)),J=a(q*te),F=K+D,P=a(a(F*F)-te-I),G=J+I,X=G-W,re=J-I,_=a(P*X),R=a(G*re),M=a(P*re),Y=a(X*G);return new x(_,R,Y,M)}add(q){E(q);const{a:K,d:D}=e,{ex:V,ey:te,ez:I,et:W}=this,{ex:J,ey:F,ez:P,et:G}=q,X=a(V*J),re=a(te*F),_=a(W*D*G),R=a(I*P),M=a((V+te)*(J+F)-X-re),Y=R-_,ee=R+_,ne=a(re-K*X),le=a(M*Y),ge=a(ee*ne),ie=a(M*ne),ae=a(Y*ee);return new x(le,ge,ae,ie)}subtract(q){return this.add(q.negate())}multiply(q){const K=q;on("scalar",K,rt,u);const{p:D,f:V}=p.wNAFCached(this,K,x.normalizeZ);return x.normalizeZ([D,V])[0]}multiplyUnsafe(q,K=x.ZERO){const D=q;return on("scalar",D,Et,u),D===Et?x.ZERO:this.is0()||D===rt?this:p.wNAFCachedUnsafe(this,D,x.normalizeZ,K)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return p.wNAFCachedUnsafe(this,u).is0()}toAffine(q){return m(this,q)}clearCofactor(){return o===rt?this:this.multiplyUnsafe(o)}static fromBytes(q,K=!1){return Ze(q),this.fromHex(q,K)}static fromHex(q,K=!1){const{d:D,a:V}=e,te=r.BYTES;q=it("pointHex",q,te),bn("zip215",K);const I=q.slice(),W=q[te-1];I[te-1]=W&-129;const J=xn(I),F=K?f:r.ORDER;on("pointHex.y",J,Et,F);const P=a(J*J),G=a(P-rt),X=a(D*P-V);let{isValid:re,value:_}=h(G,X);if(!re)throw new Error("Point.fromHex: invalid y coordinate");const R=(_&rt)===rt,M=(W&128)!==0;if(!K&&_===Et&&M)throw new Error("Point.fromHex: x=0 and x_0=1");return M!==R&&(_=a(-_)),x.fromAffine({x:_,y:J})}static fromPrivateScalar(q){return x.BASE.multiply(q)}toBytes(){const{x:q,y:K}=this.toAffine(),D=ki(K,r.BYTES);return D[D.length-1]|=q&rt?128:0,D}toRawBytes(){return this.toBytes()}toHex(){return Yr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(e.Gx,e.Gy,rt,a(e.Gx*e.Gy)),x.ZERO=new x(Et,rt,rt,Et),x.Fp=r,x.Fn=n;const p=Zc(x,n.BYTES*8);return x}function Nd(e,t){Rn(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r,hash:n}=t,{BASE:o,Fp:u,Fn:f}=e,a=f.ORDER,h=t.randomBytes||Ha,w=t.adjustScalarBytes||(I=>I),E=t.domain||((I,W,J)=>{if(bn("phflag",J),W.length||J)throw new Error("Contexts/pre-hash are not supported");return I});function m(I){return f.create(I)}function N(I){return m(xn(I))}function x(I){const W=u.BYTES;I=it("private key",I,W);const J=it("hashed private key",n(I),2*W),F=w(J.slice(0,W)),P=J.slice(W,2*W),G=N(F);return{head:F,prefix:P,scalar:G}}function p(I){const{head:W,prefix:J,scalar:F}=x(I),P=o.multiply(F),G=P.toBytes();return{head:W,prefix:J,scalar:F,point:P,pointBytes:G}}function O(I){return p(I).pointBytes}function q(I=Uint8Array.of(),...W){const J=Me(...W);return N(n(E(J,it("context",I),!!r)))}function K(I,W,J={}){I=it("message",I),r&&(I=r(I));const{prefix:F,scalar:P,pointBytes:G}=p(W),X=q(J.context,F,I),re=o.multiply(X).toBytes(),_=q(J.context,re,G,I),R=m(X+_*P);on("signature.s",R,Et,a);const M=u.BYTES,Y=Me(re,ki(R,M));return it("result",Y,M*2)}const D=xd;function V(I,W,J,F=D){const{context:P,zip215:G}=F,X=u.BYTES;I=it("signature",I,2*X),W=it("message",W),J=it("publicKey",J,X),G!==void 0&&bn("zip215",G),r&&(W=r(W));const re=xn(I.slice(X,2*X));let _,R,M;try{_=e.fromHex(J,G),R=e.fromHex(I.slice(0,X),G),M=o.multiplyUnsafe(re)}catch{return!1}if(!G&&_.isSmallOrder())return!1;const Y=q(P,R.toBytes(),_.toBytes(),W);return R.add(_.multiplyUnsafe(Y)).subtract(M).clearCofactor().is0()}return o.precompute(8),{getPublicKey:O,sign:K,verify:V,utils:{getExtendedPublicKey:p,randomPrivateKey:()=>h(u.BYTES),precompute(I=8,W=e.BASE){return W.precompute(I,!1)}},Point:e}}function Bd(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=Sr(t.n,e.nBitLength,!0),o={Fp:r,Fn:n,uvRatio:e.uvRatio},u={hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:o,eddsaOpts:u}}function Td(e,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:e})}function Ad(e){const{CURVE:t,curveOpts:r,eddsaOpts:n}=Bd(e),o=vd(t,r),u=Nd(o,n);return Td(e,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Sd=BigInt(1),la=BigInt(2);BigInt(3);const Rd=BigInt(5),Od=BigInt(8),$i={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Od,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Id(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),u=$i.p,a=e*e%u*e%u,h=wt(a,la,u)*a%u,w=wt(h,Sd,u)*e%u,E=wt(w,Rd,u)*w%u,m=wt(E,t,u)*E%u,N=wt(m,r,u)*m%u,x=wt(N,n,u)*N%u,p=wt(x,o,u)*x%u,O=wt(p,o,u)*x%u,q=wt(O,t,u)*E%u;return{pow_p_5_8:wt(q,la,u)*e%u,b2:a}}function Fd(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const da=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Ud(e,t){const r=$i.p,n=Ge(t*t*t,r),o=Ge(n*n*t,r),u=Id(e*o).pow_p_5_8;let f=Ge(e*n*u,r);const a=Ge(t*f*f,r),h=f,w=Ge(f*da,r),E=a===e,m=a===Ge(-e,r),N=a===Ge(-e*da,r);return E&&(f=h),(m||N)&&(f=w),Ol(f,r)&&(f=Ge(-f,r)),{isValid:E||m,value:f}}const kd=Sr($i.p,void 0,!0),Pd={...$i,Fp:kd,hash:Lf,adjustScalarBytes:Fd,uvRatio:Ud},kr=Ad(Pd);var ha=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},nt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Qe,cn,cu,uu;class Cd{constructor(t={}){Qe.set(this,void 0),cn.set(this,void 0),this[cu]=this.entries.bind(this),this[uu]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=t,o=Date.now();ha(this,Qe,new Map([...r].map(([u,f])=>[u,{value:f,timestamp:o}])),"f"),ha(this,cn,n,"f")}prune(){const t=Date.now();for(const[r,n]of nt(this,Qe,"f").entries())t-n.timestamp>nt(this,cn,"f")&&nt(this,Qe,"f").delete(r);return this}set(t,r){this.prune();const n={value:r,timestamp:Date.now()};return nt(this,Qe,"f").set(t,n),this}get(t){const r=nt(this,Qe,"f").get(t);if(r!==void 0){if(Date.now()-r.timestamp>nt(this,cn,"f")){nt(this,Qe,"f").delete(t);return}return r.value}}clear(){nt(this,Qe,"f").clear()}entries(){const t=nt(this,Qe,"f").entries();return function*(){for(const[n,o]of t)yield[n,o.value]}()}values(){const t=nt(this,Qe,"f").values();return function*(){for(const n of t)yield n.value}()}keys(){return nt(this,Qe,"f").keys()}forEach(t,r){for(const[n,o]of nt(this,Qe,"f").entries())t.call(r,o.value,n,this)}has(t){return nt(this,Qe,"f").has(t)}delete(t){return nt(this,Qe,"f").delete(t)}get size(){return nt(this,Qe,"f").size}}Qe=new WeakMap,cn=new WeakMap,cu=Symbol.iterator,uu=Symbol.toStringTag;const pa=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},ya=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw new Error("Length too long (> 4 bytes)")},$s=(e,t)=>{if(e[t]<128)return 1;if(e[t]===128)throw new Error("Invalid length 0");if(e[t]===129)return 2;if(e[t]===130)return 3;if(e[t]===131)return 4;throw new Error("Length too long (> 4 bytes)")},Vd=(e,t)=>{const r=$s(e,t);if(r===1)return e[t];if(r===2)return e[t+1];if(r===3)return(e[t+1]<<8)+e[t+2];if(r===4)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const wi=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function fu(e,t){const r=2+pa(e.byteLength+1),n=t.byteLength+r+e.byteLength;let o=0;const u=new Uint8Array(1+pa(n)+n);return u[o++]=48,o+=ya(u,o,n),u.set(t,o),o+=t.byteLength,u[o++]=3,o+=ya(u,o,e.byteLength+1),u[o++]=0,u.set(new Uint8Array(e),o),u}const lu=(e,t)=>{let r=0;const n=(a,h)=>{if(o[r++]!==a)throw new Error("Expected: "+h)},o=new Uint8Array(e);if(n(48,"sequence"),r+=$s(o,r),!An(o.slice(r,r+t.byteLength),t))throw new Error("Not the expected OID.");r+=t.byteLength,n(3,"bit string");const u=Vd(o,r)-1;r+=$s(o,r),n(0,"0 padding");const f=o.slice(r);if(u!==f.length)throw new Error(`DER payload mismatch: Expected length ${u} actual length ${f.length}`);return f};var ga=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},ma=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Zn,Xn;let du=class un{constructor(t){if(Zn.set(this,void 0),Xn.set(this,void 0),t.byteLength!==un.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");ga(this,Zn,t,"f"),ga(this,Xn,un.derEncode(t),"f")}static from(t){return this.fromDer(t.toDer())}static fromRaw(t){return new un(t)}static fromDer(t){return new un(this.derDecode(t))}static derEncode(t){return fu(t,wi).buffer}static derDecode(t){const r=lu(t,wi);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return ma(this,Zn,"f")}get derKey(){return ma(this,Xn,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}};Zn=new WeakMap,Xn=new WeakMap;du.RAW_KEY_LENGTH=32;class Md{constructor(){this.observers=[]}subscribe(t){this.observers.push(t)}unsubscribe(t){this.observers=this.observers.filter(r=>r!==t)}notify(t,...r){this.observers.forEach(n=>n(t,...r))}}class $d extends Md{constructor(){super()}print(t,...r){this.notify({message:t,level:"info"},...r)}warn(t,...r){this.notify({message:t,level:"warn"},...r)}error(t,r,...n){this.notify({message:t,level:"error",error:r},...n)}}var bt=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Je=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},vt,Jn,Qn,ei,ti,ri,ni,ii,Pr;const hu=.5,pu=1.5,yu=500,gu=6e4,mu=9e5,_u=10;class qi{constructor(t=qi.default){vt.set(this,void 0),Jn.set(this,void 0),Qn.set(this,void 0),ei.set(this,void 0),ti.set(this,void 0),ri.set(this,void 0),ni.set(this,void 0),ii.set(this,void 0),Pr.set(this,0);const{initialInterval:r=yu,randomizationFactor:n=hu,multiplier:o=pu,maxInterval:u=gu,maxElapsedTime:f=mu,maxIterations:a=_u,date:h=Date}=t;bt(this,vt,r,"f"),bt(this,Jn,n,"f"),bt(this,Qn,o,"f"),bt(this,ei,u,"f"),bt(this,ii,h,"f"),bt(this,ti,h.now(),"f"),bt(this,ri,f,"f"),bt(this,ni,a,"f")}get ellapsedTimeInMsec(){return Je(this,ii,"f").now()-Je(this,ti,"f")}get currentInterval(){return Je(this,vt,"f")}get count(){return Je(this,Pr,"f")}get randomValueFromInterval(){const t=Je(this,Jn,"f")*Je(this,vt,"f"),r=Je(this,vt,"f")-t,n=Je(this,vt,"f")+t;return Math.random()*(n-r)+r}incrementCurrentInterval(){var t;return bt(this,vt,Math.min(Je(this,vt,"f")*Je(this,Qn,"f"),Je(this,ei,"f")),"f"),bt(this,Pr,(t=Je(this,Pr,"f"),t++,t),"f"),Je(this,vt,"f")}next(){return this.ellapsedTimeInMsec>=Je(this,ri,"f")||Je(this,Pr,"f")>=Je(this,ni,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}vt=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,ei=new WeakMap,ti=new WeakMap,ri=new WeakMap,ni=new WeakMap,ii=new WeakMap,Pr=new WeakMap;qi.default={initialInterval:yu,randomizationFactor:hu,multiplier:pu,maxInterval:gu,maxElapsedTime:mu,maxIterations:_u,date:Date};var De=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},ue=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},et,lr,Kr,Nt,Ft,jr,fn,Cr,pt,yt,dr,hr,ln,Vr,Mr,pr,gr,wu,si,oi,yr,Ut;(function(e){e.Received="received",e.Processing="processing",e.Replied="replied",e.Rejected="rejected",e.Unknown="unknown",e.Done="done"})(Ut||(Ut={}));const qn=60*1e3,qd="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Gd="aaaaa-aa",Hd="ic0.app",Ld=".ic0.app",jd="icp0.io",zd=".icp0.io",Kd="icp-api.io",Dd=".icp-api.io";class ms extends Ce{constructor(t){super(t),this.message=t}}class Gn extends Ce{constructor(t){super(t),this.message=t}}function Yd(){let e;if(typeof window<"u")if(window.fetch)e=window.fetch.bind(window);else throw new ms("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)e=global.fetch.bind(global);else throw new ms("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(e=self.fetch.bind(self));if(e)return e;throw new ms("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function Wd(e){let t;if(e!==void 0)!e.match(/^[a-z]+:/)&&typeof window<"u"?t=new URL(window.location.protocol+"//"+e):t=new URL(e);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],o=typeof window<"u"?window.location:void 0,u=o==null?void 0:o.hostname;let f;u&&typeof u=="string"&&(n.some(a=>u.endsWith(a))?f=u:f=r.find(a=>u.endsWith(a))),o&&f?t=new URL(`${o.protocol}//${f}${o.port?":"+o.port:""}`):t=new URL("https://icp-api.io")}return t.toString()}class wr{constructor(t={}){var r,n;et.add(this),lr.set(this,null),Kr.set(this,!1),Nt.set(this,void 0),Ft.set(this,void 0),jr.set(this,void 0),fn.set(this,void 0),Cr.set(this,0),pt.set(this,void 0),yt.set(this,void 0),dr.set(this,void 0),hr.set(this,void 0),this._isAgent=!0,this.config={},ln.set(this,0),this.log=new $d,Vr.set(this,[]),Mr.set(this,[]),pr.set(this,new Cd({expirationTime:5*60*1e3})),gr.set(this,!0),oi.set(this,(f,a)=>{if(ue(this,gr,"f")===!1)return f;if(!a)throw new Bt("Invalid signature from replica signed query: no matching node key found.");const{status:h,signatures:w=[],requestId:E}=f,m=Ct(new TextEncoder().encode("\vic-response"));for(const N of w){const{timestamp:x,identity:p}=N,O=Ee.fromUint8Array(p).toText();let q;if(h==="replied"){const{reply:I}=f;q=pi({status:h,reply:I,timestamp:BigInt(x),request_id:E})}else if(h==="rejected"){const{reject_code:I,reject_message:W,error_code:J}=f;q=pi({status:h,reject_code:I,reject_message:W,error_code:J,timestamp:BigInt(x),request_id:E})}else throw new Error(`Unknown status: ${h}`);const K=mt(m,Ct(new Uint8Array(q))),D=a==null?void 0:a.nodeKeys.get(O);if(!D)throw new Bt("Invalid signature from replica signed query: no matching node key found.");const V=du.fromDer(D).rawKey;if(kr.verify(N.signature,new Uint8Array(K),new Uint8Array(V)))return f;throw new Bt(`Invalid signature from replica ${O} signed query.`)}return f}),this.config=t,De(this,Ft,t.fetch||Yd()||fetch.bind(global),"f"),De(this,jr,t.fetchOptions,"f"),De(this,fn,t.callOptions,"f"),De(this,Kr,(r=t.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),t.rootKey?this.rootKey=t.rootKey:ue(this,Kr,"f")?this.rootKey=null:this.rootKey=$t(qd);const o=Wd(t.host);this.host=new URL(o),t.verifyQuerySignatures!==void 0&&De(this,gr,t.verifyQuerySignatures,"f"),De(this,yt,(n=t.retryTimes)!==null&&n!==void 0?n:3,"f");const u=()=>new qi({maxIterations:ue(this,yt,"f")});if(De(this,dr,t.backoffStrategy||u,"f"),this.host.hostname.endsWith(Ld)?this.host.hostname=Hd:this.host.hostname.endsWith(zd)?this.host.hostname=jd:this.host.hostname.endsWith(Dd)&&(this.host.hostname=Kd),t.credentials){const{name:f,password:a}=t.credentials;De(this,pt,`${f}${a?":"+a:""}`,"f")}if(De(this,Nt,Promise.resolve(t.identity||new wn),"f"),t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes>5)throw new Ce(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);if(t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes<=0)throw new Ce(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);De(this,hr,t.ingressExpiryInMinutes||5,"f"),this.addTransform("update",Wo(Us)),t.useQueryNonces&&this.addTransform("query",Wo(Us)),t.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return ue(this,ln,"f")}static createSync(t={}){return new this(Object.assign({},t))}static async create(t={shouldFetchRootKey:!1}){const r=wr.createSync(t),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&t.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(t){var r;try{return"config"in t?await wr.create(t.config):await wr.create({fetch:t._fetch,fetchOptions:t._fetchOptions,callOptions:t._callOptions,host:t._host.toString(),identity:(r=t._identity)!==null&&r!==void 0?r:void 0})}catch{throw new Ce("Failed to create agent from provided agent")}}isLocal(){const t=this.host.hostname;return t==="127.0.0.1"||t.endsWith("127.0.0.1")}addTransform(t,r,n=r.priority||0){if(t==="update"){const o=ue(this,Mr,"f").findIndex(u=>(u.priority||0)<n);ue(this,Mr,"f").splice(o>=0?o:ue(this,Mr,"f").length,0,Object.assign(r,{priority:n}))}else if(t==="query"){const o=ue(this,Vr,"f").findIndex(u=>(u.priority||0)<n);ue(this,Vr,"f").splice(o>=0?o:ue(this,Vr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ue(this,Nt,"f"))throw new Gn("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ue(this,Nt,"f")).getPrincipal()}async call(t,r,n){var o,u;await ue(this,et,"m",yr).call(this);const f=(o=r.callSync)!==null&&o!==void 0?o:!0,a=await(n!==void 0?await n:await ue(this,Nt,"f"));if(!a)throw new Gn("This identity has expired due this application's security policy. Please refresh your authentication.");const h=Ee.from(t),w=r.effectiveCanisterId?Ee.from(r.effectiveCanisterId):h,E=a.getPrincipal()||Ee.anonymous();let m=new Mn(ue(this,hr,"f")*qn);Math.abs(ue(this,Cr,"f"))>1e3*30&&(m=new Mn(ue(this,hr,"f")*qn+ue(this,Cr,"f")));const N={request_type:Fs.Call,canister_id:h,method_name:r.methodName,arg:r.arg,sender:E,ingress_expiry:m};let x=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ue(this,pt,"f")?{Authorization:"Basic "+btoa(ue(this,pt,"f"))}:{})},endpoint:"call",body:N}),p;r!=null&&r.nonce?p=O(r.nonce):x.body.nonce?p=O(x.body.nonce):p=void 0,N.nonce=p;function O(V){return new Uint8Array(V)}x=await a.transformRequest(x);const q=ss(x.body),K=ue(this,dr,"f").call(this),D=_n(N);try{const V=()=>(this.log.print(`fetching "/api/v3/canister/${w.toText()}/call" with request:`,x),ue(this,Ft,"f").call(this,""+new URL(`/api/v3/canister/${w.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ue(this,fn,"f")),x.request),{body:q}))),te=()=>(this.log.print(`fetching "/api/v2/canister/${w.toText()}/call" with request:`,x),ue(this,Ft,"f").call(this,""+new URL(`/api/v2/canister/${w.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ue(this,fn,"f")),x.request),{body:q}))),W=await ue(this,et,"m",si).call(this,{request:f?V:te,backoff:K,tries:0}),J=await W.arrayBuffer(),F=W.status===200&&J.byteLength>0?Vt(J):null;if(F&&"certificate"in F){const P=await this.parseTimeFromResponse({certificate:F.certificate});De(this,ln,P,"f")}return{requestId:D,response:{ok:W.ok,status:W.status,statusText:W.statusText,body:F,headers:sn(W.headers)},requestDetails:N}}catch(V){if(V.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(t,Object.assign(Object.assign({},r),{callSync:!1}),n);const te=`Error while making call: ${(u=V.message)!==null&&u!==void 0?u:String(V)}`,I=new xl(te,V,Pe(D),Pe(x.body.sender_pubkey),Pe(x.body.sender_sig),String(x.body.content.ingress_expiry._value));throw this.log.error(te,I),I}}async query(t,r,n){var o,u,f,a;await ue(this,et,"m",yr).call(this);const h=ue(this,dr,"f").call(this),w=r.effectiveCanisterId?Ee.from(r.effectiveCanisterId):Ee.from(t);this.log.print(`ecid ${w.toString()}`),this.log.print(`canisterId ${t.toString()}`);let E,m;const N=await(n!==void 0?n:ue(this,Nt,"f"));if(!N)throw new Gn("This identity has expired due this application's security policy. Please refresh your authentication.");const x=Ee.from(t),p=(N==null?void 0:N.getPrincipal())||Ee.anonymous(),O={request_type:"query",canister_id:x,method_name:r.methodName,arg:r.arg,sender:p,ingress_expiry:new Mn(ue(this,hr,"f")*qn)},q=_n(O);E=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ue(this,pt,"f")?{Authorization:"Basic "+btoa(ue(this,pt,"f"))}:{})},endpoint:"read",body:O}),E=await(N==null?void 0:N.transformRequest(E));const K=ss(E.body),D={canister:x.toText(),ecid:w,transformedRequest:E,body:K,requestId:q,backoff:h,tries:0},V=async()=>({requestDetails:O,query:await ue(this,et,"m",wu).call(this,D)}),te=async()=>{if(!ue(this,gr,"f"))return;const I=ue(this,pr,"f").get(w.toString());return I||(await this.fetchSubnetKeys(w.toString()),ue(this,pr,"f").get(w.toString()))};try{const[I,W]=await Promise.all([V(),te()]);m=I;const{requestDetails:J,query:F}=m,P=Object.assign(Object.assign({},F),{requestDetails:J});if(this.log.print("Query response:",P),!ue(this,gr,"f"))return P;try{return ue(this,oi,"f").call(this,P,W)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ue(this,pr,"f").delete(t.toString()),await this.fetchSubnetKeys(w.toString());const X=ue(this,pr,"f").get(t.toString());if(!X)throw new Bt("Invalid signature from replica signed query: no matching node key found.");return ue(this,oi,"f").call(this,P,X)}}catch(I){const W=`Error while making call: ${(o=I.message)!==null&&o!==void 0?o:String(I)}`,J=new El(W,I,String(q),Pe((u=E==null?void 0:E.body)===null||u===void 0?void 0:u.sender_pubkey),Pe((f=E==null?void 0:E.body)===null||f===void 0?void 0:f.sender_sig),String((a=E==null?void 0:E.body)===null||a===void 0?void 0:a.content.ingress_expiry._value));throw this.log.error(W,J),J}}async createReadStateRequest(t,r){await ue(this,et,"m",yr).call(this);const n=await(r!==void 0?await r:await ue(this,Nt,"f"));if(!n)throw new Gn("This identity has expired due this application's security policy. Please refresh your authentication.");const o=(n==null?void 0:n.getPrincipal())||Ee.anonymous(),u=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ue(this,pt,"f")?{Authorization:"Basic "+btoa(ue(this,pt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:t.paths,sender:o,ingress_expiry:new Mn(ue(this,hr,"f")*qn)}});return n==null?void 0:n.transformRequest(u)}async readState(t,r,n,o){var u,f,a,h;function w(O){for(const q of O.paths){const[K,D]=q,V=Ct(new TextEncoder().encode("request_status"));if(An(K,V))return D}}const E=w(r);await ue(this,et,"m",yr).call(this);const m=typeof t=="string"?Ee.fromText(t):t,N=o??await this.createReadStateRequest(r,n),x=ss(N.body);this.log.print(`fetching "/api/v2/canister/${m}/read_state" with request:`,N);const p=ue(this,dr,"f").call(this);try{const O=await ue(this,et,"m",si).call(this,{request:()=>ue(this,Ft,"f").call(this,""+new URL(`/api/v2/canister/${m.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ue(this,jr,"f")),N.request),{body:x})),backoff:p,tries:0});if(!O.ok)throw new Error(`Server returned an error:
  Code: ${O.status} (${O.statusText})
  Body: ${await O.text()}
`);const q=Vt(await O.arrayBuffer());this.log.print("Read state response:",q);const K=await this.parseTimeFromResponse(q);return K>0&&(this.log.print("Read state response time:",K),De(this,ln,K,"f")),q}catch(O){const q=`Caught exception while attempting to read state: ${(u=O.message)!==null&&u!==void 0?u:String(O)}`,K=new vl(q,O,String(E),Pe((f=N==null?void 0:N.body)===null||f===void 0?void 0:f.sender_pubkey),Pe((a=N==null?void 0:N.body)===null||a===void 0?void 0:a.sender_sig),String((h=N==null?void 0:N.body)===null||h===void 0?void 0:h.content.ingress_expiry._value));throw this.log.error(q,K),K}}async parseTimeFromResponse(t){let r;if(t.certificate){const n=Vt(t.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const o=Xr(["time"],r);if(o.status!==He.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(o.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(o))throw new Error("Time was not found in the response or was not in its expected format.");const u=no(Ct(o.value));return this.log.print("Time from response:",u),this.log.print("Time from response in milliseconds:",Number(u)),Number(u)}else this.log.warn("No certificate found in response");return 0}async syncTime(t){await ue(this,et,"m",yr).call(this);const r=await mf(()=>Promise.resolve().then(()=>wd),void 0),n=Date.now();try{t||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const o=wr.createSync({identity:new wn,host:this.host.toString(),fetch:ue(this,Ft,"f"),retryTimes:0}),f=(await r.request({canisterId:t??Ee.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:o,paths:["time"]})).get("time");f&&(De(this,Cr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ue(this,Cr,"f")}`,level:"info"}))}catch(o){this.log.error("Caught exception while attempting to sync time",o)}}async status(){const t=ue(this,pt,"f")?{Authorization:"Basic "+btoa(ue(this,pt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ue(this,dr,"f").call(this),n=await ue(this,et,"m",si).call(this,{backoff:r,request:()=>ue(this,Ft,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:t},ue(this,jr,"f"))),tries:0});return Vt(await n.arrayBuffer())}async fetchRootKey(){let t;return ue(this,lr,"f")?t=await ue(this,lr,"f"):(De(this,lr,new Promise((r,n)=>{this.status().then(o=>{const u=o.root_key;this.rootKey=u,r(u)}).catch(n)}),"f"),t=await ue(this,lr,"f")),De(this,lr,null,"f"),t}invalidateIdentity(){De(this,Nt,null,"f")}replaceIdentity(t){De(this,Nt,Promise.resolve(t),"f")}async fetchSubnetKeys(t){await ue(this,et,"m",yr).call(this);const r=Ee.from(t),o=(await su({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(o&&typeof o=="object"&&"nodeKeys"in o)return ue(this,pr,"f").set(r.toText(),o),o}_transform(t){let r=Promise.resolve(t);if(t.endpoint==="call")for(const n of ue(this,Mr,"f"))r=r.then(o=>n(o).then(u=>u||o));else for(const n of ue(this,Vr,"f"))r=r.then(o=>n(o).then(u=>u||o));return r}}lr=new WeakMap,Kr=new WeakMap,Nt=new WeakMap,Ft=new WeakMap,jr=new WeakMap,fn=new WeakMap,Cr=new WeakMap,pt=new WeakMap,yt=new WeakMap,dr=new WeakMap,hr=new WeakMap,ln=new WeakMap,Vr=new WeakMap,Mr=new WeakMap,pr=new WeakMap,gr=new WeakMap,oi=new WeakMap,et=new WeakSet,wu=async function e(t){var r,n;const{ecid:o,transformedRequest:u,body:f,requestId:a,backoff:h,tries:w}=t,E=w===0?0:h.next();if(this.log.print(`fetching "/api/v2/canister/${o.toString()}/query" with tries:`,{tries:w,backoff:h,delay:E}),E===null)throw new Ce(`Timestamp failed to pass the watermark after retrying the configured ${ue(this,yt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);E>0&&await new Promise(p=>setTimeout(p,E));let m;try{this.log.print(`fetching "/api/v2/canister/${o.toString()}/query" with request:`,u);const p=await ue(this,Ft,"f").call(this,""+new URL(`/api/v2/canister/${o.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ue(this,jr,"f")),u.request),{body:f}));if(p.status===200){const O=Vt(await p.arrayBuffer());m=Object.assign(Object.assign({},O),{httpDetails:{ok:p.ok,status:p.status,statusText:p.statusText,headers:sn(p.headers)},requestId:a})}else throw new os(`Gateway returned an error:
  Code: ${p.status} (${p.statusText})
  Body: ${await p.text()}
`,{ok:p.ok,status:p.status,statusText:p.statusText,headers:sn(p.headers)})}catch(p){if(w<ue(this,yt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${p}
  Retrying query.`),await ue(this,et,"m",e).call(this,Object.assign(Object.assign({},t),{tries:w+1}));throw p}const N=(n=(r=m.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ue(this,gr,"f"))return m;if(!N)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const x=Number(BigInt(N)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:x}),Number(this.waterMark)>x){const p=new Ce("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",p,{timestamp:N,waterMark:this.waterMark}),w<ue(this,yt,"f"))return await ue(this,et,"m",e).call(this,Object.assign(Object.assign({},t),{tries:w+1}));throw new Ce(`Timestamp failed to pass the watermark after retrying the configured ${ue(this,yt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return m},si=async function e(t){const{request:r,backoff:n,tries:o}=t,u=o===0?0:n.next();if(u===null)throw new Ce(`Timestamp failed to pass the watermark after retrying the configured ${ue(this,yt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);u>0&&await new Promise(w=>setTimeout(w,u));let f;try{f=await r()}catch(w){if(ue(this,yt,"f")>o)return this.log.warn(`Caught exception while attempting to make request:
  ${w}
  Retrying request.`),await ue(this,et,"m",e).call(this,{request:r,backoff:n,tries:o+1});throw w}if(f.ok)return f;const a=await f.clone().text(),h=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${a}
`;if(f.status===404&&f.url.includes("api/v3"))throw new os("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:sn(f.headers)});if(o<ue(this,yt,"f"))return await ue(this,et,"m",e).call(this,{request:r,backoff:n,tries:o+1});throw new os(h,{ok:f.ok,status:f.status,statusText:f.statusText,headers:sn(f.headers)})},yr=async function(){if(!this.rootKey)if(this.rootKey===null&&ue(this,Kr,"f"))await this.fetchRootKey();else throw new Ce(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ue(this,Kr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var _a;(function(e){e.Error="err",e.GetPrincipal="gp",e.GetPrincipalResponse="gpr",e.Query="q",e.QueryResponse="qr",e.Call="c",e.CallResponse="cr",e.ReadState="rs",e.ReadStateResponse="rsr",e.Status="s",e.StatusResponse="sr"})(_a||(_a={}));function wa(){const e=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!e)throw new Error("No Agent could be found.");return e}const Zd=5*60*1e3;function bu(){return t0(Jd(Xd(),1e3),e0(1e3,1.2),Qd(Zd))}function Xd(){let e=!0;return async()=>e?(e=!1,!0):!1}function Jd(e,t){return async(r,n,o)=>{if(await e(r,n,o))return new Promise(u=>setTimeout(u,t))}}function Qd(e){const t=Date.now()+e;return async(r,n,o)=>{if(Date.now()>t)throw new Error(`Request timed out after ${e} msec:
  Request ID: ${Pe(n)}
  Request status: ${o}
`)}}function e0(e,t){let r=e;return()=>new Promise(n=>setTimeout(()=>{r*=t,n()},r))}function t0(...e){return async(t,r,n)=>{for(const o of e)await o(t,r,n)}}async function xu(e,t,r,n=bu(),o,u){var f;const a=[new TextEncoder().encode("request_status"),r],h=o??await((f=e.createReadStateRequest)===null||f===void 0?void 0:f.call(e,{paths:[a]})),w=await e.readState(t,{paths:[a]},void 0,h);if(e.rootKey==null)throw new Error("Agent root key not initialized before polling");const E=await xr.create({certificate:w.certificate,rootKey:e.rootKey,canisterId:t,blsVerify:u}),m=dt(E.lookup([...a,new TextEncoder().encode("status")]));let N;switch(typeof m>"u"?N=Ut.Unknown:N=new TextDecoder().decode(m),N){case Ut.Replied:return{reply:dt(E.lookup([...a,"reply"])),certificate:E};case Ut.Received:case Ut.Unknown:case Ut.Processing:return await n(t,r,N),xu(e,t,r,n,h,u);case Ut.Rejected:{const x=new Uint8Array(dt(E.lookup([...a,"reject_code"])))[0],p=new TextDecoder().decode(dt(E.lookup([...a,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${Pe(r)}
  Reject code: ${x}
  Reject text: ${p}
`)}case Ut.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Pe(r)}
`)}throw new Error("unreachable")}const r0=({IDL:e})=>{const t=e.Variant({mainnet:e.Null,testnet:e.Null}),r=e.Text,n=e.Record({network:t,address:r,min_confirmations:e.Opt(e.Nat32)}),o=e.Nat64,u=o,f=e.Nat32,a=e.Record({start_height:f,end_height:e.Opt(f),network:t}),h=e.Vec(e.Nat8),w=e.Record({tip_height:f,block_headers:e.Vec(h)}),E=e.Record({network:t}),m=e.Nat64,N=e.Vec(m),x=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:r}),p=e.Vec(e.Nat8),O=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),q=e.Record({height:e.Nat32,value:o,outpoint:O}),K=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:f,tip_block_hash:p,utxos:e.Vec(q)}),D=e.Record({transaction:e.Vec(e.Nat8),network:t}),V=e.Principal,te=e.Record({canister_id:V,num_requested_changes:e.Opt(e.Nat64)}),I=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),W=e.Vec(e.Nat8),J=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),load_snapshot:e.Record({canister_version:e.Nat64,taken_at_timestamp:e.Nat64,snapshot_id:W}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),F=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:I,details:J}),P=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(F),total_num_changes:e.Nat64}),G=e.Record({canister_id:V}),X=e.Variant({controllers:e.Null,public:e.Null,allowed_viewers:e.Vec(e.Principal)}),re=e.Record({freezing_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:X,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),_=e.Record({status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:re,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),R=e.Record({canister_id:V}),M=e.Record({freezing_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(X),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),Y=e.Record({settings:e.Opt(M),sender_canister_version:e.Opt(e.Nat64)}),ee=e.Record({canister_id:V}),ne=e.Record({canister_id:V}),le=e.Record({canister_id:V,snapshot_id:W}),ge=e.Record({canister_id:V}),ie=e.Variant({secp256k1:e.Null}),ae=e.Record({key_id:e.Record({name:e.Text,curve:ie}),canister_id:e.Opt(V),derivation_path:e.Vec(e.Vec(e.Nat8))}),Ne=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),S=e.Record({canister_id:V}),be=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),Be=e.Record({canister_log_records:e.Vec(be)}),ce=e.Record({value:e.Text,name:e.Text}),Q=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(ce)}),se=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:Q})],[Q],["query"]),context:e.Vec(e.Nat8)})),headers:e.Vec(ce)}),B=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),A=e.Record({hash:e.Vec(e.Nat8)}),k=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:B,chunk_hashes_list:e.Vec(A),target_canister:V,store_canister:e.Opt(V),sender_canister_version:e.Opt(e.Nat64)}),L=e.Vec(e.Nat8),H=e.Record({arg:e.Vec(e.Nat8),wasm_module:L,mode:B,canister_id:V,sender_canister_version:e.Opt(e.Nat64)}),j=e.Record({canister_id:V}),g=e.Record({id:W,total_size:e.Nat64,taken_at_timestamp:e.Nat64}),l=e.Vec(g),d=e.Record({canister_id:V,sender_canister_version:e.Opt(e.Nat64),snapshot_id:W}),b=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),T=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),C=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(T)})),Z=e.Record({settings:e.Opt(M),specified_id:e.Opt(V),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),oe=e.Record({canister_id:V}),ye=e.Record({canister_id:V,amount:e.Nat}),he=e.Vec(e.Nat8),ve=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),s=e.Record({key_id:e.Record({algorithm:ve,name:e.Text}),canister_id:e.Opt(V),derivation_path:e.Vec(e.Vec(e.Nat8))}),i=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),c=e.Record({key_id:e.Record({name:e.Text,curve:ie}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),y=e.Record({signature:e.Vec(e.Nat8)}),v=e.Variant({bip341:e.Record({merkle_root_hash:e.Vec(e.Nat8)})}),U=e.Record({aux:e.Opt(v),key_id:e.Record({algorithm:ve,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),$=e.Record({signature:e.Vec(e.Nat8)}),de=e.Record({canister_id:V}),me=e.Record({canister_id:V}),pe=e.Record({canister_id:V}),fe=e.Vec(A),we=e.Record({subnet_id:e.Principal}),Ie=e.Record({replica_version:e.Text}),or=e.Record({replace_snapshot:e.Opt(W),canister_id:V}),ar=g,cr=e.Record({canister_id:V,sender_canister_version:e.Opt(e.Nat64)}),ur=e.Record({canister_id:e.Principal,settings:M,sender_canister_version:e.Opt(e.Nat64)}),fr=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal}),ft=A;return e.Service({bitcoin_get_balance:e.Func([n],[u],[]),bitcoin_get_block_headers:e.Func([a],[w],[]),bitcoin_get_current_fee_percentiles:e.Func([E],[N],[]),bitcoin_get_utxos:e.Func([x],[K],[]),bitcoin_send_transaction:e.Func([D],[],[]),canister_info:e.Func([te],[P],[]),canister_status:e.Func([G],[_],[]),clear_chunk_store:e.Func([R],[],[]),create_canister:e.Func([Y],[ee],[]),delete_canister:e.Func([ne],[],[]),delete_canister_snapshot:e.Func([le],[],[]),deposit_cycles:e.Func([ge],[],[]),ecdsa_public_key:e.Func([ae],[Ne],[]),fetch_canister_logs:e.Func([S],[Be],["query"]),http_request:e.Func([se],[Q],[]),install_chunked_code:e.Func([k],[],[]),install_code:e.Func([H],[],[]),list_canister_snapshots:e.Func([j],[l],[]),load_canister_snapshot:e.Func([d],[],[]),node_metrics_history:e.Func([b],[C],[]),provisional_create_canister_with_cycles:e.Func([Z],[oe],[]),provisional_top_up_canister:e.Func([ye],[],[]),raw_rand:e.Func([],[he],[]),schnorr_public_key:e.Func([s],[i],[]),sign_with_ecdsa:e.Func([c],[y],[]),sign_with_schnorr:e.Func([U],[$],[]),start_canister:e.Func([de],[],[]),stop_canister:e.Func([me],[],[]),stored_chunks:e.Func([pe],[fe],[]),subnet_info:e.Func([we],[Ie],[]),take_canister_snapshot:e.Func([or],[ar],[]),uninstall_code:e.Func([cr],[],[]),update_settings:e.Func([ur],[],[]),upload_chunk:e.Func([fr],[ft],[])})};class Eu extends Ce{constructor(t,r,n,o){super(["Call failed:",`  Canister: ${t.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(o).map(u=>`  "${u}": ${JSON.stringify(o[u])}`)].join(`
`)),this.canisterId=t,this.methodName=r,this.type=n,this.props=o}}class n0 extends Eu{constructor(t,r,n){var o;super(t,r,"query",{Status:n.status,Code:(o=Ss[n.reject_code])!==null&&o!==void 0?o:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class ba extends Eu{constructor(t,r,n,o,u,f,a){super(t,r,"update",Object.assign({"Request ID":Pe(n)},o.body?Object.assign(Object.assign({},a?{"Error code":a}:{}),{"Reject code":String(u),"Reject message":f}):{"HTTP status code":o.status.toString(),"HTTP status text":o.statusText})),this.requestId=n,this.response=o,this.reject_code=u,this.reject_message=f,this.error_code=a}}const lt=Symbol.for("ic-agent-metadata");class Bn{constructor(t){this[lt]=Object.freeze(t)}static agentOf(t){return t[lt].config.agent}static interfaceOf(t){return t[lt].service}static canisterIdOf(t){return Ee.from(t[lt].config.canisterId)}static async install(t,r){const n=t.mode===void 0?{install:null}:t.mode,o=t.arg?[...new Uint8Array(t.arg)]:[],u=[...new Uint8Array(t.module)],f=typeof r.canisterId=="string"?Ee.fromText(r.canisterId):r.canisterId;await xa(r).install_code({mode:n,arg:o,wasm_module:u,canister_id:f,sender_canister_version:[]})}static async createCanister(t,r){function n(u){return[{controllers:u.controllers?[u.controllers]:[],compute_allocation:u.compute_allocation?[u.compute_allocation]:[],freezing_threshold:u.freezing_threshold?[u.freezing_threshold]:[],memory_allocation:u.memory_allocation?[u.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:o}=await xa(t||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return o}static async createAndInstallCanister(t,r,n){const o=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:o})),this.createActor(t,Object.assign(Object.assign({},n),{canisterId:o}))}static createActorClass(t,r){const n=t({IDL:il});class o extends Bn{constructor(f){if(!f.canisterId)throw new Ce(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const a=typeof f.canisterId=="string"?Ee.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},vu),f),{canisterId:a}),service:n});for(const[h,w]of n._fields)r!=null&&r.httpDetails&&w.annotations.push(qs),r!=null&&r.certificate&&w.annotations.push(Nu),this[h]=i0(this,h,w,f.blsVerify)}}return o}static createActor(t,r){if(!r.canisterId)throw new Ce(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(t))(r)}static createActorWithHttpDetails(t,r){return new(this.createActorClass(t,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(t,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(t,n))(r)}}function Fr(e,t){const r=ic(e,pf.Buffer.from(t));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const vu={pollingStrategyFactory:bu},qs="http-details",Nu="certificate";function i0(e,t,r,n){let o;r.annotations.includes("query")||r.annotations.includes("composite_query")?o=async(f,...a)=>{var h,w;f=Object.assign(Object.assign({},f),(w=(h=e[lt].config).queryTransform)===null||w===void 0?void 0:w.call(h,t,a,Object.assign(Object.assign({},e[lt].config),f)));const E=f.agent||e[lt].config.agent||wa(),m=Ee.from(f.canisterId||e[lt].config.canisterId),N=Os(r.argTypes,a),x=await E.query(m,{methodName:t,arg:N,effectiveCanisterId:f.effectiveCanisterId}),p=Object.assign(Object.assign({},x.httpDetails),{requestDetails:x.requestDetails});switch(x.status){case"rejected":throw new n0(m,t,x);case"replied":return r.annotations.includes(qs)?{httpDetails:p,result:Fr(r.retTypes,x.reply.arg)}:Fr(r.retTypes,x.reply.arg)}}:o=async(f,...a)=>{var h,w;f=Object.assign(Object.assign({},f),(w=(h=e[lt].config).callTransform)===null||w===void 0?void 0:w.call(h,t,a,Object.assign(Object.assign({},e[lt].config),f)));const E=f.agent||e[lt].config.agent||wa(),{canisterId:m,effectiveCanisterId:N,pollingStrategyFactory:x}=Object.assign(Object.assign(Object.assign({},vu),e[lt].config),f),p=Ee.from(m),O=N!==void 0?Ee.from(N):p,q=Os(r.argTypes,a),{requestId:K,response:D,requestDetails:V}=await E.call(p,{methodName:t,arg:q,effectiveCanisterId:O});let te,I;if(D.body&&D.body.certificate){if(E.rootKey==null)throw new Error("Agent is missing root key");const P=D.body.certificate;I=await xr.create({certificate:Er(P),rootKey:E.rootKey,canisterId:Ee.from(m),blsVerify:n});const G=[new TextEncoder().encode("request_status"),K];switch(new TextDecoder().decode(dt(I.lookup([...G,"status"])))){case"replied":te=dt(I.lookup([...G,"reply"]));break;case"rejected":{const re=new Uint8Array(dt(I.lookup([...G,"reject_code"])))[0],_=new TextDecoder().decode(dt(I.lookup([...G,"reject_message"]))),R=dt(I.lookup([...G,"error_code"])),M=R?new TextDecoder().decode(R):void 0;throw new ba(p,t,K,D,re,_,M)}}}else if(D.body&&"reject_message"in D.body){const{reject_code:P,reject_message:G,error_code:X}=D.body;throw new ba(p,t,K,D,P,G,X)}if(D.status===202){const P=x(),G=await xu(E,O,K,P,n);I=G.certificate,te=G.reply}const W=r.annotations.includes(qs),J=r.annotations.includes(Nu),F=Object.assign(Object.assign({},D),{requestDetails:V});if(te!==void 0)return W&&J?{httpDetails:F,certificate:I,result:Fr(r.retTypes,te)}:J?{certificate:I,result:Fr(r.retTypes,te)}:W?{httpDetails:F,result:Fr(r.retTypes,te)}:Fr(r.retTypes,te);if(r.retTypes.length===0)return W?{httpDetails:D,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const u=(...f)=>o({},...f);return u.withOptions=f=>(...a)=>o(f,...a),u}function xa(e){function t(r,n){if(e.effectiveCanisterId)return{effectiveCanisterId:Ee.from(e.effectiveCanisterId)};const o=n[0];let u=Ee.fromHex("");return o&&typeof o=="object"&&o.target_canister&&r==="install_chunked_code"&&(u=Ee.from(o.target_canister)),o&&typeof o=="object"&&o.canister_id&&(u=Ee.from(o.canister_id)),{effectiveCanisterId:u}}return Bn.createActor(r0,Object.assign(Object.assign(Object.assign({},e),{canisterId:Ee.fromHex("")}),{callTransform:t,queryTransform:t}))}var bi=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Jt=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ai,ci,$r,qr;function Ea(e){return e!==null&&typeof e=="object"}class Mt{constructor(t){if(ai.set(this,void 0),ci.set(this,void 0),t.byteLength!==Mt.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");bi(this,ai,Ct(t),"f"),bi(this,ci,Mt.derEncode(t),"f")}static from(t){if(typeof t=="string"){const r=$t(t);return this.fromRaw(r)}else if(Ea(t)){const r=t;if(Ea(r)&&Object.hasOwnProperty.call(r,"__derEncodedPublicKey__"))return this.fromDer(r);if(ArrayBuffer.isView(r)){const n=r;return this.fromRaw(Ct(n.buffer))}else{if(r instanceof ArrayBuffer)return this.fromRaw(r);if("rawKey"in r)return this.fromRaw(r.rawKey);if("derKey"in r)return this.fromDer(r.derKey);if("toDer"in r)return this.fromDer(r.toDer())}}throw new Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(t){return new Mt(t)}static fromDer(t){return new Mt(this.derDecode(t))}static derEncode(t){const r=fu(t,wi).buffer;return r.__derEncodedPublicKey__=void 0,r}static derDecode(t){const r=lu(t,wi);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return Ct(r)}get rawKey(){return Jt(this,ai,"f")}get derKey(){return Jt(this,ci,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}ai=new WeakMap,ci=new WeakMap;Mt.RAW_KEY_LENGTH=32;class tr extends eo{constructor(t,r){super(),$r.set(this,void 0),qr.set(this,void 0),bi(this,$r,Mt.from(t),"f"),bi(this,qr,new Uint8Array(r),"f")}static generate(t){if(t&&t.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");t||(t=kr.utils.randomPrivateKey()),An(t,new Uint8Array(new Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");const r=new Uint8Array(32);for(let o=0;o<32;o++)r[o]=new Uint8Array(t)[o];const n=kr.getPublicKey(r);return tr.fromKeyPair(n,r)}static fromParsedJson(t){const[r,n]=t;return new tr(Mt.fromDer($t(r)),$t(n))}static fromJSON(t){const r=JSON.parse(t);if(Array.isArray(r)){if(typeof r[0]=="string"&&typeof r[1]=="string")return this.fromParsedJson([r[0],r[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(t)}`)}static fromKeyPair(t,r){return new tr(Mt.fromRaw(t),r)}static fromSecretKey(t){const r=kr.getPublicKey(new Uint8Array(t));return tr.fromKeyPair(r,t)}toJSON(){return[Pe(Jt(this,$r,"f").toDer()),Pe(Jt(this,qr,"f"))]}getKeyPair(){return{secretKey:Jt(this,qr,"f"),publicKey:Jt(this,$r,"f")}}getPublicKey(){return Jt(this,$r,"f")}async sign(t){const r=new Uint8Array(t),n=dn(kr.sign(r,Jt(this,qr,"f").slice(0,32)));return Object.defineProperty(n,"__signature__",{enumerable:!1,value:void 0}),n}static verify(t,r,n){const[o,u,f]=[t,r,n].map(a=>(typeof a=="string"&&(a=$t(a)),a instanceof Uint8Array&&(a=Ct(a.buffer)),new Uint8Array(a)));return kr.verify(o,u,f)}}$r=new WeakMap,qr=new WeakMap;class io extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,io.prototype)}}function va(e){if(typeof global<"u"&&global.crypto&&global.crypto.subtle)return global.crypto.subtle;if(e)return e;if(typeof crypto<"u"&&crypto.subtle)return crypto.subtle;throw new io("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class xi extends eo{constructor(t,r,n){super(),this._keyPair=t,this._derKey=r,this._subtleCrypto=n}static async generate(t){const{extractable:r=!1,keyUsages:n=["sign","verify"],subtleCrypto:o}=t??{},u=va(o),f=await u.generateKey({name:"ECDSA",namedCurve:"P-256"},r,n),a=await u.exportKey("spki",f.publicKey);return new this(f,a,u)}static async fromKeyPair(t,r){const n=va(r),o=await n.exportKey("spki",t.publicKey);return new xi(t,o,n)}getKeyPair(){return this._keyPair}getPublicKey(){const t=this._derKey,r=Object.create(this._keyPair.publicKey);return r.toDer=function(){return t},r}async sign(t){const r={name:"ECDSA",hash:{name:"SHA-256"}};return await this._subtleCrypto.sign(r,this._keyPair.privateKey,t)}}var s0=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Ur=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},It;class o0{constructor(t){It.set(this,void 0),s0(this,It,t,"f")}get rawKey(){return Ur(this,It,"f").rawKey}get derKey(){return Ur(this,It,"f").derKey}toDer(){return Ur(this,It,"f").toDer()}getPublicKey(){return Ur(this,It,"f")}getPrincipal(){if(!Ur(this,It,"f").rawKey)throw new Error("Cannot get principal from a public key without a raw key.");return Ee.fromUint8Array(new Uint8Array(Ur(this,It,"f").rawKey))}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}It=new WeakMap;var a0=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},c0=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},u0=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},ui;const f0=new TextEncoder().encode("ic-request-auth-delegation"),l0=new TextEncoder().encode(`
ic-request`);function _s(e){if(typeof e!="string"||e.length<64)throw new Error("Invalid public key.");return $t(e)}class so{constructor(t,r,n){this.pubkey=t,this.expiration=r,this.targets=n}toCBOR(){return ct.value.map(Object.assign({pubkey:ct.value.bytes(this.pubkey),expiration:ct.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:ct.value.array(this.targets.map(t=>ct.value.bytes(Er(t.toUint8Array()))))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:Pe(this.pubkey)},this.targets&&{targets:this.targets.map(t=>t.toHex())})}}async function d0(e,t,r,n){const o=new so(t.toDer(),BigInt(+r)*BigInt(1e6),n),u=new Uint8Array([...f0,...new Uint8Array(_n(Object.assign({},o)))]),f=await e.sign(Er(u));return{delegation:o,signature:f}}class Ei{constructor(t,r){this.delegations=t,this.publicKey=r}static async create(t,r,n=new Date(Date.now()+15*60*1e3),o={}){var u,f;const a=await d0(t,r,n,o.targets);return new Ei([...((u=o.previous)===null||u===void 0?void 0:u.delegations)||[],a],((f=o.previous)===null||f===void 0?void 0:f.publicKey)||t.getPublicKey().toDer())}static fromJSON(t){const{publicKey:r,delegations:n}=typeof t=="string"?JSON.parse(t):t;if(!Array.isArray(n))throw new Error("Invalid delegations.");const o=n.map(u=>{const{delegation:f,signature:a}=u,{pubkey:h,expiration:w,targets:E}=f;if(E!==void 0&&!Array.isArray(E))throw new Error("Invalid targets.");return{delegation:new so(_s(h),BigInt("0x"+w),E&&E.map(m=>{if(typeof m!="string")throw new Error("Invalid target.");return Ee.fromHex(m)})),signature:_s(a)}});return new this(o,_s(r))}static fromDelegations(t,r){return new this(t,r)}toJSON(){return{delegations:this.delegations.map(t=>{const{delegation:r,signature:n}=t,{targets:o}=r;return{delegation:Object.assign({expiration:r.expiration.toString(16),pubkey:Pe(r.pubkey)},o&&{targets:o.map(u=>u.toHex())}),signature:Pe(n)}}),publicKey:Pe(this.publicKey)}}}class Na extends eo{constructor(t,r){super(),this._inner=t,this._delegation=r}static fromDelegation(t,r){return new this(t,r)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(t){return this._inner.sign(t)}async transformRequest(t){const{body:r}=t,n=u0(t,["body"]),o=await _n(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_sig:await this.sign(Er(new Uint8Array([...l0,...new Uint8Array(o)]))),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class vi extends o0{constructor(t,r){super(t),ui.set(this,void 0),a0(this,ui,r,"f")}get delegation(){return c0(this,ui,"f")}static fromDelegation(t,r){return new vi(t,r)}}ui=new WeakMap;function h0(e,t){for(const{delegation:n}of e.delegations)if(+new Date(Number(n.expiration/BigInt(1e6)))<=+Date.now())return!1;const r=[];for(const n of r){const o=n.toText();for(const{delegation:u}of e.delegations){if(u.targets===void 0)continue;let f=!0;for(const a of u.targets)if(a.toText()===o){f=!1;break}if(f)return!1}}return!0}var Ba;(function(e){e[e.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(Ba||(Ba={}));const Ta=["mousedown","mousemove","keydown","touchstart","wheel"];class Aa{constructor(t={}){var r;this.callbacks=[],this.idleTimeout=10*60*1e3,this.timeoutID=void 0;const{onIdle:n,idleTimeout:o=10*60*1e3}=t||{};this.callbacks=n?[n]:[],this.idleTimeout=o;const u=this._resetTimer.bind(this);window.addEventListener("load",u,!0),Ta.forEach(function(a){document.addEventListener(a,u,!0)});const f=(a,h)=>{let w;return(...E)=>{const m=this,N=function(){w=void 0,a.apply(m,E)};clearTimeout(w),w=window.setTimeout(N,h)}};if(t!=null&&t.captureScroll){const a=f(u,(r=t==null?void 0:t.scrollDebounce)!==null&&r!==void 0?r:100);window.addEventListener("scroll",a,!0)}u()}static create(t={}){return new this(t)}registerCallback(t){this.callbacks.push(t)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);const t=this._resetTimer.bind(this);Ta.forEach(function(r){document.removeEventListener(r,t,!0)}),this.callbacks.forEach(r=>r())}_resetTimer(){const t=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(t,this.idleTimeout)}}const p0=(e,t)=>t.some(r=>e instanceof r);let Sa,Ra;function y0(){return Sa||(Sa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g0(){return Ra||(Ra=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bu=new WeakMap,Gs=new WeakMap,Tu=new WeakMap,ws=new WeakMap,oo=new WeakMap;function m0(e){const t=new Promise((r,n)=>{const o=()=>{e.removeEventListener("success",u),e.removeEventListener("error",f)},u=()=>{r(nr(e.result)),o()},f=()=>{n(e.error),o()};e.addEventListener("success",u),e.addEventListener("error",f)});return t.then(r=>{r instanceof IDBCursor&&Bu.set(r,e)}).catch(()=>{}),oo.set(t,e),t}function _0(e){if(Gs.has(e))return;const t=new Promise((r,n)=>{const o=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",f),e.removeEventListener("abort",f)},u=()=>{r(),o()},f=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",u),e.addEventListener("error",f),e.addEventListener("abort",f)});Gs.set(e,t)}let Hs={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Gs.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Tu.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return nr(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function w0(e){Hs=e(Hs)}function b0(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(bs(this),t,...r);return Tu.set(n,t.sort?t.sort():[t]),nr(n)}:g0().includes(e)?function(...t){return e.apply(bs(this),t),nr(Bu.get(this))}:function(...t){return nr(e.apply(bs(this),t))}}function x0(e){return typeof e=="function"?b0(e):(e instanceof IDBTransaction&&_0(e),p0(e,y0())?new Proxy(e,Hs):e)}function nr(e){if(e instanceof IDBRequest)return m0(e);if(ws.has(e))return ws.get(e);const t=x0(e);return t!==e&&(ws.set(e,t),oo.set(t,e)),t}const bs=e=>oo.get(e);function E0(e,t,{blocked:r,upgrade:n,blocking:o,terminated:u}={}){const f=indexedDB.open(e,t),a=nr(f);return n&&f.addEventListener("upgradeneeded",h=>{n(nr(f.result),h.oldVersion,h.newVersion,nr(f.transaction),h)}),r&&f.addEventListener("blocked",h=>r(h.oldVersion,h.newVersion,h)),a.then(h=>{u&&h.addEventListener("close",()=>u()),o&&h.addEventListener("versionchange",w=>o(w.oldVersion,w.newVersion,w))}).catch(()=>{}),a}const v0=["get","getKey","getAll","getAllKeys","count"],N0=["put","add","delete","clear"],xs=new Map;function Oa(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xs.get(t))return xs.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=N0.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||v0.includes(r)))return;const u=async function(f,...a){const h=this.transaction(f,o?"readwrite":"readonly");let w=h.store;return n&&(w=w.index(a.shift())),(await Promise.all([w[r](...a),o&&h.done]))[0]};return xs.set(t,u),u}w0(e=>({...e,get:(t,r,n)=>Oa(t,r)||e.get(t,r,n),has:(t,r)=>!!Oa(t,r)||e.has(t,r)}));const Au="auth-client-db",Su="ic-keyval",B0=async(e=Au,t=Su,r)=>(Ru&&(localStorage!=null&&localStorage.getItem(er))&&(localStorage.removeItem(er),localStorage.removeItem(Qt)),await E0(e,r,{upgrade:n=>{n.objectStoreNames.contains(t)&&n.clear(t),n.createObjectStore(t)}}));async function T0(e,t,r){return await e.get(t,r)}async function A0(e,t,r,n){return await e.put(t,n,r)}async function S0(e,t,r){return await e.delete(t,r)}class ao{constructor(t,r){this._db=t,this._storeName=r}static async create(t){const{dbName:r=Au,storeName:n=Su,version:o=F0}=t??{},u=await B0(r,n,o);return new ao(u,n)}async set(t,r){return await A0(this._db,this._storeName,t,r)}async get(t){var r;return(r=await T0(this._db,this._storeName,t))!==null&&r!==void 0?r:null}async remove(t){return await S0(this._db,this._storeName,t)}}var R0=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},O0=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},fi;const Qt="identity",er="delegation",I0="iv",F0=1,Ru=typeof window<"u";class U0{constructor(t="ic-",r){this.prefix=t,this._localStorage=r}get(t){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+t))}set(t,r){return this._getLocalStorage().setItem(this.prefix+t,r),Promise.resolve()}remove(t){return this._getLocalStorage().removeItem(this.prefix+t),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.localStorage:global.localStorage:window.localStorage;if(!t)throw new Error("Could not find local storage.");return t}}class k0{constructor(t){fi.set(this,void 0),R0(this,fi,t??{},"f")}get _db(){return new Promise(t=>{if(this.initializedDb){t(this.initializedDb);return}ao.create(O0(this,fi,"f")).then(r=>{this.initializedDb=r,t(r)})})}async get(t){return await(await this._db).get(t)}async set(t,r){await(await this._db).set(t,r)}async remove(t){await(await this._db).remove(t)}}fi=new WeakMap;const P0="https://identity.internetcomputer.org",C0="#authorize",Es="ECDSA",vs="Ed25519",V0=500,M0="UserInterrupt";class co{constructor(t,r,n,o,u,f,a,h){this._identity=t,this._key=r,this._chain=n,this._storage=o,this.idleManager=u,this._createOptions=f,this._idpWindow=a,this._eventHandler=h,this._registerDefaultIdleCallback()}static async create(t={}){var r,n,o;const u=(r=t.storage)!==null&&r!==void 0?r:new k0,f=(n=t.keyType)!==null&&n!==void 0?n:Es;let a=null;if(t.identity)a=t.identity;else{let m=await u.get(Qt);if(!m&&Ru)try{const N=new U0,x=await N.get(er),p=await N.get(Qt);x&&p&&f===Es&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await u.set(er,x),await u.set(Qt,p),m=x,await N.remove(er),await N.remove(Qt))}catch(N){console.error("error while attempting to recover localstorage: "+N)}if(m)try{typeof m=="object"?f===vs&&typeof m=="string"?a=await tr.fromJSON(m):a=await xi.fromKeyPair(m):typeof m=="string"&&(a=tr.fromJSON(m))}catch{}}let h=new wn,w=null;if(a)try{const m=await u.get(er);if(typeof m=="object"&&m!==null)throw new Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");t.identity?h=t.identity:m&&(w=Ei.fromJSON(m),h0(w)?"toDer"in a?h=vi.fromDelegation(a,w):h=Na.fromDelegation(a,w):(await Ns(u),a=null))}catch(m){console.error(m),await Ns(u),a=null}let E;return!((o=t.idleOptions)===null||o===void 0)&&o.disableIdle?E=void 0:(w||t.identity)&&(E=Aa.create(t.idleOptions)),a||(f===vs?(a=await tr.generate(),await u.set(Qt,JSON.stringify(a.toJSON()))):(t.storage&&f===Es&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${vs}' as the key type, as it can serialize to a string`),a=await xi.generate(),await u.set(Qt,a.getKeyPair()))),new this(h,a,w,u,E,t)}_registerDefaultIdleCallback(){var t,r;const n=(t=this._createOptions)===null||t===void 0?void 0:t.idleOptions;!(n!=null&&n.onIdle)&&!(n!=null&&n.disableDefaultIdleCallback)&&((r=this.idleManager)===null||r===void 0||r.registerCallback(()=>{this.logout(),location.reload()}))}async _handleSuccess(t,r){var n,o;const u=t.delegations.map(w=>({delegation:new so(w.delegation.pubkey,w.delegation.expiration,w.delegation.targets),signature:w.signature.buffer})),f=Ei.fromDelegations(u,t.userPublicKey.buffer),a=this._key;if(!a)return;this._chain=f,"toDer"in a?this._identity=vi.fromDelegation(a,this._chain):this._identity=Na.fromDelegation(a,this._chain),(n=this._idpWindow)===null||n===void 0||n.close();const h=(o=this._createOptions)===null||o===void 0?void 0:o.idleOptions;!this.idleManager&&!(h!=null&&h.disableIdle)&&(this.idleManager=Aa.create(h),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(er,JSON.stringify(this._chain.toJSON())),r==null||r(t)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&this._chain!==null}async login(t){var r,n,o,u;const f=BigInt(8)*BigInt(36e11),a=new URL(((r=t==null?void 0:t.identityProvider)===null||r===void 0?void 0:r.toString())||P0);a.hash=C0,(n=this._idpWindow)===null||n===void 0||n.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(a,Object.assign({maxTimeToLive:(o=t==null?void 0:t.maxTimeToLive)!==null&&o!==void 0?o:f},t)),window.addEventListener("message",this._eventHandler),this._idpWindow=(u=window.open(a.toString(),"idpWindow",t==null?void 0:t.windowOpenerFeatures))!==null&&u!==void 0?u:void 0;const h=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure(M0,t==null?void 0:t.onError):setTimeout(h,V0))};h()}_getEventHandler(t,r){return async n=>{var o,u,f;if(n.origin!==t.origin)return;const a=n.data;switch(a.kind){case"authorize-ready":{const h=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array((o=this._key)===null||o===void 0?void 0:o.getPublicKey().toDer()),maxTimeToLive:r==null?void 0:r.maxTimeToLive,allowPinAuthentication:r==null?void 0:r.allowPinAuthentication,derivationOrigin:(u=r==null?void 0:r.derivationOrigin)===null||u===void 0?void 0:u.toString()},r==null?void 0:r.customValues);(f=this._idpWindow)===null||f===void 0||f.postMessage(h,t.origin);break}case"authorize-client-success":try{await this._handleSuccess(a,r==null?void 0:r.onSuccess)}catch(h){this._handleFailure(h.message,r==null?void 0:r.onError)}break;case"authorize-client-failure":this._handleFailure(a.text,r==null?void 0:r.onError);break}}}_handleFailure(t,r){var n;(n=this._idpWindow)===null||n===void 0||n.close(),r==null||r(t),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(t={}){if(await Ns(this._storage),this._identity=new wn,this._chain=null,t.returnTo)try{window.history.pushState({},"",t.returnTo)}catch{window.location.href=t.returnTo}}}async function Ns(e){await e.remove(Qt),await e.remove(er),await e.remove(I0)}class $0{constructor(){mo(this,"authClient",null)}async init(){if(this.authClient=await co.create(),this.renderAuthSection(),await this.authClient.isAuthenticated()){const r=this.authClient.getIdentity().getPrincipal().toText();this.setLoggedInState(r)}else this.setLoggedOutState()}renderAuthSection(){const t=document.getElementById("auth-section");t.innerHTML=`
            <div class="auth-section">
                <button id="auth-btn" class="btn"></button>
                <div id="ii-principal" class="principal hidden"></div>
            </div>
        `}setLoggedInState(t){document.getElementById("auth-btn").textContent="Logout",document.getElementById("auth-btn").onclick=()=>this.handleLogout(),document.getElementById("ii-principal").classList.remove("hidden"),document.getElementById("ii-principal").textContent=t,document.getElementById("authenticated-content").classList.remove("hidden")}setLoggedOutState(){document.getElementById("auth-btn").textContent="Login",document.getElementById("auth-btn").onclick=()=>this.handleLogin(),document.getElementById("ii-principal").classList.add("hidden"),document.getElementById("ii-principal").textContent="",document.getElementById("authenticated-content").classList.add("hidden")}async handleLogin(){await this.authClient.isAuthenticated()&&window.location.reload(),this.authClient.login({identityProvider:cf,onSuccess:()=>window.location.reload(),onError:()=>window.location.reload()})}async handleLogout(){await this.authClient.logout(),window.location.reload()}}async function q0(){await new $0().init()}var G0=(e=>(e[e.FractionalMoreThan8Decimals=0]="FractionalMoreThan8Decimals",e[e.InvalidFormat=1]="InvalidFormat",e[e.FractionalTooManyDecimals=2]="FractionalTooManyDecimals",e))(G0||{});BigInt(1e8);var Ou=class{constructor(t,r,n){this.id=t,this.service=r,this.certifiedService=n,this.caller=({certified:o=!0})=>o?this.certifiedService:this.service}get canisterId(){return this.id}},uo=e=>e==null,yn=e=>!uo(e),H0=()=>wr.createSync({host:"https://icp-api.io",identity:new wn}),fo=({options:{canisterId:e,serviceOverride:t,certifiedServiceOverride:r,agent:n,callTransform:o,queryTransform:u},idlFactory:f,certifiedIdlFactory:a})=>{let h=n??H0(),w=t??Bn.createActor(f,{agent:h,canisterId:e,callTransform:o,queryTransform:u}),E=r??Bn.createActor(a,{agent:h,canisterId:e,callTransform:o,queryTransform:u});return{service:w,certifiedService:E,agent:h,canisterId:e}},L0=class extends Error{},j0=(e,t)=>{if(e==null)throw new L0(t)},Iu=e=>new Uint8Array(e),z0=e=>Array.from(e).map(t=>t.charCodeAt(0)),Fu=e=>{let t=e.match(/.{1,2}/g);return j0(t,"Invalid hex string."),Uint8Array.from(t.map(r=>parseInt(r,16)))},Uu=e=>(e instanceof Uint8Array||(e=Uint8Array.from(e)),e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"")),Ia="abcdefghijklmnopqrstuvwxyz234567",Tn=Object.create(null);for(let e=0;e<Ia.length;e++)Tn[Ia[e]]=e;Tn[0]=Tn.o;Tn[1]=Tn.i;var K0=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),D0=e=>{let t=-1;for(let r=0;r<e.length;r++){let n=(e[r]^t)&255;t=K0[n]^t>>>8}return(t^-1)>>>0},Y0=e=>{let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,D0(e),!1),new Uint8Array(t)},Oe=e=>yn(e)?[e]:[],W0=(e=>(e[e.Controllers=0]="Controllers",e[e.Public=1]="Public",e))(W0||{}),Z0=class extends Error{},Bs=({controllers:e,freezingThreshold:t,memoryAllocation:r,computeAllocation:n,reservedCyclesLimit:o,logVisibility:u,wasmMemoryLimit:f,wasmMemoryThreshold:a}={})=>{let h=()=>{switch(u){case 0:return{controllers:null};case 1:return{public:null};default:throw new Z0}};return{controllers:Oe(e==null?void 0:e.map(w=>Ee.fromText(w))),freezing_threshold:Oe(t),memory_allocation:Oe(r),compute_allocation:Oe(n),reserved_cycles_limit:Oe(o),log_visibility:uo(u)?[]:[h()],wasm_memory_limit:Oe(f),wasm_memory_threshold:Oe(a)}},X0=({IDL:e})=>{let t=e.Variant({mainnet:e.Null,testnet:e.Null}),r=e.Text,n=e.Record({network:t,address:r,min_confirmations:e.Opt(e.Nat32)}),o=e.Nat64,u=o,f=e.Nat32,a=e.Record({start_height:f,end_height:e.Opt(f),network:t}),h=e.Vec(e.Nat8),w=e.Record({tip_height:f,block_headers:e.Vec(h)}),E=e.Record({network:t}),m=e.Nat64,N=e.Vec(m),x=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:r}),p=e.Vec(e.Nat8),O=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),q=e.Record({height:e.Nat32,value:o,outpoint:O}),K=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:f,tip_block_hash:p,utxos:e.Vec(q)}),D=e.Record({transaction:e.Vec(e.Nat8),network:t}),V=e.Principal,te=e.Record({canister_id:V,num_requested_changes:e.Opt(e.Nat64)}),I=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),W=e.Vec(e.Nat8),J=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),load_snapshot:e.Record({canister_version:e.Nat64,taken_at_timestamp:e.Nat64,snapshot_id:W}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),F=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:I,details:J}),P=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(F),total_num_changes:e.Nat64}),G=e.Record({canister_id:V}),X=e.Variant({controllers:e.Null,public:e.Null,allowed_viewers:e.Vec(e.Principal)}),re=e.Record({freezing_threshold:e.Nat,wasm_memory_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:X,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),_=e.Record({memory_metrics:e.Record({wasm_binary_size:e.Nat,wasm_chunk_store_size:e.Nat,canister_history_size:e.Nat,stable_memory_size:e.Nat,snapshots_size:e.Nat,wasm_memory_size:e.Nat,global_memory_size:e.Nat,custom_sections_size:e.Nat}),status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:re,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),R=e.Record({canister_id:V}),M=e.Record({freezing_threshold:e.Opt(e.Nat),wasm_memory_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(X),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),Y=e.Record({settings:e.Opt(M),sender_canister_version:e.Opt(e.Nat64)}),ee=e.Record({canister_id:V}),ne=e.Record({canister_id:V}),le=e.Record({canister_id:V,snapshot_id:W}),ge=e.Record({canister_id:V}),ie=e.Variant({secp256k1:e.Null}),ae=e.Record({key_id:e.Record({name:e.Text,curve:ie}),canister_id:e.Opt(V),derivation_path:e.Vec(e.Vec(e.Nat8))}),Ne=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),S=e.Record({canister_id:V}),be=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),Be=e.Record({canister_log_records:e.Vec(be)}),ce=e.Record({value:e.Text,name:e.Text}),Q=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(ce)}),se=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:Q})],[Q],[]),context:e.Vec(e.Nat8)})),headers:e.Vec(ce)}),B=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),A=e.Record({hash:e.Vec(e.Nat8)}),k=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:B,chunk_hashes_list:e.Vec(A),target_canister:V,store_canister:e.Opt(V),sender_canister_version:e.Opt(e.Nat64)}),L=e.Vec(e.Nat8),H=e.Record({arg:e.Vec(e.Nat8),wasm_module:L,mode:B,canister_id:V,sender_canister_version:e.Opt(e.Nat64)}),j=e.Record({canister_id:V}),g=e.Record({id:W,total_size:e.Nat64,taken_at_timestamp:e.Nat64}),l=e.Vec(g),d=e.Record({canister_id:V,sender_canister_version:e.Opt(e.Nat64),snapshot_id:W}),b=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),T=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),C=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(T)})),Z=e.Record({settings:e.Opt(M),specified_id:e.Opt(V),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),oe=e.Record({canister_id:V}),ye=e.Record({canister_id:V,amount:e.Nat}),he=e.Vec(e.Nat8),ve=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),s=e.Record({key_id:e.Record({algorithm:ve,name:e.Text}),canister_id:e.Opt(V),derivation_path:e.Vec(e.Vec(e.Nat8))}),i=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),c=e.Record({key_id:e.Record({name:e.Text,curve:ie}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),y=e.Record({signature:e.Vec(e.Nat8)}),v=e.Variant({bip341:e.Record({merkle_root_hash:e.Vec(e.Nat8)})}),U=e.Record({aux:e.Opt(v),key_id:e.Record({algorithm:ve,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),$=e.Record({signature:e.Vec(e.Nat8)}),de=e.Record({canister_id:V}),me=e.Record({canister_id:V}),pe=e.Record({canister_id:V}),fe=e.Vec(A),we=e.Record({subnet_id:e.Principal}),Ie=e.Record({replica_version:e.Text}),or=e.Record({replace_snapshot:e.Opt(W),canister_id:V}),ar=g,cr=e.Record({canister_id:V,sender_canister_version:e.Opt(e.Nat64)}),ur=e.Record({canister_id:e.Principal,settings:M,sender_canister_version:e.Opt(e.Nat64)}),fr=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal}),ft=A;return e.Service({bitcoin_get_balance:e.Func([n],[u],[]),bitcoin_get_block_headers:e.Func([a],[w],[]),bitcoin_get_current_fee_percentiles:e.Func([E],[N],[]),bitcoin_get_utxos:e.Func([x],[K],[]),bitcoin_send_transaction:e.Func([D],[],[]),canister_info:e.Func([te],[P],[]),canister_status:e.Func([G],[_],[]),clear_chunk_store:e.Func([R],[],[]),create_canister:e.Func([Y],[ee],[]),delete_canister:e.Func([ne],[],[]),delete_canister_snapshot:e.Func([le],[],[]),deposit_cycles:e.Func([ge],[],[]),ecdsa_public_key:e.Func([ae],[Ne],[]),fetch_canister_logs:e.Func([S],[Be],[]),http_request:e.Func([se],[Q],[]),install_chunked_code:e.Func([k],[],[]),install_code:e.Func([H],[],[]),list_canister_snapshots:e.Func([j],[l],[]),load_canister_snapshot:e.Func([d],[],[]),node_metrics_history:e.Func([b],[C],[]),provisional_create_canister_with_cycles:e.Func([Z],[oe],[]),provisional_top_up_canister:e.Func([ye],[],[]),raw_rand:e.Func([],[he],[]),schnorr_public_key:e.Func([s],[i],[]),sign_with_ecdsa:e.Func([c],[y],[]),sign_with_schnorr:e.Func([U],[$],[]),start_canister:e.Func([de],[],[]),stop_canister:e.Func([me],[],[]),stored_chunks:e.Func([pe],[fe],[]),subnet_info:e.Func([we],[Ie],[]),take_canister_snapshot:e.Func([or],[ar],[]),uninstall_code:e.Func([cr],[],[]),update_settings:e.Func([ur],[],[]),upload_chunk:e.Func([fr],[ft],[])})},J0=({IDL:e})=>{let t=e.Variant({mainnet:e.Null,testnet:e.Null}),r=e.Text,n=e.Record({network:t,address:r,min_confirmations:e.Opt(e.Nat32)}),o=e.Nat64,u=o,f=e.Nat32,a=e.Record({start_height:f,end_height:e.Opt(f),network:t}),h=e.Vec(e.Nat8),w=e.Record({tip_height:f,block_headers:e.Vec(h)}),E=e.Record({network:t}),m=e.Nat64,N=e.Vec(m),x=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:r}),p=e.Vec(e.Nat8),O=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),q=e.Record({height:e.Nat32,value:o,outpoint:O}),K=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:f,tip_block_hash:p,utxos:e.Vec(q)}),D=e.Record({transaction:e.Vec(e.Nat8),network:t}),V=e.Principal,te=e.Record({canister_id:V,num_requested_changes:e.Opt(e.Nat64)}),I=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),W=e.Vec(e.Nat8),J=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),load_snapshot:e.Record({canister_version:e.Nat64,taken_at_timestamp:e.Nat64,snapshot_id:W}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),F=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:I,details:J}),P=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(F),total_num_changes:e.Nat64}),G=e.Record({canister_id:V}),X=e.Variant({controllers:e.Null,public:e.Null,allowed_viewers:e.Vec(e.Principal)}),re=e.Record({freezing_threshold:e.Nat,wasm_memory_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:X,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),_=e.Record({memory_metrics:e.Record({wasm_binary_size:e.Nat,wasm_chunk_store_size:e.Nat,canister_history_size:e.Nat,stable_memory_size:e.Nat,snapshots_size:e.Nat,wasm_memory_size:e.Nat,global_memory_size:e.Nat,custom_sections_size:e.Nat}),status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:re,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),R=e.Record({canister_id:V}),M=e.Record({freezing_threshold:e.Opt(e.Nat),wasm_memory_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(X),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),Y=e.Record({settings:e.Opt(M),sender_canister_version:e.Opt(e.Nat64)}),ee=e.Record({canister_id:V}),ne=e.Record({canister_id:V}),le=e.Record({canister_id:V,snapshot_id:W}),ge=e.Record({canister_id:V}),ie=e.Variant({secp256k1:e.Null}),ae=e.Record({key_id:e.Record({name:e.Text,curve:ie}),canister_id:e.Opt(V),derivation_path:e.Vec(e.Vec(e.Nat8))}),Ne=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),S=e.Record({canister_id:V}),be=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),Be=e.Record({canister_log_records:e.Vec(be)}),ce=e.Record({value:e.Text,name:e.Text}),Q=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(ce)}),se=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:Q})],[Q],["query"]),context:e.Vec(e.Nat8)})),headers:e.Vec(ce)}),B=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),A=e.Record({hash:e.Vec(e.Nat8)}),k=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:B,chunk_hashes_list:e.Vec(A),target_canister:V,store_canister:e.Opt(V),sender_canister_version:e.Opt(e.Nat64)}),L=e.Vec(e.Nat8),H=e.Record({arg:e.Vec(e.Nat8),wasm_module:L,mode:B,canister_id:V,sender_canister_version:e.Opt(e.Nat64)}),j=e.Record({canister_id:V}),g=e.Record({id:W,total_size:e.Nat64,taken_at_timestamp:e.Nat64}),l=e.Vec(g),d=e.Record({canister_id:V,sender_canister_version:e.Opt(e.Nat64),snapshot_id:W}),b=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),T=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),C=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(T)})),Z=e.Record({settings:e.Opt(M),specified_id:e.Opt(V),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),oe=e.Record({canister_id:V}),ye=e.Record({canister_id:V,amount:e.Nat}),he=e.Vec(e.Nat8),ve=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),s=e.Record({key_id:e.Record({algorithm:ve,name:e.Text}),canister_id:e.Opt(V),derivation_path:e.Vec(e.Vec(e.Nat8))}),i=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),c=e.Record({key_id:e.Record({name:e.Text,curve:ie}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),y=e.Record({signature:e.Vec(e.Nat8)}),v=e.Variant({bip341:e.Record({merkle_root_hash:e.Vec(e.Nat8)})}),U=e.Record({aux:e.Opt(v),key_id:e.Record({algorithm:ve,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),$=e.Record({signature:e.Vec(e.Nat8)}),de=e.Record({canister_id:V}),me=e.Record({canister_id:V}),pe=e.Record({canister_id:V}),fe=e.Vec(A),we=e.Record({subnet_id:e.Principal}),Ie=e.Record({replica_version:e.Text}),or=e.Record({replace_snapshot:e.Opt(W),canister_id:V}),ar=g,cr=e.Record({canister_id:V,sender_canister_version:e.Opt(e.Nat64)}),ur=e.Record({canister_id:e.Principal,settings:M,sender_canister_version:e.Opt(e.Nat64)}),fr=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal}),ft=A;return e.Service({bitcoin_get_balance:e.Func([n],[u],[]),bitcoin_get_block_headers:e.Func([a],[w],[]),bitcoin_get_current_fee_percentiles:e.Func([E],[N],[]),bitcoin_get_utxos:e.Func([x],[K],[]),bitcoin_send_transaction:e.Func([D],[],[]),canister_info:e.Func([te],[P],[]),canister_status:e.Func([G],[_],[]),clear_chunk_store:e.Func([R],[],[]),create_canister:e.Func([Y],[ee],[]),delete_canister:e.Func([ne],[],[]),delete_canister_snapshot:e.Func([le],[],[]),deposit_cycles:e.Func([ge],[],[]),ecdsa_public_key:e.Func([ae],[Ne],[]),fetch_canister_logs:e.Func([S],[Be],["query"]),http_request:e.Func([se],[Q],[]),install_chunked_code:e.Func([k],[],[]),install_code:e.Func([H],[],[]),list_canister_snapshots:e.Func([j],[l],[]),load_canister_snapshot:e.Func([d],[],[]),node_metrics_history:e.Func([b],[C],[]),provisional_create_canister_with_cycles:e.Func([Z],[oe],[]),provisional_top_up_canister:e.Func([ye],[],[]),raw_rand:e.Func([],[he],[]),schnorr_public_key:e.Func([s],[i],[]),sign_with_ecdsa:e.Func([c],[y],[]),sign_with_schnorr:e.Func([U],[$],[]),start_canister:e.Func([de],[],[]),stop_canister:e.Func([me],[],[]),stored_chunks:e.Func([pe],[fe],[]),subnet_info:e.Func([we],[Ie],[]),take_canister_snapshot:e.Func([or],[ar],[]),uninstall_code:e.Func([cr],[],[]),update_settings:e.Func([ur],[],[]),upload_chunk:e.Func([fr],[ft],[])})},Q0=e=>Fu(e),Ts=e=>typeof e=="string"?Q0(e):e,Fa=(e,t,r)=>{let n=t[0];if(yn(n)&&typeof n=="object"){if(e==="install_chunked_code"&&yn(n.target_canister))return{effectiveCanisterId:Ee.from(n.target_canister)};if(yn(n.canister_id))return{effectiveCanisterId:Ee.from(n.canister_id)}}return{effectiveCanisterId:Ee.fromHex("")}},eh=class ku{constructor(t){this.service=t,this.createCanister=async({settings:r,senderCanisterVersion:n}={})=>{let{create_canister:o}=this.service,{canister_id:u}=await o({settings:Oe(Bs(r)),sender_canister_version:Oe(n)});return u},this.updateSettings=({canisterId:r,senderCanisterVersion:n,settings:o})=>{let{update_settings:u}=this.service;return u({canister_id:r,sender_canister_version:Oe(n),settings:Bs(o)})},this.installCode=({canisterId:r,wasmModule:n,senderCanisterVersion:o,...u})=>{let{install_code:f}=this.service;return f({...u,canister_id:r,wasm_module:n,sender_canister_version:Oe(o)})},this.uploadChunk=({canisterId:r,...n})=>{let{upload_chunk:o}=this.service;return o({canister_id:r,...n})},this.clearChunkStore=async({canisterId:r})=>{let{clear_chunk_store:n}=this.service;await n({canister_id:r})},this.storedChunks=async({canisterId:r})=>{let{stored_chunks:n}=this.service;return n({canister_id:r})},this.installChunkedCode=async({senderCanisterVersion:r,chunkHashesList:n,targetCanisterId:o,storeCanisterId:u,wasmModuleHash:f,...a})=>{let{install_chunked_code:h}=this.service;await h({...a,target_canister:o,store_canister:Oe(u),sender_canister_version:Oe(r),chunk_hashes_list:n,wasm_module_hash:typeof f=="string"?Fu(f):f})},this.uninstallCode=({canisterId:r,senderCanisterVersion:n})=>{let{uninstall_code:o}=this.service;return o({canister_id:r,sender_canister_version:Oe(n)})},this.startCanister=r=>{let{start_canister:n}=this.service;return n({canister_id:r})},this.stopCanister=r=>{let{stop_canister:n}=this.service;return n({canister_id:r})},this.canisterStatus=r=>{let{canister_status:n}=this.service;return n({canister_id:r})},this.deleteCanister=r=>{let{delete_canister:n}=this.service;return n({canister_id:r})},this.provisionalCreateCanisterWithCycles=async({settings:r,amount:n,canisterId:o}={})=>{let{provisional_create_canister_with_cycles:u}=this.service,{canister_id:f}=await u({settings:Oe(Bs(r)),amount:Oe(n),specified_id:Oe(o),sender_canister_version:[]});return f},this.fetchCanisterLogs=r=>{let{fetch_canister_logs:n}=this.service;return n({canister_id:r})},this.takeCanisterSnapshot=({canisterId:r,snapshotId:n})=>{let{take_canister_snapshot:o}=this.service;return o({canister_id:r,replace_snapshot:Oe(yn(n)?Ts(n):void 0)})},this.listCanisterSnapshots=async({canisterId:r})=>{let{list_canister_snapshots:n}=this.service;return n({canister_id:r})},this.loadCanisterSnapshot=async({canisterId:r,snapshotId:n,senderCanisterVersion:o})=>{let{load_canister_snapshot:u}=this.service;await u({canister_id:r,snapshot_id:Ts(n),sender_canister_version:Oe(o)})},this.deleteCanisterSnapshot=async({canisterId:r,snapshotId:n})=>{let{delete_canister_snapshot:o}=this.service;await o({canister_id:r,snapshot_id:Ts(n)})},this.service=t}static create(t){let{service:r}=fo({options:{...t,canisterId:Ee.fromHex(""),callTransform:Fa,queryTransform:Fa},idlFactory:J0,certifiedIdlFactory:X0});return new ku(r)}};function lo(){const e=window.location.hostname,t=e.match(/^([a-z0-9-]+)\.localhost$/);if(t)return Ee.fromText(t[1]);const r=e.match(/^([a-z0-9-]+)\.icp\d+\.io$/);if(r)return Ee.fromText(r[1]);throw new Error("Could not infer canister ID from location")}async function Ni(){const e=await co.create();await e.isAuthenticated()||window.location.reload();const r=e.getIdentity(),n=await wr.create({identity:r,host:_o});return _o.includes("localhost")&&await n.fetchRootKey(),n}function th(e){const t=e.toUint8Array(),r=new Uint8Array(32);return r[0]=t.length,r.set(t,1),r}function rh(e){return`${(Number(e)/1048576).toFixed(2)} MB`}function nh(e){return`${(Number(e)/1e12).toFixed(2)} T`}class Pu{async managmentApi(){const t=await Ni();return eh.create({agent:t})}async getCanisterStatus(){const t=await this.managmentApi(),r=lo();return await t.canisterStatus(r)}}class ih{async init(){this.renderStatusSection();const r=await new Pu().getCanisterStatus(),{statusText:n,memorySizeFormatted:o,cyclesFormatted:u,moduleHashHex:f}=this.formatStatusData(r);this.renderStatusContent(n,o,u,f)}renderStatusSection(){const t=document.getElementById("status-section");t.innerHTML=`
            <h3>Canister Status</h3>
            <div id="status-content">Loading...</div>
        `}renderStatusContent(t,r,n,o){const u=document.getElementById("status-content");u.innerHTML=`
                <div class="status-info">
                    <p><strong>Status:</strong> ${t}</p>
                    <p><strong>Memory Size:</strong> ${r}</p>
                    <p><strong>Cycles:</strong> ${n}</p>
                    <p><strong>Module Hash:</strong> ${o}</p>
                </div>
            `}formatStatusData(t){const r="running"in t.status?"Running":"stopped"in t.status?"Stopped":"stopping"in t.status?"Stopping":"Unknown",n=rh(t.memory_size),o=nh(t.cycles),u=t.module_hash&&t.module_hash.length>0?Uu(t.module_hash[0]):"N/A";return{statusText:r,memorySizeFormatted:n,cyclesFormatted:o,moduleHashHex:u}}}async function sh(){await new ih().init()}var oh=Object.create,Cu=Object.defineProperty,ah=Object.getOwnPropertyDescriptor,ch=Object.getOwnPropertyNames,uh=Object.getPrototypeOf,fh=Object.prototype.hasOwnProperty,ho=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),lh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ch(t))!fh.call(e,o)&&o!==r&&Cu(e,o,{get:()=>t[o],enumerable:!(n=ah(t,o))||n.enumerable});return e},dh=(e,t,r)=>(r=e!=null?oh(uh(e)):{},lh(!e||!e.__esModule?Cu(r,"default",{value:e,enumerable:!0}):r,e));function hh(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Vu(e,...t){if(!hh(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ua(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ph(e,t){Vu(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var As=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),xt=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function yh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Mu(e){return typeof e=="string"&&(e=yh(e)),Vu(e),e}var gh=class{clone(){return this._cloneInto()}};function mh(e){let t=n=>e().update(Mu(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function _h(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),u=BigInt(4294967295),f=Number(r>>o&u),a=Number(r&u),h=n?4:0,w=n?0:4;e.setUint32(t+h,f,n),e.setUint32(t+w,a,n)}var wh=(e,t,r)=>e&t^~e&r,bh=(e,t,r)=>e&t^e&r^t&r,xh=class extends gh{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=As(this.buffer)}update(t){Ua(this);let{view:r,buffer:n,blockLen:o}=this;t=Mu(t);let u=t.length;for(let f=0;f<u;){let a=Math.min(o-this.pos,u-f);if(a===o){let h=As(t);for(;o<=u-f;f+=o)this.process(h,f);continue}n.set(t.subarray(f,f+a),this.pos),this.pos+=a,f+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ua(this),ph(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:u}=this,{pos:f}=this;r[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>o-f&&(this.process(n,0),f=0);for(let m=f;m<o;m++)r[m]=0;_h(n,o-8,BigInt(this.length*8),u),this.process(n,0);let a=As(t),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let w=h/4,E=this.get();if(w>E.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<w;m++)a.setUint32(4*m,E[m],u)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:u,destroyed:f,pos:a}=this;return t.length=o,t.pos=a,t.finished=u,t.destroyed=f,o%r&&t.buffer.set(n),t}},Eh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yt=new Uint32Array(64),vh=class extends xh{constructor(){super(64,32,8,!1),this.A=Dt[0]|0,this.B=Dt[1]|0,this.C=Dt[2]|0,this.D=Dt[3]|0,this.E=Dt[4]|0,this.F=Dt[5]|0,this.G=Dt[6]|0,this.H=Dt[7]|0}get(){let{A:e,B:t,C:r,D:n,E:o,F:u,G:f,H:a}=this;return[e,t,r,n,o,u,f,a]}set(e,t,r,n,o,u,f,a){this.A=e|0,this.B=t|0,this.C=r|0,this.D=n|0,this.E=o|0,this.F=u|0,this.G=f|0,this.H=a|0}process(e,t){for(let E=0;E<16;E++,t+=4)Yt[E]=e.getUint32(t,!1);for(let E=16;E<64;E++){let m=Yt[E-15],N=Yt[E-2],x=xt(m,7)^xt(m,18)^m>>>3,p=xt(N,17)^xt(N,19)^N>>>10;Yt[E]=p+Yt[E-7]+x+Yt[E-16]|0}let{A:r,B:n,C:o,D:u,E:f,F:a,G:h,H:w}=this;for(let E=0;E<64;E++){let m=xt(f,6)^xt(f,11)^xt(f,25),N=w+m+wh(f,a,h)+Eh[E]+Yt[E]|0,x=(xt(r,2)^xt(r,13)^xt(r,22))+bh(r,n,o)|0;w=h,h=a,a=f,f=u+N|0,u=o,o=n,n=r,r=N+x|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,u=u+this.D|0,f=f+this.E|0,a=a+this.F|0,h=h+this.G|0,w=w+this.H|0,this.set(r,n,o,u,f,a,h,w)}roundClean(){Yt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Nh=class extends vh{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Bh=mh(()=>new Nh),Ls=class js{constructor(t){this.bytes=t}static fromHex(t){return new js(Uint8Array.from(Buffer.from(t,"hex")))}static fromPrincipal({principal:t,subAccount:r=Th.fromID(0)}){let n=z0(`
account-id`),o=Bh.create();o.update(Iu([...n,...t.toUint8Array(),...r.toUint8Array()]));let u=o.digest(),f=Y0(u),a=new Uint8Array([...f,...u]);return new js(a)}toHex(){return Uu(this.bytes)}toUint8Array(){return this.bytes}toNumbers(){return Array.from(this.bytes)}toAccountIdentifierHash(){return{hash:this.toUint8Array()}}},Th=class li{constructor(t){this.bytes=t}static fromBytes(t){return t.length!=32?Error("Subaccount length must be 32-bytes"):new li(t)}static fromPrincipal(t){let r=new Uint8Array(32).fill(0),n=t.toUint8Array();r[0]=n.length;for(let o=0;o<n.length;o++)r[1+o]=n[o];return new li(r)}static fromID(t){if(t<0)throw new Error("Number cannot be negative");if(t>Number.MAX_SAFE_INTEGER)throw new Error("Number is too large to fit in 32 bytes.");let r=new DataView(new ArrayBuffer(32));if(typeof r.setBigUint64=="function")r.setBigUint64(24,BigInt(t));else{let o=BigInt(1)<<BigInt(32);r.setUint32(24,Number(BigInt(t)>>BigInt(32))),r.setUint32(28,Number(BigInt(t)%o))}let n=new Uint8Array(r.buffer);return new li(n)}toUint8Array(){return this.bytes}};/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/var Ah=Ee.fromText("ryjl3-tyaaa-aaaaa-aaaba-cai");Ee.fromText("qhbym-qaaaa-aaaaa-aaafq-cai");var Sh=e=>e instanceof Ls?e:Ls.fromHex(e),Rh=({IDL:e})=>{let t=e.Vec(e.Nat8),r=e.Record({owner:e.Principal,subaccount:e.Opt(t)}),n=e.Record({icrc2:e.Bool}),o=e.Record({icrc1_minting_account:e.Opt(r),feature_flags:e.Opt(n)}),u=e.Record({e8s:e.Nat64}),f=e.Text,a=e.Record({secs:e.Nat64,nanos:e.Nat32}),h=e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),w=e.Record({send_whitelist:e.Vec(e.Principal),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(u),minting_account:f,transaction_window:e.Opt(a),max_message_size_bytes:e.Opt(e.Nat64),icrc1_minting_account:e.Opt(r),archive_options:e.Opt(h),initial_values:e.Vec(e.Tuple(f,u)),token_name:e.Opt(e.Text),feature_flags:e.Opt(n)});e.Variant({Upgrade:e.Opt(o),Init:w});let E=e.Vec(e.Nat8),m=e.Record({account:E}),N=e.Record({account:f}),x=e.Record({canister_id:e.Principal}),p=e.Record({archives:e.Vec(x)}),O=e.Nat,q=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),K=e.Nat64,D=e.Record({to:r,fee:e.Opt(O),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(t),created_at_time:e.Opt(K),amount:O}),V=e.Nat,te=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:O}),Duplicate:e.Record({duplicate_of:V}),BadFee:e.Record({expected_fee:O}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,InsufficientFunds:e.Record({balance:O})}),I=e.Variant({Ok:V,Err:te}),W=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),J=e.Record({metadata:W,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),F=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:J}),P=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),G=e.Record({metadata:W,consent_message:P}),X=e.Record({description:e.Text}),re=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:X,UnsupportedCanisterCall:X,ConsentMessageUnavailable:X}),_=e.Variant({Ok:G,Err:re}),R=e.Record({account:r,spender:r}),M=e.Record({allowance:O,expires_at:e.Opt(K)}),Y=e.Record({fee:e.Opt(O),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(t),created_at_time:e.Opt(K),amount:O,expected_allowance:e.Opt(O),expires_at:e.Opt(K),spender:r}),ee=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:V}),BadFee:e.Record({expected_fee:O}),AllowanceChanged:e.Record({current_allowance:O}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,Expired:e.Record({ledger_time:e.Nat64}),InsufficientFunds:e.Record({balance:O})}),ne=e.Variant({Ok:V,Err:ee}),le=e.Record({to:r,fee:e.Opt(O),spender_subaccount:e.Opt(t),from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(K),amount:O}),ge=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:O}),BadBurn:e.Record({min_burn_amount:O}),Duplicate:e.Record({duplicate_of:V}),BadFee:e.Record({expected_fee:O}),CreatedInFuture:e.Record({ledger_time:K}),TooOld:e.Null,InsufficientFunds:e.Record({balance:O})}),ie=e.Variant({Ok:V,Err:ge}),ae=e.Nat64,Ne=e.Record({start:ae,length:e.Nat64}),S=e.Nat64,be=e.Record({timestamp_nanos:e.Nat64}),Be=e.Variant({Approve:e.Record({fee:u,from:E,allowance_e8s:e.Int,allowance:u,expected_allowance:e.Opt(u),expires_at:e.Opt(be),spender:E}),Burn:e.Record({from:E,amount:u,spender:e.Opt(E)}),Mint:e.Record({to:E,amount:u}),Transfer:e.Record({to:E,fee:u,from:E,amount:u,spender:e.Opt(e.Vec(e.Nat8))})}),ce=e.Record({memo:S,icrc1_memo:e.Opt(e.Vec(e.Nat8)),operation:e.Opt(Be),created_at_time:be}),Q=e.Record({transaction:ce,timestamp:be,parent_hash:e.Opt(e.Vec(e.Nat8))}),se=e.Record({blocks:e.Vec(Q)}),B=e.Variant({BadFirstBlockIndex:e.Record({requested_index:ae,first_valid_index:ae}),Other:e.Record({error_message:e.Text,error_code:e.Nat64})}),A=e.Variant({Ok:se,Err:B}),k=e.Func([Ne],[A],[]),L=e.Record({callback:k,start:ae,length:e.Nat64}),H=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(Q),chain_length:e.Nat64,first_block_index:ae,archived_blocks:e.Vec(L)}),j=e.Record({callback:e.Func([Ne],[e.Variant({Ok:e.Vec(e.Vec(e.Nat8)),Err:B})],[]),start:e.Nat64,length:e.Nat64}),g=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(e.Vec(e.Nat8)),chain_length:e.Nat64,first_block_index:e.Nat64,archived_blocks:e.Vec(j)}),l=e.Record({to:f,fee:u,memo:S,from_subaccount:e.Opt(t),created_at_time:e.Opt(be),amount:u}),d=e.Record({to:E,fee:u,memo:S,from_subaccount:e.Opt(t),created_at_time:e.Opt(be),amount:u}),b=e.Variant({TxTooOld:e.Record({allowed_window_nanos:e.Nat64}),BadFee:e.Record({expected_fee:u}),TxDuplicate:e.Record({duplicate_of:ae}),TxCreatedInFuture:e.Null,InsufficientFunds:e.Record({balance:u})}),T=e.Variant({Ok:ae,Err:b}),C=e.Record({}),Z=e.Record({transfer_fee:u});return e.Service({account_balance:e.Func([m],[u],[]),account_balance_dfx:e.Func([N],[u],[]),account_identifier:e.Func([r],[E],[]),archives:e.Func([],[p],[]),decimals:e.Func([],[e.Record({decimals:e.Nat32})],[]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[]),icrc1_balance_of:e.Func([r],[O],[]),icrc1_decimals:e.Func([],[e.Nat8],[]),icrc1_fee:e.Func([],[O],[]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,q))],[]),icrc1_minting_account:e.Func([],[e.Opt(r)],[]),icrc1_name:e.Func([],[e.Text],[]),icrc1_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[]),icrc1_symbol:e.Func([],[e.Text],[]),icrc1_total_supply:e.Func([],[O],[]),icrc1_transfer:e.Func([D],[I],[]),icrc21_canister_call_consent_message:e.Func([F],[_],[]),icrc2_allowance:e.Func([R],[M],[]),icrc2_approve:e.Func([Y],[ne],[]),icrc2_transfer_from:e.Func([le],[ie],[]),is_ledger_ready:e.Func([],[e.Bool],[]),name:e.Func([],[e.Record({name:e.Text})],[]),query_blocks:e.Func([Ne],[H],[]),query_encoded_blocks:e.Func([Ne],[g],[]),send_dfx:e.Func([l],[ae],[]),symbol:e.Func([],[e.Record({symbol:e.Text})],[]),transfer:e.Func([d],[T],[]),transfer_fee:e.Func([C],[Z],[])})},Oh=({IDL:e})=>{let t=e.Vec(e.Nat8),r=e.Record({owner:e.Principal,subaccount:e.Opt(t)}),n=e.Record({icrc2:e.Bool}),o=e.Record({icrc1_minting_account:e.Opt(r),feature_flags:e.Opt(n)}),u=e.Record({e8s:e.Nat64}),f=e.Text,a=e.Record({secs:e.Nat64,nanos:e.Nat32}),h=e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),w=e.Record({send_whitelist:e.Vec(e.Principal),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(u),minting_account:f,transaction_window:e.Opt(a),max_message_size_bytes:e.Opt(e.Nat64),icrc1_minting_account:e.Opt(r),archive_options:e.Opt(h),initial_values:e.Vec(e.Tuple(f,u)),token_name:e.Opt(e.Text),feature_flags:e.Opt(n)});e.Variant({Upgrade:e.Opt(o),Init:w});let E=e.Vec(e.Nat8),m=e.Record({account:E}),N=e.Record({account:f}),x=e.Record({canister_id:e.Principal}),p=e.Record({archives:e.Vec(x)}),O=e.Nat,q=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),K=e.Nat64,D=e.Record({to:r,fee:e.Opt(O),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(t),created_at_time:e.Opt(K),amount:O}),V=e.Nat,te=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:O}),Duplicate:e.Record({duplicate_of:V}),BadFee:e.Record({expected_fee:O}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,InsufficientFunds:e.Record({balance:O})}),I=e.Variant({Ok:V,Err:te}),W=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),J=e.Record({metadata:W,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),F=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:J}),P=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),G=e.Record({metadata:W,consent_message:P}),X=e.Record({description:e.Text}),re=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:X,UnsupportedCanisterCall:X,ConsentMessageUnavailable:X}),_=e.Variant({Ok:G,Err:re}),R=e.Record({account:r,spender:r}),M=e.Record({allowance:O,expires_at:e.Opt(K)}),Y=e.Record({fee:e.Opt(O),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(t),created_at_time:e.Opt(K),amount:O,expected_allowance:e.Opt(O),expires_at:e.Opt(K),spender:r}),ee=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:V}),BadFee:e.Record({expected_fee:O}),AllowanceChanged:e.Record({current_allowance:O}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,Expired:e.Record({ledger_time:e.Nat64}),InsufficientFunds:e.Record({balance:O})}),ne=e.Variant({Ok:V,Err:ee}),le=e.Record({to:r,fee:e.Opt(O),spender_subaccount:e.Opt(t),from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(K),amount:O}),ge=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:O}),BadBurn:e.Record({min_burn_amount:O}),Duplicate:e.Record({duplicate_of:V}),BadFee:e.Record({expected_fee:O}),CreatedInFuture:e.Record({ledger_time:K}),TooOld:e.Null,InsufficientFunds:e.Record({balance:O})}),ie=e.Variant({Ok:V,Err:ge}),ae=e.Nat64,Ne=e.Record({start:ae,length:e.Nat64}),S=e.Nat64,be=e.Record({timestamp_nanos:e.Nat64}),Be=e.Variant({Approve:e.Record({fee:u,from:E,allowance_e8s:e.Int,allowance:u,expected_allowance:e.Opt(u),expires_at:e.Opt(be),spender:E}),Burn:e.Record({from:E,amount:u,spender:e.Opt(E)}),Mint:e.Record({to:E,amount:u}),Transfer:e.Record({to:E,fee:u,from:E,amount:u,spender:e.Opt(e.Vec(e.Nat8))})}),ce=e.Record({memo:S,icrc1_memo:e.Opt(e.Vec(e.Nat8)),operation:e.Opt(Be),created_at_time:be}),Q=e.Record({transaction:ce,timestamp:be,parent_hash:e.Opt(e.Vec(e.Nat8))}),se=e.Record({blocks:e.Vec(Q)}),B=e.Variant({BadFirstBlockIndex:e.Record({requested_index:ae,first_valid_index:ae}),Other:e.Record({error_message:e.Text,error_code:e.Nat64})}),A=e.Variant({Ok:se,Err:B}),k=e.Func([Ne],[A],["query"]),L=e.Record({callback:k,start:ae,length:e.Nat64}),H=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(Q),chain_length:e.Nat64,first_block_index:ae,archived_blocks:e.Vec(L)}),j=e.Record({callback:e.Func([Ne],[e.Variant({Ok:e.Vec(e.Vec(e.Nat8)),Err:B})],["query"]),start:e.Nat64,length:e.Nat64}),g=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(e.Vec(e.Nat8)),chain_length:e.Nat64,first_block_index:e.Nat64,archived_blocks:e.Vec(j)}),l=e.Record({to:f,fee:u,memo:S,from_subaccount:e.Opt(t),created_at_time:e.Opt(be),amount:u}),d=e.Record({to:E,fee:u,memo:S,from_subaccount:e.Opt(t),created_at_time:e.Opt(be),amount:u}),b=e.Variant({TxTooOld:e.Record({allowed_window_nanos:e.Nat64}),BadFee:e.Record({expected_fee:u}),TxDuplicate:e.Record({duplicate_of:ae}),TxCreatedInFuture:e.Null,InsufficientFunds:e.Record({balance:u})}),T=e.Variant({Ok:ae,Err:b}),C=e.Record({}),Z=e.Record({transfer_fee:u});return e.Service({account_balance:e.Func([m],[u],["query"]),account_balance_dfx:e.Func([N],[u],["query"]),account_identifier:e.Func([r],[E],["query"]),archives:e.Func([],[p],["query"]),decimals:e.Func([],[e.Record({decimals:e.Nat32})],["query"]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],["query"]),icrc1_balance_of:e.Func([r],[O],["query"]),icrc1_decimals:e.Func([],[e.Nat8],["query"]),icrc1_fee:e.Func([],[O],["query"]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,q))],["query"]),icrc1_minting_account:e.Func([],[e.Opt(r)],["query"]),icrc1_name:e.Func([],[e.Text],["query"]),icrc1_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],["query"]),icrc1_symbol:e.Func([],[e.Text],["query"]),icrc1_total_supply:e.Func([],[O],["query"]),icrc1_transfer:e.Func([D],[I],[]),icrc21_canister_call_consent_message:e.Func([F],[_],[]),icrc2_allowance:e.Func([R],[M],["query"]),icrc2_approve:e.Func([Y],[ne],[]),icrc2_transfer_from:e.Func([le],[ie],[]),is_ledger_ready:e.Func([],[e.Bool],["query"]),name:e.Func([],[e.Record({name:e.Text})],["query"]),query_blocks:e.Func([Ne],[H],["query"]),query_encoded_blocks:e.Func([Ne],[g],["query"]),send_dfx:e.Func([l],[ae],[]),symbol:e.Func([],[e.Record({symbol:e.Text})],["query"]),transfer:e.Func([d],[T],[]),transfer_fee:e.Func([C],[Z],["query"])})};BigInt(1095062083);BigInt(1347768404);var po=BigInt(1e4);BigInt(1e8);var ka=e=>({e8s:e}),Ih=({to:e,amount:t,memo:r,fee:n,fromSubAccount:o,createdAt:u})=>({to:e.toUint8Array(),fee:ka(n??po),amount:ka(t),memo:r??BigInt(0),created_at_time:u!==void 0?[{timestamp_nanos:u}]:[],from_subaccount:o===void 0?[]:[Iu(o)]}),Fh=({fromSubAccount:e,to:t,amount:r,fee:n,icrc1Memo:o,createdAt:u})=>({to:t,fee:Oe(n??po),amount:r,memo:Oe(o),created_at_time:Oe(u),from_subaccount:Oe(e)}),Uh=({fee:e,createdAt:t,icrc1Memo:r,fromSubAccount:n,expected_allowance:o,expires_at:u,amount:f,...a})=>({...a,fee:Oe(e??po),memo:Oe(r),from_subaccount:Oe(n),created_at_time:Oe(t),amount:f,expected_allowance:Oe(o),expires_at:Oe(u)}),kh=({userPreferences:{metadata:{utcOffsetMinutes:e,language:t},deriveSpec:r},...n})=>({...n,user_preferences:{metadata:{language:t,utc_offset_minutes:Oe(e)},device_spec:uo(r)?Oe():Oe("GenericDisplay"in r?{GenericDisplay:null}:{LineDisplay:{characters_per_line:r.LineDisplay.charactersPerLine,lines_per_page:r.LineDisplay.linesPerPage}})}}),Gi=class extends Error{},Qr=class extends Gi{},sr=class extends Gi{},Hi=class extends Gi{},yo=class extends Qr{constructor(e){super(),this.balance=e}},$u=class extends Qr{constructor(t){super(),this.allowed_window_secs=t}},qu=class extends Qr{},Gu=class extends Qr{constructor(t){super(),this.duplicateOf=t}},go=class extends Gi{constructor(e){super(),this.expectedFee=e}},Hu=class extends sr{constructor(e,t){super(),this.message=e,this.error_code=t}},Ph=class extends sr{},Ch=class extends sr{constructor(e){super(),this.duplicateOf=e}},Vh=class extends sr{constructor(e){super(),this.currentAllowance=e}},Mh=class extends sr{},$h=class extends sr{},qh=class extends sr{constructor(e){super(),this.ledgerTime=e}},Gh=class extends Hi{},Hh=class extends Hi{},Lh=class extends Hi{},jh=e=>"TxDuplicate"in e?new Gu(e.TxDuplicate.duplicate_of):"InsufficientFunds"in e?new yo(e.InsufficientFunds.balance.e8s):"TxCreatedInFuture"in e?new qu:"TxTooOld"in e?new $u(Number(e.TxTooOld.allowed_window_nanos)):"BadFee"in e?new go(e.BadFee.expected_fee.e8s):new Qr(`Unknown error type ${JSON.stringify(e)}`),zh=e=>"Duplicate"in e?new Gu(e.Duplicate.duplicate_of):"InsufficientFunds"in e?new yo(e.InsufficientFunds.balance):"CreatedInFuture"in e?new qu:"TooOld"in e?new $u:"BadFee"in e?new go(e.BadFee.expected_fee):new Qr(`Unknown error type ${JSON.stringify(e)}`),Kh=e=>"GenericError"in e?new Hu(e.GenericError.message,e.GenericError.error_code):"TemporarilyUnavailable"in e?new Ph:"Duplicate"in e?new Ch(e.Duplicate.duplicate_of):"BadFee"in e?new go(e.BadFee.expected_fee):"AllowanceChanged"in e?new Vh(e.AllowanceChanged.current_allowance):"CreatedInFuture"in e?new Mh:"TooOld"in e?new $h:"Expired"in e?new qh(e.Expired.ledger_time):"InsufficientFunds"in e?new yo(e.InsufficientFunds.balance):new sr(`Unknown error type ${JSON.stringify(e)}`),Dh=e=>"GenericError"in e?new Hu(e.GenericError.description,e.GenericError.error_code):"InsufficientPayment"in e?new Gh(e.InsufficientPayment.description):"UnsupportedCanisterCall"in e?new Hh(e.UnsupportedCanisterCall.description):"ConsentMessageUnavailable"in e?new Lh(e.ConsentMessageUnavailable.description):new Hi(`Unknown error type ${JSON.stringify(e)}`),Yh=class Lu extends Ou{constructor(){super(...arguments),this.accountBalance=async({accountIdentifier:t,certified:r=!0})=>{let n=Sh(t);return(await(r?this.certifiedService:this.service).account_balance({account:n.toUint8Array()})).e8s},this.metadata=t=>{let{icrc1_metadata:r}=this.caller(t);return r()},this.transactionFee=async(t={certified:!1})=>{let{transfer_fee:r}=this.caller(t),{transfer_fee:{e8s:n}}=await r({});return n},this.transfer=async t=>{let r=Ih(t),n=await this.certifiedService.transfer(r);if("Err"in n)throw jh(n.Err);return n.Ok},this.icrc1Transfer=async t=>{let r=Fh(t),n=await this.certifiedService.icrc1_transfer(r);if("Err"in n)throw zh(n.Err);return n.Ok},this.icrc2Approve=async t=>{let{icrc2_approve:r}=this.caller({certified:!0}),n=await r(Uh(t));if("Err"in n)throw Kh(n.Err);return n.Ok},this.icrc21ConsentMessage=async t=>{let{icrc21_canister_call_consent_message:r}=this.caller({certified:!0}),n=await r(kh(t));if("Err"in n)throw Dh(n.Err);return n.Ok}}static create(t={}){let r=t.canisterId??Ah,{service:n,certifiedService:o}=fo({options:{...t,canisterId:r},idlFactory:Oh,certifiedIdlFactory:Rh});return new Lu(r,n,o)}},Wh=ho(e=>{e.byteLength=h,e.toByteArray=E,e.fromByteArray=x;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(u=0,f=o.length;u<f;++u)t[u]=o[u],r[o.charCodeAt(u)]=u;var u,f;r[45]=62,r[95]=63;function a(p){var O=p.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var q=p.indexOf("=");q===-1&&(q=O);var K=q===O?0:4-q%4;return[q,K]}function h(p){var O=a(p),q=O[0],K=O[1];return(q+K)*3/4-K}function w(p,O,q){return(O+q)*3/4-q}function E(p){var O,q=a(p),K=q[0],D=q[1],V=new n(w(p,K,D)),te=0,I=D>0?K-4:K,W;for(W=0;W<I;W+=4)O=r[p.charCodeAt(W)]<<18|r[p.charCodeAt(W+1)]<<12|r[p.charCodeAt(W+2)]<<6|r[p.charCodeAt(W+3)],V[te++]=O>>16&255,V[te++]=O>>8&255,V[te++]=O&255;return D===2&&(O=r[p.charCodeAt(W)]<<2|r[p.charCodeAt(W+1)]>>4,V[te++]=O&255),D===1&&(O=r[p.charCodeAt(W)]<<10|r[p.charCodeAt(W+1)]<<4|r[p.charCodeAt(W+2)]>>2,V[te++]=O>>8&255,V[te++]=O&255),V}function m(p){return t[p>>18&63]+t[p>>12&63]+t[p>>6&63]+t[p&63]}function N(p,O,q){for(var K,D=[],V=O;V<q;V+=3)K=(p[V]<<16&16711680)+(p[V+1]<<8&65280)+(p[V+2]&255),D.push(m(K));return D.join("")}function x(p){for(var O,q=p.length,K=q%3,D=[],V=16383,te=0,I=q-K;te<I;te+=V)D.push(N(p,te,te+V>I?I:te+V));return K===1?(O=p[q-1],D.push(t[O>>2]+t[O<<4&63]+"==")):K===2&&(O=(p[q-2]<<8)+p[q-1],D.push(t[O>>10]+t[O>>4&63]+t[O<<2&63]+"=")),D.join("")}}),Zh=ho(e=>{e.read=function(t,r,n,o,u){var f,a,h=u*8-o-1,w=(1<<h)-1,E=w>>1,m=-7,N=n?u-1:0,x=n?-1:1,p=t[r+N];for(N+=x,f=p&(1<<-m)-1,p>>=-m,m+=h;m>0;f=f*256+t[r+N],N+=x,m-=8);for(a=f&(1<<-m)-1,f>>=-m,m+=o;m>0;a=a*256+t[r+N],N+=x,m-=8);if(f===0)f=1-E;else{if(f===w)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,o),f=f-E}return(p?-1:1)*a*Math.pow(2,f-o)},e.write=function(t,r,n,o,u,f){var a,h,w,E=f*8-u-1,m=(1<<E)-1,N=m>>1,x=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:f-1,O=o?1:-1,q=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,a=m):(a=Math.floor(Math.log(r)/Math.LN2),r*(w=Math.pow(2,-a))<1&&(a--,w*=2),a+N>=1?r+=x/w:r+=x*Math.pow(2,1-N),r*w>=2&&(a++,w/=2),a+N>=m?(h=0,a=m):a+N>=1?(h=(r*w-1)*Math.pow(2,u),a=a+N):(h=r*Math.pow(2,N-1)*Math.pow(2,u),a=0));u>=8;t[n+p]=h&255,p+=O,h/=256,u-=8);for(a=a<<u|h,E+=u;E>0;t[n+p]=a&255,p+=O,a/=256,E-=8);t[n+p-O]|=q*128}}),Xh=ho(e=>{var t=Wh(),r=Zh(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=D,e.INSPECT_MAX_BYTES=50;var o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{let s=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(s,i),s.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function f(s){if(s>o)throw new RangeError('The value "'+s+'" is invalid for option "size"');let i=new Uint8Array(s);return Object.setPrototypeOf(i,a.prototype),i}function a(s,i,c){if(typeof s=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(s)}return h(s,i,c)}a.poolSize=8192;function h(s,i,c){if(typeof s=="string")return N(s,i);if(ArrayBuffer.isView(s))return p(s);if(s==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(Z(s,ArrayBuffer)||s&&Z(s.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Z(s,SharedArrayBuffer)||s&&Z(s.buffer,SharedArrayBuffer)))return O(s,i,c);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let y=s.valueOf&&s.valueOf();if(y!=null&&y!==s)return a.from(y,i,c);let v=q(s);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return a.from(s[Symbol.toPrimitive]("string"),i,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}a.from=function(s,i,c){return h(s,i,c)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function w(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function E(s,i,c){return w(s),s<=0?f(s):i!==void 0?typeof c=="string"?f(s).fill(i,c):f(s).fill(i):f(s)}a.alloc=function(s,i,c){return E(s,i,c)};function m(s){return w(s),f(s<0?0:K(s)|0)}a.allocUnsafe=function(s){return m(s)},a.allocUnsafeSlow=function(s){return m(s)};function N(s,i){if((typeof i!="string"||i==="")&&(i="utf8"),!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i);let c=V(s,i)|0,y=f(c),v=y.write(s,i);return v!==c&&(y=y.slice(0,v)),y}function x(s){let i=s.length<0?0:K(s.length)|0,c=f(i);for(let y=0;y<i;y+=1)c[y]=s[y]&255;return c}function p(s){if(Z(s,Uint8Array)){let i=new Uint8Array(s);return O(i.buffer,i.byteOffset,i.byteLength)}return x(s)}function O(s,i,c){if(i<0||s.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<i+(c||0))throw new RangeError('"length" is outside of buffer bounds');let y;return i===void 0&&c===void 0?y=new Uint8Array(s):c===void 0?y=new Uint8Array(s,i):y=new Uint8Array(s,i,c),Object.setPrototypeOf(y,a.prototype),y}function q(s){if(a.isBuffer(s)){let i=K(s.length)|0,c=f(i);return c.length===0||s.copy(c,0,0,i),c}if(s.length!==void 0)return typeof s.length!="number"||oe(s.length)?f(0):x(s);if(s.type==="Buffer"&&Array.isArray(s.data))return x(s.data)}function K(s){if(s>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return s|0}function D(s){return+s!=s&&(s=0),a.alloc(+s)}a.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==a.prototype},a.compare=function(s,i){if(Z(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),Z(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),!a.isBuffer(s)||!a.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===i)return 0;let c=s.length,y=i.length;for(let v=0,U=Math.min(c,y);v<U;++v)if(s[v]!==i[v]){c=s[v],y=i[v];break}return c<y?-1:y<c?1:0},a.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(s,i){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return a.alloc(0);let c;if(i===void 0)for(i=0,c=0;c<s.length;++c)i+=s[c].length;let y=a.allocUnsafe(i),v=0;for(c=0;c<s.length;++c){let U=s[c];if(Z(U,Uint8Array))v+U.length>y.length?(a.isBuffer(U)||(U=a.from(U)),U.copy(y,v)):Uint8Array.prototype.set.call(y,U,v);else if(a.isBuffer(U))U.copy(y,v);else throw new TypeError('"list" argument must be an Array of Buffers');v+=U.length}return y};function V(s,i){if(a.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||Z(s,ArrayBuffer))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);let c=s.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&c===0)return 0;let v=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return l(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return T(s).length;default:if(v)return y?-1:l(s).length;i=(""+i).toLowerCase(),v=!0}}a.byteLength=V;function te(s,i,c){let y=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,i>>>=0,c<=i))return"";for(s||(s="utf8");;)switch(s){case"hex":return le(this,i,c);case"utf8":case"utf-8":return R(this,i,c);case"ascii":return ee(this,i,c);case"latin1":case"binary":return ne(this,i,c);case"base64":return _(this,i,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,i,c);default:if(y)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),y=!0}}a.prototype._isBuffer=!0;function I(s,i,c){let y=s[i];s[i]=s[c],s[c]=y}a.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<s;i+=2)I(this,i,i+1);return this},a.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<s;i+=4)I(this,i,i+3),I(this,i+1,i+2);return this},a.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<s;i+=8)I(this,i,i+7),I(this,i+1,i+6),I(this,i+2,i+5),I(this,i+3,i+4);return this},a.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?R(this,0,s):te.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(s){if(!a.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:a.compare(this,s)===0},a.prototype.inspect=function(){let s="",i=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(s+=" ... "),"<Buffer "+s+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(s,i,c,y,v){if(Z(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(i===void 0&&(i=0),c===void 0&&(c=s?s.length:0),y===void 0&&(y=0),v===void 0&&(v=this.length),i<0||c>s.length||y<0||v>this.length)throw new RangeError("out of range index");if(y>=v&&i>=c)return 0;if(y>=v)return-1;if(i>=c)return 1;if(i>>>=0,c>>>=0,y>>>=0,v>>>=0,this===s)return 0;let U=v-y,$=c-i,de=Math.min(U,$),me=this.slice(y,v),pe=s.slice(i,c);for(let fe=0;fe<de;++fe)if(me[fe]!==pe[fe]){U=me[fe],$=pe[fe];break}return U<$?-1:$<U?1:0};function W(s,i,c,y,v){if(s.length===0)return-1;if(typeof c=="string"?(y=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,oe(c)&&(c=v?0:s.length-1),c<0&&(c=s.length+c),c>=s.length){if(v)return-1;c=s.length-1}else if(c<0)if(v)c=0;else return-1;if(typeof i=="string"&&(i=a.from(i,y)),a.isBuffer(i))return i.length===0?-1:J(s,i,c,y,v);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(s,i,c):Uint8Array.prototype.lastIndexOf.call(s,i,c):J(s,[i],c,y,v);throw new TypeError("val must be string, number or Buffer")}function J(s,i,c,y,v){let U=1,$=s.length,de=i.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(s.length<2||i.length<2)return-1;U=2,$/=2,de/=2,c/=2}function me(fe,we){return U===1?fe[we]:fe.readUInt16BE(we*U)}let pe;if(v){let fe=-1;for(pe=c;pe<$;pe++)if(me(s,pe)===me(i,fe===-1?0:pe-fe)){if(fe===-1&&(fe=pe),pe-fe+1===de)return fe*U}else fe!==-1&&(pe-=pe-fe),fe=-1}else for(c+de>$&&(c=$-de),pe=c;pe>=0;pe--){let fe=!0;for(let we=0;we<de;we++)if(me(s,pe+we)!==me(i,we)){fe=!1;break}if(fe)return pe}return-1}a.prototype.includes=function(s,i,c){return this.indexOf(s,i,c)!==-1},a.prototype.indexOf=function(s,i,c){return W(this,s,i,c,!0)},a.prototype.lastIndexOf=function(s,i,c){return W(this,s,i,c,!1)};function F(s,i,c,y){c=Number(c)||0;let v=s.length-c;y?(y=Number(y),y>v&&(y=v)):y=v;let U=i.length;y>U/2&&(y=U/2);let $;for($=0;$<y;++$){let de=parseInt(i.substr($*2,2),16);if(oe(de))return $;s[c+$]=de}return $}function P(s,i,c,y){return C(l(i,s.length-c),s,c,y)}function G(s,i,c,y){return C(d(i),s,c,y)}function X(s,i,c,y){return C(T(i),s,c,y)}function re(s,i,c,y){return C(b(i,s.length-c),s,c,y)}a.prototype.write=function(s,i,c,y){if(i===void 0)y="utf8",c=this.length,i=0;else if(c===void 0&&typeof i=="string")y=i,c=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(c)?(c=c>>>0,y===void 0&&(y="utf8")):(y=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let v=this.length-i;if((c===void 0||c>v)&&(c=v),s.length>0&&(c<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");let U=!1;for(;;)switch(y){case"hex":return F(this,s,i,c);case"utf8":case"utf-8":return P(this,s,i,c);case"ascii":case"latin1":case"binary":return G(this,s,i,c);case"base64":return X(this,s,i,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,s,i,c);default:if(U)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),U=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(s,i,c){return i===0&&c===s.length?t.fromByteArray(s):t.fromByteArray(s.slice(i,c))}function R(s,i,c){c=Math.min(s.length,c);let y=[],v=i;for(;v<c;){let U=s[v],$=null,de=U>239?4:U>223?3:U>191?2:1;if(v+de<=c){let me,pe,fe,we;switch(de){case 1:U<128&&($=U);break;case 2:me=s[v+1],(me&192)===128&&(we=(U&31)<<6|me&63,we>127&&($=we));break;case 3:me=s[v+1],pe=s[v+2],(me&192)===128&&(pe&192)===128&&(we=(U&15)<<12|(me&63)<<6|pe&63,we>2047&&(we<55296||we>57343)&&($=we));break;case 4:me=s[v+1],pe=s[v+2],fe=s[v+3],(me&192)===128&&(pe&192)===128&&(fe&192)===128&&(we=(U&15)<<18|(me&63)<<12|(pe&63)<<6|fe&63,we>65535&&we<1114112&&($=we))}}$===null?($=65533,de=1):$>65535&&($-=65536,y.push($>>>10&1023|55296),$=56320|$&1023),y.push($),v+=de}return Y(y)}var M=4096;function Y(s){let i=s.length;if(i<=M)return String.fromCharCode.apply(String,s);let c="",y=0;for(;y<i;)c+=String.fromCharCode.apply(String,s.slice(y,y+=M));return c}function ee(s,i,c){let y="";c=Math.min(s.length,c);for(let v=i;v<c;++v)y+=String.fromCharCode(s[v]&127);return y}function ne(s,i,c){let y="";c=Math.min(s.length,c);for(let v=i;v<c;++v)y+=String.fromCharCode(s[v]);return y}function le(s,i,c){let y=s.length;(!i||i<0)&&(i=0),(!c||c<0||c>y)&&(c=y);let v="";for(let U=i;U<c;++U)v+=ye[s[U]];return v}function ge(s,i,c){let y=s.slice(i,c),v="";for(let U=0;U<y.length-1;U+=2)v+=String.fromCharCode(y[U]+y[U+1]*256);return v}a.prototype.slice=function(s,i){let c=this.length;s=~~s,i=i===void 0?c:~~i,s<0?(s+=c,s<0&&(s=0)):s>c&&(s=c),i<0?(i+=c,i<0&&(i=0)):i>c&&(i=c),i<s&&(i=s);let y=this.subarray(s,i);return Object.setPrototypeOf(y,a.prototype),y};function ie(s,i,c){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+i>c)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(s,i,c){s=s>>>0,i=i>>>0,c||ie(s,i,this.length);let y=this[s],v=1,U=0;for(;++U<i&&(v*=256);)y+=this[s+U]*v;return y},a.prototype.readUintBE=a.prototype.readUIntBE=function(s,i,c){s=s>>>0,i=i>>>0,c||ie(s,i,this.length);let y=this[s+--i],v=1;for(;i>0&&(v*=256);)y+=this[s+--i]*v;return y},a.prototype.readUint8=a.prototype.readUInt8=function(s,i){return s=s>>>0,i||ie(s,1,this.length),this[s]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(s,i){return s=s>>>0,i||ie(s,2,this.length),this[s]|this[s+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(s,i){return s=s>>>0,i||ie(s,2,this.length),this[s]<<8|this[s+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(s,i){return s=s>>>0,i||ie(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(s,i){return s=s>>>0,i||ie(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},a.prototype.readBigUInt64LE=he(function(s){s=s>>>0,L(s,"offset");let i=this[s],c=this[s+7];(i===void 0||c===void 0)&&H(s,this.length-8);let y=i+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,v=this[++s]+this[++s]*2**8+this[++s]*2**16+c*2**24;return BigInt(y)+(BigInt(v)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(s){s=s>>>0,L(s,"offset");let i=this[s],c=this[s+7];(i===void 0||c===void 0)&&H(s,this.length-8);let y=i*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],v=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+c;return(BigInt(y)<<BigInt(32))+BigInt(v)}),a.prototype.readIntLE=function(s,i,c){s=s>>>0,i=i>>>0,c||ie(s,i,this.length);let y=this[s],v=1,U=0;for(;++U<i&&(v*=256);)y+=this[s+U]*v;return v*=128,y>=v&&(y-=Math.pow(2,8*i)),y},a.prototype.readIntBE=function(s,i,c){s=s>>>0,i=i>>>0,c||ie(s,i,this.length);let y=i,v=1,U=this[s+--y];for(;y>0&&(v*=256);)U+=this[s+--y]*v;return v*=128,U>=v&&(U-=Math.pow(2,8*i)),U},a.prototype.readInt8=function(s,i){return s=s>>>0,i||ie(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},a.prototype.readInt16LE=function(s,i){s=s>>>0,i||ie(s,2,this.length);let c=this[s]|this[s+1]<<8;return c&32768?c|4294901760:c},a.prototype.readInt16BE=function(s,i){s=s>>>0,i||ie(s,2,this.length);let c=this[s+1]|this[s]<<8;return c&32768?c|4294901760:c},a.prototype.readInt32LE=function(s,i){return s=s>>>0,i||ie(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},a.prototype.readInt32BE=function(s,i){return s=s>>>0,i||ie(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},a.prototype.readBigInt64LE=he(function(s){s=s>>>0,L(s,"offset");let i=this[s],c=this[s+7];(i===void 0||c===void 0)&&H(s,this.length-8);let y=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(c<<24);return(BigInt(y)<<BigInt(32))+BigInt(i+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),a.prototype.readBigInt64BE=he(function(s){s=s>>>0,L(s,"offset");let i=this[s],c=this[s+7];(i===void 0||c===void 0)&&H(s,this.length-8);let y=(i<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(y)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+c)}),a.prototype.readFloatLE=function(s,i){return s=s>>>0,i||ie(s,4,this.length),r.read(this,s,!0,23,4)},a.prototype.readFloatBE=function(s,i){return s=s>>>0,i||ie(s,4,this.length),r.read(this,s,!1,23,4)},a.prototype.readDoubleLE=function(s,i){return s=s>>>0,i||ie(s,8,this.length),r.read(this,s,!0,52,8)},a.prototype.readDoubleBE=function(s,i){return s=s>>>0,i||ie(s,8,this.length),r.read(this,s,!1,52,8)};function ae(s,i,c,y,v,U){if(!a.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>v||i<U)throw new RangeError('"value" argument is out of bounds');if(c+y>s.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(s,i,c,y){if(s=+s,i=i>>>0,c=c>>>0,!y){let $=Math.pow(2,8*c)-1;ae(this,s,i,c,$,0)}let v=1,U=0;for(this[i]=s&255;++U<c&&(v*=256);)this[i+U]=s/v&255;return i+c},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(s,i,c,y){if(s=+s,i=i>>>0,c=c>>>0,!y){let $=Math.pow(2,8*c)-1;ae(this,s,i,c,$,0)}let v=c-1,U=1;for(this[i+v]=s&255;--v>=0&&(U*=256);)this[i+v]=s/U&255;return i+c},a.prototype.writeUint8=a.prototype.writeUInt8=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,1,255,0),this[i]=s&255,i+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,2,65535,0),this[i]=s&255,this[i+1]=s>>>8,i+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,2,65535,0),this[i]=s>>>8,this[i+1]=s&255,i+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,4,4294967295,0),this[i+3]=s>>>24,this[i+2]=s>>>16,this[i+1]=s>>>8,this[i]=s&255,i+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,4,4294967295,0),this[i]=s>>>24,this[i+1]=s>>>16,this[i+2]=s>>>8,this[i+3]=s&255,i+4};function Ne(s,i,c,y,v){k(i,y,v,s,c,7);let U=Number(i&BigInt(4294967295));s[c++]=U,U=U>>8,s[c++]=U,U=U>>8,s[c++]=U,U=U>>8,s[c++]=U;let $=Number(i>>BigInt(32)&BigInt(4294967295));return s[c++]=$,$=$>>8,s[c++]=$,$=$>>8,s[c++]=$,$=$>>8,s[c++]=$,c}function S(s,i,c,y,v){k(i,y,v,s,c,7);let U=Number(i&BigInt(4294967295));s[c+7]=U,U=U>>8,s[c+6]=U,U=U>>8,s[c+5]=U,U=U>>8,s[c+4]=U;let $=Number(i>>BigInt(32)&BigInt(4294967295));return s[c+3]=$,$=$>>8,s[c+2]=$,$=$>>8,s[c+1]=$,$=$>>8,s[c]=$,c+8}a.prototype.writeBigUInt64LE=he(function(s,i=0){return Ne(this,s,i,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(s,i=0){return S(this,s,i,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(s,i,c,y){if(s=+s,i=i>>>0,!y){let de=Math.pow(2,8*c-1);ae(this,s,i,c,de-1,-de)}let v=0,U=1,$=0;for(this[i]=s&255;++v<c&&(U*=256);)s<0&&$===0&&this[i+v-1]!==0&&($=1),this[i+v]=(s/U>>0)-$&255;return i+c},a.prototype.writeIntBE=function(s,i,c,y){if(s=+s,i=i>>>0,!y){let de=Math.pow(2,8*c-1);ae(this,s,i,c,de-1,-de)}let v=c-1,U=1,$=0;for(this[i+v]=s&255;--v>=0&&(U*=256);)s<0&&$===0&&this[i+v+1]!==0&&($=1),this[i+v]=(s/U>>0)-$&255;return i+c},a.prototype.writeInt8=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,1,127,-128),s<0&&(s=255+s+1),this[i]=s&255,i+1},a.prototype.writeInt16LE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,2,32767,-32768),this[i]=s&255,this[i+1]=s>>>8,i+2},a.prototype.writeInt16BE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,2,32767,-32768),this[i]=s>>>8,this[i+1]=s&255,i+2},a.prototype.writeInt32LE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,4,2147483647,-2147483648),this[i]=s&255,this[i+1]=s>>>8,this[i+2]=s>>>16,this[i+3]=s>>>24,i+4},a.prototype.writeInt32BE=function(s,i,c){return s=+s,i=i>>>0,c||ae(this,s,i,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[i]=s>>>24,this[i+1]=s>>>16,this[i+2]=s>>>8,this[i+3]=s&255,i+4},a.prototype.writeBigInt64LE=he(function(s,i=0){return Ne(this,s,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(s,i=0){return S(this,s,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(s,i,c,y,v,U){if(c+y>s.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Be(s,i,c,y,v){return i=+i,c=c>>>0,v||be(s,i,c,4),r.write(s,i,c,y,23,4),c+4}a.prototype.writeFloatLE=function(s,i,c){return Be(this,s,i,!0,c)},a.prototype.writeFloatBE=function(s,i,c){return Be(this,s,i,!1,c)};function ce(s,i,c,y,v){return i=+i,c=c>>>0,v||be(s,i,c,8),r.write(s,i,c,y,52,8),c+8}a.prototype.writeDoubleLE=function(s,i,c){return ce(this,s,i,!0,c)},a.prototype.writeDoubleBE=function(s,i,c){return ce(this,s,i,!1,c)},a.prototype.copy=function(s,i,c,y){if(!a.isBuffer(s))throw new TypeError("argument should be a Buffer");if(c||(c=0),!y&&y!==0&&(y=this.length),i>=s.length&&(i=s.length),i||(i=0),y>0&&y<c&&(y=c),y===c||s.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),s.length-i<y-c&&(y=s.length-i+c);let v=y-c;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,c,y):Uint8Array.prototype.set.call(s,this.subarray(c,y),i),v},a.prototype.fill=function(s,i,c,y){if(typeof s=="string"){if(typeof i=="string"?(y=i,i=0,c=this.length):typeof c=="string"&&(y=c,c=this.length),y!==void 0&&typeof y!="string")throw new TypeError("encoding must be a string");if(typeof y=="string"&&!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(s.length===1){let U=s.charCodeAt(0);(y==="utf8"&&U<128||y==="latin1")&&(s=U)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(i<0||this.length<i||this.length<c)throw new RangeError("Out of range index");if(c<=i)return this;i=i>>>0,c=c===void 0?this.length:c>>>0,s||(s=0);let v;if(typeof s=="number")for(v=i;v<c;++v)this[v]=s;else{let U=a.isBuffer(s)?s:a.from(s,y),$=U.length;if($===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(v=0;v<c-i;++v)this[v+i]=U[v%$]}return this};var Q={};function se(s,i,c){Q[s]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,this.stack,delete this.name}get code(){return s}set code(y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:y,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(s,i){return`The "${s}" argument must be of type number. Received type ${typeof i}`},TypeError),se("ERR_OUT_OF_RANGE",function(s,i,c){let y=`The value of "${s}" is out of range.`,v=c;return Number.isInteger(c)&&Math.abs(c)>2**32?v=B(String(c)):typeof c=="bigint"&&(v=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(v=B(v)),v+="n"),y+=` It must be ${i}. Received ${v}`,y},RangeError);function B(s){let i="",c=s.length,y=s[0]==="-"?1:0;for(;c>=y+4;c-=3)i=`_${s.slice(c-3,c)}${i}`;return`${s.slice(0,c)}${i}`}function A(s,i,c){L(i,"offset"),(s[i]===void 0||s[i+c]===void 0)&&H(i,s.length-(c+1))}function k(s,i,c,y,v,U){if(s>c||s<i){let $=typeof i=="bigint"?"n":"",de;throw i===0||i===BigInt(0)?de=`>= 0${$} and < 2${$} ** ${(U+1)*8}${$}`:de=`>= -(2${$} ** ${(U+1)*8-1}${$}) and < 2 ** ${(U+1)*8-1}${$}`,new Q.ERR_OUT_OF_RANGE("value",de,s)}A(y,v,U)}function L(s,i){if(typeof s!="number")throw new Q.ERR_INVALID_ARG_TYPE(i,"number",s)}function H(s,i,c){throw Math.floor(s)!==s?(L(s,c),new Q.ERR_OUT_OF_RANGE("offset","an integer",s)):i<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${i}`,s)}var j=/[^+/0-9A-Za-z-_]/g;function g(s){if(s=s.split("=")[0],s=s.trim().replace(j,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function l(s,i){i=i||1/0;let c,y=s.length,v=null,U=[];for(let $=0;$<y;++$){if(c=s.charCodeAt($),c>55295&&c<57344){if(!v){if(c>56319){(i-=3)>-1&&U.push(239,191,189);continue}else if($+1===y){(i-=3)>-1&&U.push(239,191,189);continue}v=c;continue}if(c<56320){(i-=3)>-1&&U.push(239,191,189),v=c;continue}c=(v-55296<<10|c-56320)+65536}else v&&(i-=3)>-1&&U.push(239,191,189);if(v=null,c<128){if((i-=1)<0)break;U.push(c)}else if(c<2048){if((i-=2)<0)break;U.push(c>>6|192,c&63|128)}else if(c<65536){if((i-=3)<0)break;U.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((i-=4)<0)break;U.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return U}function d(s){let i=[];for(let c=0;c<s.length;++c)i.push(s.charCodeAt(c)&255);return i}function b(s,i){let c,y,v,U=[];for(let $=0;$<s.length&&!((i-=2)<0);++$)c=s.charCodeAt($),y=c>>8,v=c%256,U.push(v),U.push(y);return U}function T(s){return t.toByteArray(g(s))}function C(s,i,c,y){let v;for(v=0;v<y&&!(v+c>=i.length||v>=s.length);++v)i[v+c]=s[v];return v}function Z(s,i){return s instanceof i||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===i.name}function oe(s){return s!==s}var ye=function(){let s="0123456789abcdef",i=new Array(256);for(let c=0;c<16;++c){let y=c*16;for(let v=0;v<16;++v)i[y+v]=s[c]+s[v]}return i}();function he(s){return typeof BigInt>"u"?ve:s}function ve(){throw new Error("BigInt not supported")}});dh(Xh());/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/class Li{async ledgerApi(){const t=await Ni();return Yh.create({agent:t})}async balance(){const r=await(await Ni()).getPrincipal(),n=Ls.fromPrincipal({principal:r});return await(await this.ledgerApi()).accountBalance({accountIdentifier:n,certified:!0})}async transfer(t,r,n,o,u){return await(await this.ledgerApi()).icrc1Transfer({to:{owner:t,subaccount:[r]},amount:n,icrc1Memo:o,fee:u})}}var Jh=class extends Error{},Qh=class extends Error{},ep=class extends Error{},tp=class extends Error{},rp=class extends Error{},Pa=({Err:e})=>{throw"Refunded"in e?new Jh(e.Refunded.reason):"InvalidTransaction"in e?new Qh(e.InvalidTransaction):"Processing"in e?new tp:"TransactionTooOld"in e?new rp:"Other"in e?new ep(`Error in CMC with code ${e.Other.error_code}: ${e.Other.error_message}`):new Error(`Unsupported error type ${JSON.stringify(e)}`)},np=({IDL:e})=>{let t=e.Variant({Set:e.Principal,Unset:e.Null}),r=e.Text;e.Record({exchange_rate_canister:e.Opt(t),cycles_ledger_canister_id:e.Opt(e.Principal),last_purged_notification:e.Opt(e.Nat64),governance_canister_id:e.Opt(e.Principal),minting_account_id:e.Opt(r),ledger_canister_id:e.Opt(e.Principal)});let n=e.Record({subnet_type:e.Opt(e.Text)}),o=e.Variant({Filter:n,Subnet:e.Record({subnet:e.Principal})}),u=e.Variant({controllers:e.Null,public:e.Null}),f=e.Record({freezing_threshold:e.Opt(e.Nat),wasm_memory_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(u),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),a=e.Record({subnet_selection:e.Opt(o),settings:e.Opt(f),subnet_type:e.Opt(e.Text)}),h=e.Variant({Refunded:e.Record({create_error:e.Text,refund_amount:e.Nat})}),w=e.Variant({Ok:e.Principal,Err:h}),E=e.Record({xdr_permyriad_per_icp:e.Nat64,timestamp_seconds:e.Nat64}),m=e.Record({certificate:e.Vec(e.Nat8),data:E,hash_tree:e.Vec(e.Nat8)}),N=e.Record({data:e.Vec(e.Tuple(e.Principal,e.Vec(e.Principal)))}),x=e.Record({data:e.Vec(e.Tuple(e.Text,e.Vec(e.Principal)))}),p=e.Nat64,O=e.Record({controller:e.Principal,block_index:p,subnet_selection:e.Opt(o),settings:e.Opt(f),subnet_type:e.Opt(e.Text)}),q=e.Variant({Refunded:e.Record({block_index:e.Opt(p),reason:e.Text}),InvalidTransaction:e.Text,Other:e.Record({error_message:e.Text,error_code:e.Nat64}),Processing:e.Null,TransactionTooOld:p}),K=e.Variant({Ok:e.Principal,Err:q}),D=e.Opt(e.Vec(e.Nat8)),V=e.Opt(e.Vec(e.Nat8)),te=e.Record({block_index:p,deposit_memo:D,to_subaccount:V}),I=e.Record({balance:e.Nat,block_index:e.Nat,minted:e.Nat}),W=e.Variant({Ok:I,Err:q}),J=e.Record({block_index:p,canister_id:e.Principal}),F=e.Nat,P=e.Variant({Ok:F,Err:q});return e.Service({create_canister:e.Func([a],[w],[]),get_build_metadata:e.Func([],[e.Text],[]),get_default_subnets:e.Func([],[e.Vec(e.Principal)],[]),get_icp_xdr_conversion_rate:e.Func([],[m],[]),get_principals_authorized_to_create_canisters_to_subnets:e.Func([],[N],[]),get_subnet_types_to_subnets:e.Func([],[x],[]),notify_create_canister:e.Func([O],[K],[]),notify_mint_cycles:e.Func([te],[W],[]),notify_top_up:e.Func([J],[P],[])})},ip=({IDL:e})=>{let t=e.Variant({Set:e.Principal,Unset:e.Null}),r=e.Text;e.Record({exchange_rate_canister:e.Opt(t),cycles_ledger_canister_id:e.Opt(e.Principal),last_purged_notification:e.Opt(e.Nat64),governance_canister_id:e.Opt(e.Principal),minting_account_id:e.Opt(r),ledger_canister_id:e.Opt(e.Principal)});let n=e.Record({subnet_type:e.Opt(e.Text)}),o=e.Variant({Filter:n,Subnet:e.Record({subnet:e.Principal})}),u=e.Variant({controllers:e.Null,public:e.Null}),f=e.Record({freezing_threshold:e.Opt(e.Nat),wasm_memory_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(u),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),a=e.Record({subnet_selection:e.Opt(o),settings:e.Opt(f),subnet_type:e.Opt(e.Text)}),h=e.Variant({Refunded:e.Record({create_error:e.Text,refund_amount:e.Nat})}),w=e.Variant({Ok:e.Principal,Err:h}),E=e.Record({xdr_permyriad_per_icp:e.Nat64,timestamp_seconds:e.Nat64}),m=e.Record({certificate:e.Vec(e.Nat8),data:E,hash_tree:e.Vec(e.Nat8)}),N=e.Record({data:e.Vec(e.Tuple(e.Principal,e.Vec(e.Principal)))}),x=e.Record({data:e.Vec(e.Tuple(e.Text,e.Vec(e.Principal)))}),p=e.Nat64,O=e.Record({controller:e.Principal,block_index:p,subnet_selection:e.Opt(o),settings:e.Opt(f),subnet_type:e.Opt(e.Text)}),q=e.Variant({Refunded:e.Record({block_index:e.Opt(p),reason:e.Text}),InvalidTransaction:e.Text,Other:e.Record({error_message:e.Text,error_code:e.Nat64}),Processing:e.Null,TransactionTooOld:p}),K=e.Variant({Ok:e.Principal,Err:q}),D=e.Opt(e.Vec(e.Nat8)),V=e.Opt(e.Vec(e.Nat8)),te=e.Record({block_index:p,deposit_memo:D,to_subaccount:V}),I=e.Record({balance:e.Nat,block_index:e.Nat,minted:e.Nat}),W=e.Variant({Ok:I,Err:q}),J=e.Record({block_index:p,canister_id:e.Principal}),F=e.Nat,P=e.Variant({Ok:F,Err:q});return e.Service({create_canister:e.Func([a],[w],[]),get_build_metadata:e.Func([],[e.Text],["query"]),get_default_subnets:e.Func([],[e.Vec(e.Principal)],["query"]),get_icp_xdr_conversion_rate:e.Func([],[m],["query"]),get_principals_authorized_to_create_canisters_to_subnets:e.Func([],[N],["query"]),get_subnet_types_to_subnets:e.Func([],[x],["query"]),notify_create_canister:e.Func([O],[K],[]),notify_mint_cycles:e.Func([te],[W],[]),notify_top_up:e.Func([J],[P],[])})},sp=class ju extends Ou{constructor(){super(...arguments),this.getIcpToCyclesConversionRate=async({certified:t}={})=>{let{data:r}=await this.caller({certified:t}).get_icp_xdr_conversion_rate();return r.xdr_permyriad_per_icp},this.notifyCreateCanister=async t=>{let r=await this.service.notify_create_canister(t);if("Err"in r&&Pa(r),"Ok"in r)return r.Ok;throw new Error(`Unsupported response type in notifyCreateCanister ${JSON.stringify(r)}`)},this.notifyTopUp=async t=>{let r=await this.service.notify_top_up(t);if("Err"in r&&Pa(r),"Ok"in r)return r.Ok;throw new Error(`Unsupported response type in notifyTopUp ${JSON.stringify(r)}`)},this.getDefaultSubnets=async({certified:t}={})=>{let{get_default_subnets:r}=this.caller({certified:t});return r()},this.getSubnetTypesToSubnets=async({certified:t}={})=>{let{get_subnet_types_to_subnets:r}=this.caller({certified:t});return r()}}static create(t){let{service:r,certifiedService:n,canisterId:o}=fo({options:t,idlFactory:ip,certifiedIdlFactory:np});return new ju(o,r,n)}};class op{async cmcApi(){const t=await Ni();return sp.create({agent:t,canisterId:Ee.fromText(Va)})}async notifyTopUp(t,r){return await(await this.cmcApi()).notifyTopUp({canister_id:Ee.fromText(t),block_index:r})}}function ap(){const e=document.getElementById("loading-overlay");e&&e.classList.remove("hidden")}function Ca(){const e=document.getElementById("loading-overlay");e&&e.classList.add("hidden")}async function cp(){if(ap(),!await up()){Ca();return}const n=await new Li().balance()-zs,o=await fp(n),u=new op,f=lo().toString();await u.notifyTopUp(f,o),Ca(),window.location.reload()}async function up(){const t=await new Li().balance(),r=zs*3n;return t>=r}async function fp(e){const t=new Li,r=lo(),n=th(r),o=Ee.fromText(Va);return await t.transfer(o,n,e,ff,zs)}class lp{async init(){this.renderBalanceSection();const r=await new Li().balance(),n=(Number(r)/1e8).toFixed(8);this.renderBalanceContent(n),this.attachEventListeners()}renderBalanceSection(){const t=document.getElementById("balance-section");t.innerHTML=`
            <h3>Top up</h3>
            <div id="balance-content">Loading...</div>
        `}renderBalanceContent(t){const r=document.getElementById("balance-content");r.innerHTML=`
            <p><strong>Balance:</strong> ${t} ICP</p>
            <p><button id="top-up-btn" class="btn">Top-up</button></p>
        `}attachEventListeners(){const t=document.getElementById("top-up-btn");t&&t.addEventListener("click",()=>{cp()})}}async function dp(){await new lp().init()}class hp{async init(){this.renderControllersSection();const n=(await new Pu().getCanisterStatus()).settings.controllers.map(o=>`<li class="principal">${o.toString()}</li>`).join("");this.renderControllersContent(n)}renderControllersSection(){const t=document.getElementById("controllers-section");t.innerHTML=`
            <h3>Controllers</h3>
            <div id="controllers-content">Loading...</div>
        `}renderControllersContent(t){const r=document.getElementById("controllers-content");r.innerHTML=`
                <div class="controllers-info">
                    <ul>
                        ${t}
                    </ul>
                </div>
            `}}async function pp(){await new hp().init()}class yp{async init(){this.renderAlternativeOriginsSection();const r=(await this.fetchAlternativeOrigins()).map(n=>`<li>${n}</li>`).join("");this.renderAlternativeOriginsContent(r)}renderAlternativeOriginsSection(){const t=document.getElementById("alternative-origins-section");t.innerHTML=`
            <h3>Alternative Origins</h3>
            <div id="alternative-origins-content">Loading...</div>
        `}renderAlternativeOriginsContent(t){const r=document.getElementById("alternative-origins-content");r.innerHTML=`
                <div class="alternative-origins-info">
                    <ul>
                        ${t}
                    </ul>
                </div>
            `}async fetchAlternativeOrigins(){return(await(await fetch("/.well-known/ii-alternative-origins")).json()).alternativeOrigins}}async function gp(){await new yp().init()}class mp{constructor(){this.init()}async init(){await q0(),await(await co.create()).isAuthenticated()&&await Promise.all([sh(),dp(),pp(),gp()]),this.startRefreshTimer()}startRefreshTimer(){setInterval(()=>{window.location.reload()},uf)}}document.addEventListener("DOMContentLoaded",()=>{new mp});
